"use strict";const Ae=require("electron"),Pe=require("path"),vr=require("child_process"),nt=require("fs"),fc=require("constants"),Er=require("stream"),ta=require("util"),Ll=require("assert"),ra=require("events"),yr=require("crypto"),xl=require("tty"),Gr=require("os"),yt=require("url"),dc=require("string_decoder"),Ul=require("zlib"),hc=require("http");var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tt={},tn={},Or={},Oa;function Xe(){return Oa||(Oa=1,Or.fromCallback=function(t){return Object.defineProperty(function(...d){if(typeof d[d.length-1]=="function")t.apply(this,d);else return new Promise((p,f)=>{d.push((u,l)=>u!=null?f(u):p(l)),t.apply(this,d)})},"name",{value:t.name})},Or.fromPromise=function(t){return Object.defineProperty(function(...d){const p=d[d.length-1];if(typeof p!="function")return t.apply(this,d);d.pop(),t.apply(this,d).then(f=>p(null,f),p)},"name",{value:t.name})}),Or}var rn,Ia;function pc(){if(Ia)return rn;Ia=1;var t=fc,d=process.cwd,p=null,f=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return p||(p=d.call(process)),p};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var u=process.chdir;process.chdir=function(n){p=null,u.call(process,n)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,u)}rn=l;function l(n){t.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&c(n),n.lutimes||o(n),n.chown=r(n.chown),n.fchown=r(n.fchown),n.lchown=r(n.lchown),n.chmod=s(n.chmod),n.fchmod=s(n.fchmod),n.lchmod=s(n.lchmod),n.chownSync=i(n.chownSync),n.fchownSync=i(n.fchownSync),n.lchownSync=i(n.lchownSync),n.chmodSync=a(n.chmodSync),n.fchmodSync=a(n.fchmodSync),n.lchmodSync=a(n.lchmodSync),n.stat=h(n.stat),n.fstat=h(n.fstat),n.lstat=h(n.lstat),n.statSync=g(n.statSync),n.fstatSync=g(n.fstatSync),n.lstatSync=g(n.lstatSync),n.chmod&&!n.lchmod&&(n.lchmod=function(m,w,C){C&&process.nextTick(C)},n.lchmodSync=function(){}),n.chown&&!n.lchown&&(n.lchown=function(m,w,C,P){P&&process.nextTick(P)},n.lchownSync=function(){}),f==="win32"&&(n.rename=typeof n.rename!="function"?n.rename:(function(m){function w(C,P,I){var b=Date.now(),O=0;m(C,P,function S(A){if(A&&(A.code==="EACCES"||A.code==="EPERM"||A.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){n.stat(P,function(v,k){v&&v.code==="ENOENT"?m(C,P,S):I(A)})},O),O<100&&(O+=10);return}I&&I(A)})}return Object.setPrototypeOf&&Object.setPrototypeOf(w,m),w})(n.rename)),n.read=typeof n.read!="function"?n.read:(function(m){function w(C,P,I,b,O,S){var A;if(S&&typeof S=="function"){var v=0;A=function(k,q,x){if(k&&k.code==="EAGAIN"&&v<10)return v++,m.call(n,C,P,I,b,O,A);S.apply(this,arguments)}}return m.call(n,C,P,I,b,O,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(w,m),w})(n.read),n.readSync=typeof n.readSync!="function"?n.readSync:(function(m){return function(w,C,P,I,b){for(var O=0;;)try{return m.call(n,w,C,P,I,b)}catch(S){if(S.code==="EAGAIN"&&O<10){O++;continue}throw S}}})(n.readSync);function c(m){m.lchmod=function(w,C,P){m.open(w,t.O_WRONLY|t.O_SYMLINK,C,function(I,b){if(I){P&&P(I);return}m.fchmod(b,C,function(O){m.close(b,function(S){P&&P(O||S)})})})},m.lchmodSync=function(w,C){var P=m.openSync(w,t.O_WRONLY|t.O_SYMLINK,C),I=!0,b;try{b=m.fchmodSync(P,C),I=!1}finally{if(I)try{m.closeSync(P)}catch{}else m.closeSync(P)}return b}}function o(m){t.hasOwnProperty("O_SYMLINK")&&m.futimes?(m.lutimes=function(w,C,P,I){m.open(w,t.O_SYMLINK,function(b,O){if(b){I&&I(b);return}m.futimes(O,C,P,function(S){m.close(O,function(A){I&&I(S||A)})})})},m.lutimesSync=function(w,C,P){var I=m.openSync(w,t.O_SYMLINK),b,O=!0;try{b=m.futimesSync(I,C,P),O=!1}finally{if(O)try{m.closeSync(I)}catch{}else m.closeSync(I)}return b}):m.futimes&&(m.lutimes=function(w,C,P,I){I&&process.nextTick(I)},m.lutimesSync=function(){})}function s(m){return m&&function(w,C,P){return m.call(n,w,C,function(I){y(I)&&(I=null),P&&P.apply(this,arguments)})}}function a(m){return m&&function(w,C){try{return m.call(n,w,C)}catch(P){if(!y(P))throw P}}}function r(m){return m&&function(w,C,P,I){return m.call(n,w,C,P,function(b){y(b)&&(b=null),I&&I.apply(this,arguments)})}}function i(m){return m&&function(w,C,P){try{return m.call(n,w,C,P)}catch(I){if(!y(I))throw I}}}function h(m){return m&&function(w,C,P){typeof C=="function"&&(P=C,C=null);function I(b,O){O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),P&&P.apply(this,arguments)}return C?m.call(n,w,C,I):m.call(n,w,I)}}function g(m){return m&&function(w,C){var P=C?m.call(n,w,C):m.call(n,w);return P&&(P.uid<0&&(P.uid+=4294967296),P.gid<0&&(P.gid+=4294967296)),P}}function y(m){if(!m||m.code==="ENOSYS")return!0;var w=!process.getuid||process.getuid()!==0;return!!(w&&(m.code==="EINVAL"||m.code==="EPERM"))}}return rn}var nn,Da;function mc(){if(Da)return nn;Da=1;var t=Er.Stream;nn=d;function d(p){return{ReadStream:f,WriteStream:u};function f(l,n){if(!(this instanceof f))return new f(l,n);t.call(this);var c=this;this.path=l,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var o=Object.keys(n),s=0,a=o.length;s<a;s++){var r=o[s];this[r]=n[r]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){c._read()});return}p.open(this.path,this.flags,this.mode,function(i,h){if(i){c.emit("error",i),c.readable=!1;return}c.fd=h,c.emit("open",h),c._read()})}function u(l,n){if(!(this instanceof u))return new u(l,n);t.call(this),this.path=l,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var c=Object.keys(n),o=0,s=c.length;o<s;o++){var a=c[o];this[a]=n[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=p.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return nn}var an,Na;function gc(){if(Na)return an;Na=1,an=d;var t=Object.getPrototypeOf||function(p){return p.__proto__};function d(p){if(p===null||typeof p!="object")return p;if(p instanceof Object)var f={__proto__:t(p)};else var f=Object.create(null);return Object.getOwnPropertyNames(p).forEach(function(u){Object.defineProperty(f,u,Object.getOwnPropertyDescriptor(p,u))}),f}return an}var Ir,Fa;function Ye(){if(Fa)return Ir;Fa=1;var t=nt,d=pc(),p=mc(),f=gc(),u=ta,l,n;typeof Symbol=="function"&&typeof Symbol.for=="function"?(l=Symbol.for("graceful-fs.queue"),n=Symbol.for("graceful-fs.previous")):(l="___graceful-fs.queue",n="___graceful-fs.previous");function c(){}function o(m,w){Object.defineProperty(m,l,{get:function(){return w}})}var s=c;if(u.debuglog?s=u.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(s=function(){var m=u.format.apply(u,arguments);m="GFS4: "+m.split(/\n/).join(`
GFS4: `),console.error(m)}),!t[l]){var a=rt[l]||[];o(t,a),t.close=(function(m){function w(C,P){return m.call(t,C,function(I){I||g(),typeof P=="function"&&P.apply(this,arguments)})}return Object.defineProperty(w,n,{value:m}),w})(t.close),t.closeSync=(function(m){function w(C){m.apply(t,arguments),g()}return Object.defineProperty(w,n,{value:m}),w})(t.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){s(t[l]),Ll.equal(t[l].length,0)})}rt[l]||o(rt,t[l]),Ir=r(f(t)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!t.__patched&&(Ir=r(t),t.__patched=!0);function r(m){d(m),m.gracefulify=r,m.createReadStream=de,m.createWriteStream=ie;var w=m.readFile;m.readFile=C;function C(Q,ge,_){return typeof ge=="function"&&(_=ge,ge=null),E(Q,ge,_);function E(H,F,ce,he){return w(H,F,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?i([E,[H,F,ce],pe,he||Date.now(),Date.now()]):typeof ce=="function"&&ce.apply(this,arguments)})}}var P=m.writeFile;m.writeFile=I;function I(Q,ge,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ge,_,E);function H(F,ce,he,pe,_e){return P(F,ce,he,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?i([H,[F,ce,he,pe],Ee,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var b=m.appendFile;b&&(m.appendFile=O);function O(Q,ge,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ge,_,E);function H(F,ce,he,pe,_e){return b(F,ce,he,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?i([H,[F,ce,he,pe],Ee,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var S=m.copyFile;S&&(m.copyFile=A);function A(Q,ge,_,E){return typeof _=="function"&&(E=_,_=0),H(Q,ge,_,E);function H(F,ce,he,pe,_e){return S(F,ce,he,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?i([H,[F,ce,he,pe],Ee,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var v=m.readdir;m.readdir=q;var k=/^v[0-5]\./;function q(Q,ge,_){typeof ge=="function"&&(_=ge,ge=null);var E=k.test(process.version)?function(ce,he,pe,_e){return v(ce,H(ce,he,pe,_e))}:function(ce,he,pe,_e){return v(ce,he,H(ce,he,pe,_e))};return E(Q,ge,_);function H(F,ce,he,pe){return function(_e,Ee){_e&&(_e.code==="EMFILE"||_e.code==="ENFILE")?i([E,[F,ce,he],_e,pe||Date.now(),Date.now()]):(Ee&&Ee.sort&&Ee.sort(),typeof he=="function"&&he.call(this,_e,Ee))}}}if(process.version.substr(0,4)==="v0.8"){var x=p(m);D=x.ReadStream,V=x.WriteStream}var $=m.ReadStream;$&&(D.prototype=Object.create($.prototype),D.prototype.open=G);var L=m.WriteStream;L&&(V.prototype=Object.create(L.prototype),V.prototype.open=te),Object.defineProperty(m,"ReadStream",{get:function(){return D},set:function(Q){D=Q},enumerable:!0,configurable:!0}),Object.defineProperty(m,"WriteStream",{get:function(){return V},set:function(Q){V=Q},enumerable:!0,configurable:!0});var N=D;Object.defineProperty(m,"FileReadStream",{get:function(){return N},set:function(Q){N=Q},enumerable:!0,configurable:!0});var j=V;Object.defineProperty(m,"FileWriteStream",{get:function(){return j},set:function(Q){j=Q},enumerable:!0,configurable:!0});function D(Q,ge){return this instanceof D?($.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function G(){var Q=this;ve(Q.path,Q.flags,Q.mode,function(ge,_){ge?(Q.autoClose&&Q.destroy(),Q.emit("error",ge)):(Q.fd=_,Q.emit("open",_),Q.read())})}function V(Q,ge){return this instanceof V?(L.apply(this,arguments),this):V.apply(Object.create(V.prototype),arguments)}function te(){var Q=this;ve(Q.path,Q.flags,Q.mode,function(ge,_){ge?(Q.destroy(),Q.emit("error",ge)):(Q.fd=_,Q.emit("open",_))})}function de(Q,ge){return new m.ReadStream(Q,ge)}function ie(Q,ge){return new m.WriteStream(Q,ge)}var we=m.open;m.open=ve;function ve(Q,ge,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ge,_,E);function H(F,ce,he,pe,_e){return we(F,ce,he,function(Ee,Ve){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?i([H,[F,ce,he,pe],Ee,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return m}function i(m){s("ENQUEUE",m[0].name,m[1]),t[l].push(m),y()}var h;function g(){for(var m=Date.now(),w=0;w<t[l].length;++w)t[l][w].length>2&&(t[l][w][3]=m,t[l][w][4]=m);y()}function y(){if(clearTimeout(h),h=void 0,t[l].length!==0){var m=t[l].shift(),w=m[0],C=m[1],P=m[2],I=m[3],b=m[4];if(I===void 0)s("RETRY",w.name,C),w.apply(null,C);else if(Date.now()-I>=6e4){s("TIMEOUT",w.name,C);var O=C.pop();typeof O=="function"&&O.call(null,P)}else{var S=Date.now()-b,A=Math.max(b-I,1),v=Math.min(A*1.2,100);S>=v?(s("RETRY",w.name,C),w.apply(null,C.concat([I]))):t[l].push(m)}h===void 0&&(h=setTimeout(y,0))}}return Ir}var La;function Ht(){return La||(La=1,(function(t){const d=Xe().fromCallback,p=Ye(),f=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(u=>typeof p[u]=="function");Object.assign(t,p),f.forEach(u=>{t[u]=d(p[u])}),t.exists=function(u,l){return typeof l=="function"?p.exists(u,l):new Promise(n=>p.exists(u,n))},t.read=function(u,l,n,c,o,s){return typeof s=="function"?p.read(u,l,n,c,o,s):new Promise((a,r)=>{p.read(u,l,n,c,o,(i,h,g)=>{if(i)return r(i);a({bytesRead:h,buffer:g})})})},t.write=function(u,l,...n){return typeof n[n.length-1]=="function"?p.write(u,l,...n):new Promise((c,o)=>{p.write(u,l,...n,(s,a,r)=>{if(s)return o(s);c({bytesWritten:a,buffer:r})})})},typeof p.writev=="function"&&(t.writev=function(u,l,...n){return typeof n[n.length-1]=="function"?p.writev(u,l,...n):new Promise((c,o)=>{p.writev(u,l,...n,(s,a,r)=>{if(s)return o(s);c({bytesWritten:a,buffers:r})})})}),typeof p.realpath.native=="function"?t.realpath.native=d(p.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(tn)),tn}var Dr={},on={},xa;function vc(){if(xa)return on;xa=1;const t=Pe;return on.checkPath=function(p){if(process.platform==="win32"&&/[<>:"|?*]/.test(p.replace(t.parse(p).root,""))){const u=new Error(`Path contains invalid characters: ${p}`);throw u.code="EINVAL",u}},on}var Ua;function Ec(){if(Ua)return Dr;Ua=1;const t=Ht(),{checkPath:d}=vc(),p=f=>{const u={mode:511};return typeof f=="number"?f:{...u,...f}.mode};return Dr.makeDir=async(f,u)=>(d(f),t.mkdir(f,{mode:p(u),recursive:!0})),Dr.makeDirSync=(f,u)=>(d(f),t.mkdirSync(f,{mode:p(u),recursive:!0})),Dr}var sn,ka;function st(){if(ka)return sn;ka=1;const t=Xe().fromPromise,{makeDir:d,makeDirSync:p}=Ec(),f=t(d);return sn={mkdirs:f,mkdirsSync:p,mkdirp:f,mkdirpSync:p,ensureDir:f,ensureDirSync:p},sn}var ln,qa;function Dt(){if(qa)return ln;qa=1;const t=Xe().fromPromise,d=Ht();function p(f){return d.access(f).then(()=>!0).catch(()=>!1)}return ln={pathExists:t(p),pathExistsSync:d.existsSync},ln}var un,$a;function kl(){if($a)return un;$a=1;const t=Ye();function d(f,u,l,n){t.open(f,"r+",(c,o)=>{if(c)return n(c);t.futimes(o,u,l,s=>{t.close(o,a=>{n&&n(s||a)})})})}function p(f,u,l){const n=t.openSync(f,"r+");return t.futimesSync(n,u,l),t.closeSync(n)}return un={utimesMillis:d,utimesMillisSync:p},un}var cn,Ma;function jt(){if(Ma)return cn;Ma=1;const t=Ht(),d=Pe,p=ta;function f(i,h,g){const y=g.dereference?m=>t.stat(m,{bigint:!0}):m=>t.lstat(m,{bigint:!0});return Promise.all([y(i),y(h).catch(m=>{if(m.code==="ENOENT")return null;throw m})]).then(([m,w])=>({srcStat:m,destStat:w}))}function u(i,h,g){let y;const m=g.dereference?C=>t.statSync(C,{bigint:!0}):C=>t.lstatSync(C,{bigint:!0}),w=m(i);try{y=m(h)}catch(C){if(C.code==="ENOENT")return{srcStat:w,destStat:null};throw C}return{srcStat:w,destStat:y}}function l(i,h,g,y,m){p.callbackify(f)(i,h,y,(w,C)=>{if(w)return m(w);const{srcStat:P,destStat:I}=C;if(I){if(s(P,I)){const b=d.basename(i),O=d.basename(h);return g==="move"&&b!==O&&b.toLowerCase()===O.toLowerCase()?m(null,{srcStat:P,destStat:I,isChangingCase:!0}):m(new Error("Source and destination must not be the same."))}if(P.isDirectory()&&!I.isDirectory())return m(new Error(`Cannot overwrite non-directory '${h}' with directory '${i}'.`));if(!P.isDirectory()&&I.isDirectory())return m(new Error(`Cannot overwrite directory '${h}' with non-directory '${i}'.`))}return P.isDirectory()&&a(i,h)?m(new Error(r(i,h,g))):m(null,{srcStat:P,destStat:I})})}function n(i,h,g,y){const{srcStat:m,destStat:w}=u(i,h,y);if(w){if(s(m,w)){const C=d.basename(i),P=d.basename(h);if(g==="move"&&C!==P&&C.toLowerCase()===P.toLowerCase())return{srcStat:m,destStat:w,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(m.isDirectory()&&!w.isDirectory())throw new Error(`Cannot overwrite non-directory '${h}' with directory '${i}'.`);if(!m.isDirectory()&&w.isDirectory())throw new Error(`Cannot overwrite directory '${h}' with non-directory '${i}'.`)}if(m.isDirectory()&&a(i,h))throw new Error(r(i,h,g));return{srcStat:m,destStat:w}}function c(i,h,g,y,m){const w=d.resolve(d.dirname(i)),C=d.resolve(d.dirname(g));if(C===w||C===d.parse(C).root)return m();t.stat(C,{bigint:!0},(P,I)=>P?P.code==="ENOENT"?m():m(P):s(h,I)?m(new Error(r(i,g,y))):c(i,h,C,y,m))}function o(i,h,g,y){const m=d.resolve(d.dirname(i)),w=d.resolve(d.dirname(g));if(w===m||w===d.parse(w).root)return;let C;try{C=t.statSync(w,{bigint:!0})}catch(P){if(P.code==="ENOENT")return;throw P}if(s(h,C))throw new Error(r(i,g,y));return o(i,h,w,y)}function s(i,h){return h.ino&&h.dev&&h.ino===i.ino&&h.dev===i.dev}function a(i,h){const g=d.resolve(i).split(d.sep).filter(m=>m),y=d.resolve(h).split(d.sep).filter(m=>m);return g.reduce((m,w,C)=>m&&y[C]===w,!0)}function r(i,h,g){return`Cannot ${g} '${i}' to a subdirectory of itself, '${h}'.`}return cn={checkPaths:l,checkPathsSync:n,checkParentPaths:c,checkParentPathsSync:o,isSrcSubdir:a,areIdentical:s},cn}var fn,Ba;function yc(){if(Ba)return fn;Ba=1;const t=Ye(),d=Pe,p=st().mkdirs,f=Dt().pathExists,u=kl().utimesMillis,l=jt();function n(q,x,$,L){typeof $=="function"&&!L?(L=$,$={}):typeof $=="function"&&($={filter:$}),L=L||function(){},$=$||{},$.clobber="clobber"in $?!!$.clobber:!0,$.overwrite="overwrite"in $?!!$.overwrite:$.clobber,$.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),l.checkPaths(q,x,"copy",$,(N,j)=>{if(N)return L(N);const{srcStat:D,destStat:G}=j;l.checkParentPaths(q,D,x,"copy",V=>V?L(V):$.filter?o(c,G,q,x,$,L):c(G,q,x,$,L))})}function c(q,x,$,L,N){const j=d.dirname($);f(j,(D,G)=>{if(D)return N(D);if(G)return a(q,x,$,L,N);p(j,V=>V?N(V):a(q,x,$,L,N))})}function o(q,x,$,L,N,j){Promise.resolve(N.filter($,L)).then(D=>D?q(x,$,L,N,j):j(),D=>j(D))}function s(q,x,$,L,N){return L.filter?o(a,q,x,$,L,N):a(q,x,$,L,N)}function a(q,x,$,L,N){(L.dereference?t.stat:t.lstat)(x,(D,G)=>D?N(D):G.isDirectory()?I(G,q,x,$,L,N):G.isFile()||G.isCharacterDevice()||G.isBlockDevice()?r(G,q,x,$,L,N):G.isSymbolicLink()?v(q,x,$,L,N):G.isSocket()?N(new Error(`Cannot copy a socket file: ${x}`)):G.isFIFO()?N(new Error(`Cannot copy a FIFO pipe: ${x}`)):N(new Error(`Unknown file: ${x}`)))}function r(q,x,$,L,N,j){return x?i(q,$,L,N,j):h(q,$,L,N,j)}function i(q,x,$,L,N){if(L.overwrite)t.unlink($,j=>j?N(j):h(q,x,$,L,N));else return L.errorOnExist?N(new Error(`'${$}' already exists`)):N()}function h(q,x,$,L,N){t.copyFile(x,$,j=>j?N(j):L.preserveTimestamps?g(q.mode,x,$,N):C($,q.mode,N))}function g(q,x,$,L){return y(q)?m($,q,N=>N?L(N):w(q,x,$,L)):w(q,x,$,L)}function y(q){return(q&128)===0}function m(q,x,$){return C(q,x|128,$)}function w(q,x,$,L){P(x,$,N=>N?L(N):C($,q,L))}function C(q,x,$){return t.chmod(q,x,$)}function P(q,x,$){t.stat(q,(L,N)=>L?$(L):u(x,N.atime,N.mtime,$))}function I(q,x,$,L,N,j){return x?O($,L,N,j):b(q.mode,$,L,N,j)}function b(q,x,$,L,N){t.mkdir($,j=>{if(j)return N(j);O(x,$,L,D=>D?N(D):C($,q,N))})}function O(q,x,$,L){t.readdir(q,(N,j)=>N?L(N):S(j,q,x,$,L))}function S(q,x,$,L,N){const j=q.pop();return j?A(q,j,x,$,L,N):N()}function A(q,x,$,L,N,j){const D=d.join($,x),G=d.join(L,x);l.checkPaths(D,G,"copy",N,(V,te)=>{if(V)return j(V);const{destStat:de}=te;s(de,D,G,N,ie=>ie?j(ie):S(q,$,L,N,j))})}function v(q,x,$,L,N){t.readlink(x,(j,D)=>{if(j)return N(j);if(L.dereference&&(D=d.resolve(process.cwd(),D)),q)t.readlink($,(G,V)=>G?G.code==="EINVAL"||G.code==="UNKNOWN"?t.symlink(D,$,N):N(G):(L.dereference&&(V=d.resolve(process.cwd(),V)),l.isSrcSubdir(D,V)?N(new Error(`Cannot copy '${D}' to a subdirectory of itself, '${V}'.`)):q.isDirectory()&&l.isSrcSubdir(V,D)?N(new Error(`Cannot overwrite '${V}' with '${D}'.`)):k(D,$,N)));else return t.symlink(D,$,N)})}function k(q,x,$){t.unlink(x,L=>L?$(L):t.symlink(q,x,$))}return fn=n,fn}var dn,Ha;function wc(){if(Ha)return dn;Ha=1;const t=Ye(),d=Pe,p=st().mkdirsSync,f=kl().utimesMillisSync,u=jt();function l(S,A,v){typeof v=="function"&&(v={filter:v}),v=v||{},v.clobber="clobber"in v?!!v.clobber:!0,v.overwrite="overwrite"in v?!!v.overwrite:v.clobber,v.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:k,destStat:q}=u.checkPathsSync(S,A,"copy",v);return u.checkParentPathsSync(S,k,A,"copy"),n(q,S,A,v)}function n(S,A,v,k){if(k.filter&&!k.filter(A,v))return;const q=d.dirname(v);return t.existsSync(q)||p(q),o(S,A,v,k)}function c(S,A,v,k){if(!(k.filter&&!k.filter(A,v)))return o(S,A,v,k)}function o(S,A,v,k){const x=(k.dereference?t.statSync:t.lstatSync)(A);if(x.isDirectory())return w(x,S,A,v,k);if(x.isFile()||x.isCharacterDevice()||x.isBlockDevice())return s(x,S,A,v,k);if(x.isSymbolicLink())return b(S,A,v,k);throw x.isSocket()?new Error(`Cannot copy a socket file: ${A}`):x.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${A}`):new Error(`Unknown file: ${A}`)}function s(S,A,v,k,q){return A?a(S,v,k,q):r(S,v,k,q)}function a(S,A,v,k){if(k.overwrite)return t.unlinkSync(v),r(S,A,v,k);if(k.errorOnExist)throw new Error(`'${v}' already exists`)}function r(S,A,v,k){return t.copyFileSync(A,v),k.preserveTimestamps&&i(S.mode,A,v),y(v,S.mode)}function i(S,A,v){return h(S)&&g(v,S),m(A,v)}function h(S){return(S&128)===0}function g(S,A){return y(S,A|128)}function y(S,A){return t.chmodSync(S,A)}function m(S,A){const v=t.statSync(S);return f(A,v.atime,v.mtime)}function w(S,A,v,k,q){return A?P(v,k,q):C(S.mode,v,k,q)}function C(S,A,v,k){return t.mkdirSync(v),P(A,v,k),y(v,S)}function P(S,A,v){t.readdirSync(S).forEach(k=>I(k,S,A,v))}function I(S,A,v,k){const q=d.join(A,S),x=d.join(v,S),{destStat:$}=u.checkPathsSync(q,x,"copy",k);return c($,q,x,k)}function b(S,A,v,k){let q=t.readlinkSync(A);if(k.dereference&&(q=d.resolve(process.cwd(),q)),S){let x;try{x=t.readlinkSync(v)}catch($){if($.code==="EINVAL"||$.code==="UNKNOWN")return t.symlinkSync(q,v);throw $}if(k.dereference&&(x=d.resolve(process.cwd(),x)),u.isSrcSubdir(q,x))throw new Error(`Cannot copy '${q}' to a subdirectory of itself, '${x}'.`);if(t.statSync(v).isDirectory()&&u.isSrcSubdir(x,q))throw new Error(`Cannot overwrite '${x}' with '${q}'.`);return O(q,v)}else return t.symlinkSync(q,v)}function O(S,A){return t.unlinkSync(A),t.symlinkSync(S,A)}return dn=l,dn}var hn,ja;function na(){if(ja)return hn;ja=1;const t=Xe().fromCallback;return hn={copy:t(yc()),copySync:wc()},hn}var pn,Ga;function _c(){if(Ga)return pn;Ga=1;const t=Ye(),d=Pe,p=Ll,f=process.platform==="win32";function u(g){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(m=>{g[m]=g[m]||t[m],m=m+"Sync",g[m]=g[m]||t[m]}),g.maxBusyTries=g.maxBusyTries||3}function l(g,y,m){let w=0;typeof y=="function"&&(m=y,y={}),p(g,"rimraf: missing path"),p.strictEqual(typeof g,"string","rimraf: path should be a string"),p.strictEqual(typeof m,"function","rimraf: callback function required"),p(y,"rimraf: invalid options argument provided"),p.strictEqual(typeof y,"object","rimraf: options should be object"),u(y),n(g,y,function C(P){if(P){if((P.code==="EBUSY"||P.code==="ENOTEMPTY"||P.code==="EPERM")&&w<y.maxBusyTries){w++;const I=w*100;return setTimeout(()=>n(g,y,C),I)}P.code==="ENOENT"&&(P=null)}m(P)})}function n(g,y,m){p(g),p(y),p(typeof m=="function"),y.lstat(g,(w,C)=>{if(w&&w.code==="ENOENT")return m(null);if(w&&w.code==="EPERM"&&f)return c(g,y,w,m);if(C&&C.isDirectory())return s(g,y,w,m);y.unlink(g,P=>{if(P){if(P.code==="ENOENT")return m(null);if(P.code==="EPERM")return f?c(g,y,P,m):s(g,y,P,m);if(P.code==="EISDIR")return s(g,y,P,m)}return m(P)})})}function c(g,y,m,w){p(g),p(y),p(typeof w=="function"),y.chmod(g,438,C=>{C?w(C.code==="ENOENT"?null:m):y.stat(g,(P,I)=>{P?w(P.code==="ENOENT"?null:m):I.isDirectory()?s(g,y,m,w):y.unlink(g,w)})})}function o(g,y,m){let w;p(g),p(y);try{y.chmodSync(g,438)}catch(C){if(C.code==="ENOENT")return;throw m}try{w=y.statSync(g)}catch(C){if(C.code==="ENOENT")return;throw m}w.isDirectory()?i(g,y,m):y.unlinkSync(g)}function s(g,y,m,w){p(g),p(y),p(typeof w=="function"),y.rmdir(g,C=>{C&&(C.code==="ENOTEMPTY"||C.code==="EEXIST"||C.code==="EPERM")?a(g,y,w):C&&C.code==="ENOTDIR"?w(m):w(C)})}function a(g,y,m){p(g),p(y),p(typeof m=="function"),y.readdir(g,(w,C)=>{if(w)return m(w);let P=C.length,I;if(P===0)return y.rmdir(g,m);C.forEach(b=>{l(d.join(g,b),y,O=>{if(!I){if(O)return m(I=O);--P===0&&y.rmdir(g,m)}})})})}function r(g,y){let m;y=y||{},u(y),p(g,"rimraf: missing path"),p.strictEqual(typeof g,"string","rimraf: path should be a string"),p(y,"rimraf: missing options"),p.strictEqual(typeof y,"object","rimraf: options should be object");try{m=y.lstatSync(g)}catch(w){if(w.code==="ENOENT")return;w.code==="EPERM"&&f&&o(g,y,w)}try{m&&m.isDirectory()?i(g,y,null):y.unlinkSync(g)}catch(w){if(w.code==="ENOENT")return;if(w.code==="EPERM")return f?o(g,y,w):i(g,y,w);if(w.code!=="EISDIR")throw w;i(g,y,w)}}function i(g,y,m){p(g),p(y);try{y.rmdirSync(g)}catch(w){if(w.code==="ENOTDIR")throw m;if(w.code==="ENOTEMPTY"||w.code==="EEXIST"||w.code==="EPERM")h(g,y);else if(w.code!=="ENOENT")throw w}}function h(g,y){if(p(g),p(y),y.readdirSync(g).forEach(m=>r(d.join(g,m),y)),f){const m=Date.now();do try{return y.rmdirSync(g,y)}catch{}while(Date.now()-m<500)}else return y.rmdirSync(g,y)}return pn=l,l.sync=r,pn}var mn,Wa;function Wr(){if(Wa)return mn;Wa=1;const t=Ye(),d=Xe().fromCallback,p=_c();function f(l,n){if(t.rm)return t.rm(l,{recursive:!0,force:!0},n);p(l,n)}function u(l){if(t.rmSync)return t.rmSync(l,{recursive:!0,force:!0});p.sync(l)}return mn={remove:d(f),removeSync:u},mn}var gn,Va;function Rc(){if(Va)return gn;Va=1;const t=Xe().fromPromise,d=Ht(),p=Pe,f=st(),u=Wr(),l=t(async function(o){let s;try{s=await d.readdir(o)}catch{return f.mkdirs(o)}return Promise.all(s.map(a=>u.remove(p.join(o,a))))});function n(c){let o;try{o=d.readdirSync(c)}catch{return f.mkdirsSync(c)}o.forEach(s=>{s=p.join(c,s),u.removeSync(s)})}return gn={emptyDirSync:n,emptydirSync:n,emptyDir:l,emptydir:l},gn}var vn,Ya;function Ac(){if(Ya)return vn;Ya=1;const t=Xe().fromCallback,d=Pe,p=Ye(),f=st();function u(n,c){function o(){p.writeFile(n,"",s=>{if(s)return c(s);c()})}p.stat(n,(s,a)=>{if(!s&&a.isFile())return c();const r=d.dirname(n);p.stat(r,(i,h)=>{if(i)return i.code==="ENOENT"?f.mkdirs(r,g=>{if(g)return c(g);o()}):c(i);h.isDirectory()?o():p.readdir(r,g=>{if(g)return c(g)})})})}function l(n){let c;try{c=p.statSync(n)}catch{}if(c&&c.isFile())return;const o=d.dirname(n);try{p.statSync(o).isDirectory()||p.readdirSync(o)}catch(s){if(s&&s.code==="ENOENT")f.mkdirsSync(o);else throw s}p.writeFileSync(n,"")}return vn={createFile:t(u),createFileSync:l},vn}var En,za;function Cc(){if(za)return En;za=1;const t=Xe().fromCallback,d=Pe,p=Ye(),f=st(),u=Dt().pathExists,{areIdentical:l}=jt();function n(o,s,a){function r(i,h){p.link(i,h,g=>{if(g)return a(g);a(null)})}p.lstat(s,(i,h)=>{p.lstat(o,(g,y)=>{if(g)return g.message=g.message.replace("lstat","ensureLink"),a(g);if(h&&l(y,h))return a(null);const m=d.dirname(s);u(m,(w,C)=>{if(w)return a(w);if(C)return r(o,s);f.mkdirs(m,P=>{if(P)return a(P);r(o,s)})})})})}function c(o,s){let a;try{a=p.lstatSync(s)}catch{}try{const h=p.lstatSync(o);if(a&&l(h,a))return}catch(h){throw h.message=h.message.replace("lstat","ensureLink"),h}const r=d.dirname(s);return p.existsSync(r)||f.mkdirsSync(r),p.linkSync(o,s)}return En={createLink:t(n),createLinkSync:c},En}var yn,Xa;function Sc(){if(Xa)return yn;Xa=1;const t=Pe,d=Ye(),p=Dt().pathExists;function f(l,n,c){if(t.isAbsolute(l))return d.lstat(l,o=>o?(o.message=o.message.replace("lstat","ensureSymlink"),c(o)):c(null,{toCwd:l,toDst:l}));{const o=t.dirname(n),s=t.join(o,l);return p(s,(a,r)=>a?c(a):r?c(null,{toCwd:s,toDst:l}):d.lstat(l,i=>i?(i.message=i.message.replace("lstat","ensureSymlink"),c(i)):c(null,{toCwd:l,toDst:t.relative(o,l)})))}}function u(l,n){let c;if(t.isAbsolute(l)){if(c=d.existsSync(l),!c)throw new Error("absolute srcpath does not exist");return{toCwd:l,toDst:l}}else{const o=t.dirname(n),s=t.join(o,l);if(c=d.existsSync(s),c)return{toCwd:s,toDst:l};if(c=d.existsSync(l),!c)throw new Error("relative srcpath does not exist");return{toCwd:l,toDst:t.relative(o,l)}}}return yn={symlinkPaths:f,symlinkPathsSync:u},yn}var wn,Ka;function Tc(){if(Ka)return wn;Ka=1;const t=Ye();function d(f,u,l){if(l=typeof u=="function"?u:l,u=typeof u=="function"?!1:u,u)return l(null,u);t.lstat(f,(n,c)=>{if(n)return l(null,"file");u=c&&c.isDirectory()?"dir":"file",l(null,u)})}function p(f,u){let l;if(u)return u;try{l=t.lstatSync(f)}catch{return"file"}return l&&l.isDirectory()?"dir":"file"}return wn={symlinkType:d,symlinkTypeSync:p},wn}var _n,Ja;function bc(){if(Ja)return _n;Ja=1;const t=Xe().fromCallback,d=Pe,p=Ht(),f=st(),u=f.mkdirs,l=f.mkdirsSync,n=Sc(),c=n.symlinkPaths,o=n.symlinkPathsSync,s=Tc(),a=s.symlinkType,r=s.symlinkTypeSync,i=Dt().pathExists,{areIdentical:h}=jt();function g(w,C,P,I){I=typeof P=="function"?P:I,P=typeof P=="function"?!1:P,p.lstat(C,(b,O)=>{!b&&O.isSymbolicLink()?Promise.all([p.stat(w),p.stat(C)]).then(([S,A])=>{if(h(S,A))return I(null);y(w,C,P,I)}):y(w,C,P,I)})}function y(w,C,P,I){c(w,C,(b,O)=>{if(b)return I(b);w=O.toDst,a(O.toCwd,P,(S,A)=>{if(S)return I(S);const v=d.dirname(C);i(v,(k,q)=>{if(k)return I(k);if(q)return p.symlink(w,C,A,I);u(v,x=>{if(x)return I(x);p.symlink(w,C,A,I)})})})})}function m(w,C,P){let I;try{I=p.lstatSync(C)}catch{}if(I&&I.isSymbolicLink()){const A=p.statSync(w),v=p.statSync(C);if(h(A,v))return}const b=o(w,C);w=b.toDst,P=r(b.toCwd,P);const O=d.dirname(C);return p.existsSync(O)||l(O),p.symlinkSync(w,C,P)}return _n={createSymlink:t(g),createSymlinkSync:m},_n}var Rn,Qa;function Pc(){if(Qa)return Rn;Qa=1;const{createFile:t,createFileSync:d}=Ac(),{createLink:p,createLinkSync:f}=Cc(),{createSymlink:u,createSymlinkSync:l}=bc();return Rn={createFile:t,createFileSync:d,ensureFile:t,ensureFileSync:d,createLink:p,createLinkSync:f,ensureLink:p,ensureLinkSync:f,createSymlink:u,createSymlinkSync:l,ensureSymlink:u,ensureSymlinkSync:l},Rn}var An,Za;function ia(){if(Za)return An;Za=1;function t(p,{EOL:f=`
`,finalEOL:u=!0,replacer:l=null,spaces:n}={}){const c=u?f:"";return JSON.stringify(p,l,n).replace(/\n/g,f)+c}function d(p){return Buffer.isBuffer(p)&&(p=p.toString("utf8")),p.replace(/^\uFEFF/,"")}return An={stringify:t,stripBom:d},An}var Cn,eo;function Oc(){if(eo)return Cn;eo=1;let t;try{t=Ye()}catch{t=nt}const d=Xe(),{stringify:p,stripBom:f}=ia();async function u(a,r={}){typeof r=="string"&&(r={encoding:r});const i=r.fs||t,h="throws"in r?r.throws:!0;let g=await d.fromCallback(i.readFile)(a,r);g=f(g);let y;try{y=JSON.parse(g,r?r.reviver:null)}catch(m){if(h)throw m.message=`${a}: ${m.message}`,m;return null}return y}const l=d.fromPromise(u);function n(a,r={}){typeof r=="string"&&(r={encoding:r});const i=r.fs||t,h="throws"in r?r.throws:!0;try{let g=i.readFileSync(a,r);return g=f(g),JSON.parse(g,r.reviver)}catch(g){if(h)throw g.message=`${a}: ${g.message}`,g;return null}}async function c(a,r,i={}){const h=i.fs||t,g=p(r,i);await d.fromCallback(h.writeFile)(a,g,i)}const o=d.fromPromise(c);function s(a,r,i={}){const h=i.fs||t,g=p(r,i);return h.writeFileSync(a,g,i)}return Cn={readFile:l,readFileSync:n,writeFile:o,writeFileSync:s},Cn}var Sn,to;function Ic(){if(to)return Sn;to=1;const t=Oc();return Sn={readJson:t.readFile,readJsonSync:t.readFileSync,writeJson:t.writeFile,writeJsonSync:t.writeFileSync},Sn}var Tn,ro;function aa(){if(ro)return Tn;ro=1;const t=Xe().fromCallback,d=Ye(),p=Pe,f=st(),u=Dt().pathExists;function l(c,o,s,a){typeof s=="function"&&(a=s,s="utf8");const r=p.dirname(c);u(r,(i,h)=>{if(i)return a(i);if(h)return d.writeFile(c,o,s,a);f.mkdirs(r,g=>{if(g)return a(g);d.writeFile(c,o,s,a)})})}function n(c,...o){const s=p.dirname(c);if(d.existsSync(s))return d.writeFileSync(c,...o);f.mkdirsSync(s),d.writeFileSync(c,...o)}return Tn={outputFile:t(l),outputFileSync:n},Tn}var bn,no;function Dc(){if(no)return bn;no=1;const{stringify:t}=ia(),{outputFile:d}=aa();async function p(f,u,l={}){const n=t(u,l);await d(f,n,l)}return bn=p,bn}var Pn,io;function Nc(){if(io)return Pn;io=1;const{stringify:t}=ia(),{outputFileSync:d}=aa();function p(f,u,l){const n=t(u,l);d(f,n,l)}return Pn=p,Pn}var On,ao;function Fc(){if(ao)return On;ao=1;const t=Xe().fromPromise,d=Ic();return d.outputJson=t(Dc()),d.outputJsonSync=Nc(),d.outputJSON=d.outputJson,d.outputJSONSync=d.outputJsonSync,d.writeJSON=d.writeJson,d.writeJSONSync=d.writeJsonSync,d.readJSON=d.readJson,d.readJSONSync=d.readJsonSync,On=d,On}var In,oo;function Lc(){if(oo)return In;oo=1;const t=Ye(),d=Pe,p=na().copy,f=Wr().remove,u=st().mkdirp,l=Dt().pathExists,n=jt();function c(i,h,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};const m=g.overwrite||g.clobber||!1;n.checkPaths(i,h,"move",g,(w,C)=>{if(w)return y(w);const{srcStat:P,isChangingCase:I=!1}=C;n.checkParentPaths(i,P,h,"move",b=>{if(b)return y(b);if(o(h))return s(i,h,m,I,y);u(d.dirname(h),O=>O?y(O):s(i,h,m,I,y))})})}function o(i){const h=d.dirname(i);return d.parse(h).root===h}function s(i,h,g,y,m){if(y)return a(i,h,g,m);if(g)return f(h,w=>w?m(w):a(i,h,g,m));l(h,(w,C)=>w?m(w):C?m(new Error("dest already exists.")):a(i,h,g,m))}function a(i,h,g,y){t.rename(i,h,m=>m?m.code!=="EXDEV"?y(m):r(i,h,g,y):y())}function r(i,h,g,y){p(i,h,{overwrite:g,errorOnExist:!0},w=>w?y(w):f(i,y))}return In=c,In}var Dn,so;function xc(){if(so)return Dn;so=1;const t=Ye(),d=Pe,p=na().copySync,f=Wr().removeSync,u=st().mkdirpSync,l=jt();function n(r,i,h){h=h||{};const g=h.overwrite||h.clobber||!1,{srcStat:y,isChangingCase:m=!1}=l.checkPathsSync(r,i,"move",h);return l.checkParentPathsSync(r,y,i,"move"),c(i)||u(d.dirname(i)),o(r,i,g,m)}function c(r){const i=d.dirname(r);return d.parse(i).root===i}function o(r,i,h,g){if(g)return s(r,i,h);if(h)return f(i),s(r,i,h);if(t.existsSync(i))throw new Error("dest already exists.");return s(r,i,h)}function s(r,i,h){try{t.renameSync(r,i)}catch(g){if(g.code!=="EXDEV")throw g;return a(r,i,h)}}function a(r,i,h){return p(r,i,{overwrite:h,errorOnExist:!0}),f(r)}return Dn=n,Dn}var Nn,lo;function Uc(){if(lo)return Nn;lo=1;const t=Xe().fromCallback;return Nn={move:t(Lc()),moveSync:xc()},Nn}var Fn,uo;function wt(){return uo||(uo=1,Fn={...Ht(),...na(),...Rc(),...Pc(),...Fc(),...st(),...Uc(),...aa(),...Dt(),...Wr()}),Fn}var Yt={},bt={},Ln={},Pt={},co;function oa(){if(co)return Pt;co=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.CancellationError=Pt.CancellationToken=void 0;const t=ra;let d=class extends t.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(u){this.removeParentCancelHandler(),this._parent=u,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(u){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,u!=null&&(this.parent=u)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(u){this.cancelled?u():this.once("cancel",u)}createPromise(u){if(this.cancelled)return Promise.reject(new p);const l=()=>{if(n!=null)try{this.removeListener("cancel",n),n=null}catch{}};let n=null;return new Promise((c,o)=>{let s=null;if(n=()=>{try{s!=null&&(s(),s=null)}finally{o(new p)}},this.cancelled){n();return}this.onCancel(n),u(c,o,a=>{s=a})}).then(c=>(l(),c)).catch(c=>{throw l(),c})}removeParentCancelHandler(){const u=this._parent;u!=null&&this.parentCancelHandler!=null&&(u.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};Pt.CancellationToken=d;class p extends Error{constructor(){super("cancelled")}}return Pt.CancellationError=p,Pt}var Nr={},fo;function Vr(){if(fo)return Nr;fo=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.newError=t;function t(d,p){const f=new Error(d);return f.code=p,f}return Nr}var Me={},Fr={exports:{}},Lr={exports:{}},xn,ho;function kc(){if(ho)return xn;ho=1;var t=1e3,d=t*60,p=d*60,f=p*24,u=f*7,l=f*365.25;xn=function(a,r){r=r||{};var i=typeof a;if(i==="string"&&a.length>0)return n(a);if(i==="number"&&isFinite(a))return r.long?o(a):c(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function n(a){if(a=String(a),!(a.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(r){var i=parseFloat(r[1]),h=(r[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return i*l;case"weeks":case"week":case"w":return i*u;case"days":case"day":case"d":return i*f;case"hours":case"hour":case"hrs":case"hr":case"h":return i*p;case"minutes":case"minute":case"mins":case"min":case"m":return i*d;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function c(a){var r=Math.abs(a);return r>=f?Math.round(a/f)+"d":r>=p?Math.round(a/p)+"h":r>=d?Math.round(a/d)+"m":r>=t?Math.round(a/t)+"s":a+"ms"}function o(a){var r=Math.abs(a);return r>=f?s(a,r,f,"day"):r>=p?s(a,r,p,"hour"):r>=d?s(a,r,d,"minute"):r>=t?s(a,r,t,"second"):a+" ms"}function s(a,r,i,h){var g=r>=i*1.5;return Math.round(a/i)+" "+h+(g?"s":"")}return xn}var Un,po;function ql(){if(po)return Un;po=1;function t(d){f.debug=f,f.default=f,f.coerce=s,f.disable=c,f.enable=l,f.enabled=o,f.humanize=kc(),f.destroy=a,Object.keys(d).forEach(r=>{f[r]=d[r]}),f.names=[],f.skips=[],f.formatters={};function p(r){let i=0;for(let h=0;h<r.length;h++)i=(i<<5)-i+r.charCodeAt(h),i|=0;return f.colors[Math.abs(i)%f.colors.length]}f.selectColor=p;function f(r){let i,h=null,g,y;function m(...w){if(!m.enabled)return;const C=m,P=Number(new Date),I=P-(i||P);C.diff=I,C.prev=i,C.curr=P,i=P,w[0]=f.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let b=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(S,A)=>{if(S==="%%")return"%";b++;const v=f.formatters[A];if(typeof v=="function"){const k=w[b];S=v.call(C,k),w.splice(b,1),b--}return S}),f.formatArgs.call(C,w),(C.log||f.log).apply(C,w)}return m.namespace=r,m.useColors=f.useColors(),m.color=f.selectColor(r),m.extend=u,m.destroy=f.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==f.namespaces&&(g=f.namespaces,y=f.enabled(r)),y),set:w=>{h=w}}),typeof f.init=="function"&&f.init(m),m}function u(r,i){const h=f(this.namespace+(typeof i>"u"?":":i)+r);return h.log=this.log,h}function l(r){f.save(r),f.namespaces=r,f.names=[],f.skips=[];const i=(typeof r=="string"?r:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const h of i)h[0]==="-"?f.skips.push(h.slice(1)):f.names.push(h)}function n(r,i){let h=0,g=0,y=-1,m=0;for(;h<r.length;)if(g<i.length&&(i[g]===r[h]||i[g]==="*"))i[g]==="*"?(y=g,m=h,g++):(h++,g++);else if(y!==-1)g=y+1,m++,h=m;else return!1;for(;g<i.length&&i[g]==="*";)g++;return g===i.length}function c(){const r=[...f.names,...f.skips.map(i=>"-"+i)].join(",");return f.enable(""),r}function o(r){for(const i of f.skips)if(n(r,i))return!1;for(const i of f.names)if(n(r,i))return!0;return!1}function s(r){return r instanceof Error?r.stack||r.message:r}function a(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return f.enable(f.load()),f}return Un=t,Un}var mo;function qc(){return mo||(mo=1,(function(t,d){d.formatArgs=f,d.save=u,d.load=l,d.useColors=p,d.storage=n(),d.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function p(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let o;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(o=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(o[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function f(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;o.splice(1,0,s,"color: inherit");let a=0,r=0;o[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(a++,i==="%c"&&(r=a))}),o.splice(r,0,s)}d.log=console.debug||console.log||(()=>{});function u(o){try{o?d.storage.setItem("debug",o):d.storage.removeItem("debug")}catch{}}function l(){let o;try{o=d.storage.getItem("debug")||d.storage.getItem("DEBUG")}catch{}return!o&&typeof process<"u"&&"env"in process&&(o=process.env.DEBUG),o}function n(){try{return localStorage}catch{}}t.exports=ql()(d);const{formatters:c}=t.exports;c.j=function(o){try{return JSON.stringify(o)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Lr,Lr.exports)),Lr.exports}var xr={exports:{}},kn,go;function $c(){return go||(go=1,kn=(t,d=process.argv)=>{const p=t.startsWith("-")?"":t.length===1?"-":"--",f=d.indexOf(p+t),u=d.indexOf("--");return f!==-1&&(u===-1||f<u)}),kn}var qn,vo;function Mc(){if(vo)return qn;vo=1;const t=Gr,d=xl,p=$c(),{env:f}=process;let u;p("no-color")||p("no-colors")||p("color=false")||p("color=never")?u=0:(p("color")||p("colors")||p("color=true")||p("color=always"))&&(u=1),"FORCE_COLOR"in f&&(f.FORCE_COLOR==="true"?u=1:f.FORCE_COLOR==="false"?u=0:u=f.FORCE_COLOR.length===0?1:Math.min(parseInt(f.FORCE_COLOR,10),3));function l(o){return o===0?!1:{level:o,hasBasic:!0,has256:o>=2,has16m:o>=3}}function n(o,s){if(u===0)return 0;if(p("color=16m")||p("color=full")||p("color=truecolor"))return 3;if(p("color=256"))return 2;if(o&&!s&&u===void 0)return 0;const a=u||0;if(f.TERM==="dumb")return a;if(process.platform==="win32"){const r=t.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in f)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in f)||f.CI_NAME==="codeship"?1:a;if("TEAMCITY_VERSION"in f)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(f.TEAMCITY_VERSION)?1:0;if(f.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in f){const r=parseInt((f.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(f.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(f.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(f.TERM)||"COLORTERM"in f?1:a}function c(o){const s=n(o,o&&o.isTTY);return l(s)}return qn={supportsColor:c,stdout:l(n(!0,d.isatty(1))),stderr:l(n(!0,d.isatty(2)))},qn}var Eo;function Bc(){return Eo||(Eo=1,(function(t,d){const p=xl,f=ta;d.init=a,d.log=c,d.formatArgs=l,d.save=o,d.load=s,d.useColors=u,d.destroy=f.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),d.colors=[6,2,3,4,5,1];try{const i=Mc();i&&(i.stderr||i).level>=2&&(d.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}d.inspectOpts=Object.keys(process.env).filter(i=>/^debug_/i.test(i)).reduce((i,h)=>{const g=h.substring(6).toLowerCase().replace(/_([a-z])/g,(m,w)=>w.toUpperCase());let y=process.env[h];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),i[g]=y,i},{});function u(){return"colors"in d.inspectOpts?!!d.inspectOpts.colors:p.isatty(process.stderr.fd)}function l(i){const{namespace:h,useColors:g}=this;if(g){const y=this.color,m="\x1B[3"+(y<8?y:"8;5;"+y),w=`  ${m};1m${h} \x1B[0m`;i[0]=w+i[0].split(`
`).join(`
`+w),i.push(m+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else i[0]=n()+h+" "+i[0]}function n(){return d.inspectOpts.hideDate?"":new Date().toISOString()+" "}function c(...i){return process.stderr.write(f.formatWithOptions(d.inspectOpts,...i)+`
`)}function o(i){i?process.env.DEBUG=i:delete process.env.DEBUG}function s(){return process.env.DEBUG}function a(i){i.inspectOpts={};const h=Object.keys(d.inspectOpts);for(let g=0;g<h.length;g++)i.inspectOpts[h[g]]=d.inspectOpts[h[g]]}t.exports=ql()(d);const{formatters:r}=t.exports;r.o=function(i){return this.inspectOpts.colors=this.useColors,f.inspect(i,this.inspectOpts).split(`
`).map(h=>h.trim()).join(" ")},r.O=function(i){return this.inspectOpts.colors=this.useColors,f.inspect(i,this.inspectOpts)}})(xr,xr.exports)),xr.exports}var yo;function Hc(){return yo||(yo=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Fr.exports=qc():Fr.exports=Bc()),Fr.exports}var zt={},wo;function $l(){if(wo)return zt;wo=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.ProgressCallbackTransform=void 0;const t=Er;let d=class extends t.Transform{constructor(f,u,l){super(),this.total=f,this.cancellationToken=u,this.onProgress=l,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(f,u,l){if(this.cancellationToken.cancelled){l(new Error("cancelled"),null);return}this.transferred+=f.length,this.delta+=f.length;const n=Date.now();n>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=n+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((n-this.start)/1e3))}),this.delta=0),l(null,f)}_flush(f){if(this.cancellationToken.cancelled){f(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,f(null)}};return zt.ProgressCallbackTransform=d,zt}var _o;function jc(){if(_o)return Me;_o=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.DigestTransform=Me.HttpExecutor=Me.HttpError=void 0,Me.createHttpError=s,Me.parseJson=i,Me.configureRequestOptionsFromUrl=y,Me.configureRequestUrl=m,Me.safeGetHeader=P,Me.configureRequestOptions=b,Me.safeStringifyJson=O;const t=yr,d=Hc(),p=nt,f=Er,u=yt,l=oa(),n=Vr(),c=$l(),o=(0,d.default)("electron-builder");function s(S,A=null){return new r(S.statusCode||-1,`${S.statusCode} ${S.statusMessage}`+(A==null?"":`
`+JSON.stringify(A,null,"  "))+`
Headers: `+O(S.headers),A)}const a=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class r extends Error{constructor(A,v=`HTTP error: ${a.get(A)||A}`,k=null){super(v),this.statusCode=A,this.description=k,this.name="HttpError",this.code=`HTTP_ERROR_${A}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Me.HttpError=r;function i(S){return S.then(A=>A==null||A.length===0?null:JSON.parse(A))}class h{constructor(){this.maxRedirects=10}request(A,v=new l.CancellationToken,k){b(A);const q=k==null?void 0:JSON.stringify(k),x=q?Buffer.from(q):void 0;if(x!=null){o(q);const{headers:$,...L}=A;A={method:"post",headers:{"Content-Type":"application/json","Content-Length":x.length,...$},...L}}return this.doApiRequest(A,v,$=>$.end(x))}doApiRequest(A,v,k,q=0){return o.enabled&&o(`Request: ${O(A)}`),v.createPromise((x,$,L)=>{const N=this.createRequest(A,j=>{try{this.handleResponse(j,A,v,x,$,q,k)}catch(D){$(D)}});this.addErrorAndTimeoutHandlers(N,$,A.timeout),this.addRedirectHandlers(N,A,$,q,j=>{this.doApiRequest(j,v,k,q).then(x).catch($)}),k(N,$),L(()=>N.abort())})}addRedirectHandlers(A,v,k,q,x){}addErrorAndTimeoutHandlers(A,v,k=60*1e3){this.addTimeOutHandler(A,v,k),A.on("error",v),A.on("aborted",()=>{v(new Error("Request has been aborted by the server"))})}handleResponse(A,v,k,q,x,$,L){var N;if(o.enabled&&o(`Response: ${A.statusCode} ${A.statusMessage}, request options: ${O(v)}`),A.statusCode===404){x(s(A,`method: ${v.method||"GET"} url: ${v.protocol||"https:"}//${v.hostname}${v.port?`:${v.port}`:""}${v.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(A.statusCode===204){q();return}const j=(N=A.statusCode)!==null&&N!==void 0?N:0,D=j>=300&&j<400,G=P(A,"location");if(D&&G!=null){if($>this.maxRedirects){x(this.createMaxRedirectError());return}this.doApiRequest(h.prepareRedirectUrlOptions(G,v),k,L,$).then(q).catch(x);return}A.setEncoding("utf8");let V="";A.on("error",x),A.on("data",te=>V+=te),A.on("end",()=>{try{if(A.statusCode!=null&&A.statusCode>=400){const te=P(A,"content-type"),de=te!=null&&(Array.isArray(te)?te.find(ie=>ie.includes("json"))!=null:te.includes("json"));x(s(A,`method: ${v.method||"GET"} url: ${v.protocol||"https:"}//${v.hostname}${v.port?`:${v.port}`:""}${v.path}

          Data:
          ${de?JSON.stringify(JSON.parse(V)):V}
          `))}else q(V.length===0?null:V)}catch(te){x(te)}})}async downloadToBuffer(A,v){return await v.cancellationToken.createPromise((k,q,x)=>{const $=[],L={headers:v.headers||void 0,redirect:"manual"};m(A,L),b(L),this.doDownload(L,{destination:null,options:v,onCancel:x,callback:N=>{N==null?k(Buffer.concat($)):q(N)},responseHandler:(N,j)=>{let D=0;N.on("data",G=>{if(D+=G.length,D>524288e3){j(new Error("Maximum allowed size is 500 MB"));return}$.push(G)}),N.on("end",()=>{j(null)})}},0)})}doDownload(A,v,k){const q=this.createRequest(A,x=>{if(x.statusCode>=400){v.callback(new Error(`Cannot download "${A.protocol||"https:"}//${A.hostname}${A.path}", status ${x.statusCode}: ${x.statusMessage}`));return}x.on("error",v.callback);const $=P(x,"location");if($!=null){k<this.maxRedirects?this.doDownload(h.prepareRedirectUrlOptions($,A),v,k++):v.callback(this.createMaxRedirectError());return}v.responseHandler==null?I(v,x):v.responseHandler(x,v.callback)});this.addErrorAndTimeoutHandlers(q,v.callback,A.timeout),this.addRedirectHandlers(q,A,v.callback,k,x=>{this.doDownload(x,v,k++)}),q.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(A,v,k){A.on("socket",q=>{q.setTimeout(k,()=>{A.abort(),v(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(A,v){const k=y(A,{...v}),q=k.headers;if(q?.authorization){const x=h.reconstructOriginalUrl(v),$=g(A,v);h.isCrossOriginRedirect(x,$)&&(o.enabled&&o(`Given the cross-origin redirect (from ${x.host} to ${$.host}), the Authorization header will be stripped out.`),delete q.authorization)}return k}static reconstructOriginalUrl(A){const v=A.protocol||"https:";if(!A.hostname)throw new Error("Missing hostname in request options");const k=A.hostname,q=A.port?`:${A.port}`:"",x=A.path||"/";return new u.URL(`${v}//${k}${q}${x}`)}static isCrossOriginRedirect(A,v){if(A.hostname.toLowerCase()!==v.hostname.toLowerCase())return!0;if(A.protocol==="http:"&&["80",""].includes(A.port)&&v.protocol==="https:"&&["443",""].includes(v.port))return!1;if(A.protocol!==v.protocol)return!0;const k=A.port,q=v.port;return k!==q}static retryOnServerError(A,v=3){for(let k=0;;k++)try{return A()}catch(q){if(k<v&&(q instanceof r&&q.isServerError()||q.code==="EPIPE"))continue;throw q}}}Me.HttpExecutor=h;function g(S,A){try{return new u.URL(S)}catch{const v=A.hostname,k=A.protocol||"https:",q=A.port?`:${A.port}`:"",x=`${k}//${v}${q}`;return new u.URL(S,x)}}function y(S,A){const v=b(A),k=g(S,A);return m(k,v),v}function m(S,A){A.protocol=S.protocol,A.hostname=S.hostname,S.port?A.port=S.port:A.port&&delete A.port,A.path=S.pathname+S.search}class w extends f.Transform{get actual(){return this._actual}constructor(A,v="sha512",k="base64"){super(),this.expected=A,this.algorithm=v,this.encoding=k,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,t.createHash)(v)}_transform(A,v,k){this.digester.update(A),k(null,A)}_flush(A){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(v){A(v);return}A(null)}validate(){if(this._actual==null)throw(0,n.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,n.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Me.DigestTransform=w;function C(S,A,v){return S!=null&&A!=null&&S!==A?(v(new Error(`checksum mismatch: expected ${A} but got ${S} (X-Checksum-Sha2 header)`)),!1):!0}function P(S,A){const v=S.headers[A];return v==null?null:Array.isArray(v)?v.length===0?null:v[v.length-1]:v}function I(S,A){if(!C(P(A,"X-Checksum-Sha2"),S.options.sha2,S.callback))return;const v=[];if(S.options.onProgress!=null){const $=P(A,"content-length");$!=null&&v.push(new c.ProgressCallbackTransform(parseInt($,10),S.options.cancellationToken,S.options.onProgress))}const k=S.options.sha512;k!=null?v.push(new w(k,"sha512",k.length===128&&!k.includes("+")&&!k.includes("Z")&&!k.includes("=")?"hex":"base64")):S.options.sha2!=null&&v.push(new w(S.options.sha2,"sha256","hex"));const q=(0,p.createWriteStream)(S.destination);v.push(q);let x=A;for(const $ of v)$.on("error",L=>{q.close(),S.options.cancellationToken.cancelled||S.callback(L)}),x=x.pipe($);q.on("finish",()=>{q.close(S.callback)})}function b(S,A,v){v!=null&&(S.method=v),S.headers={...S.headers};const k=S.headers;return A!=null&&(k.authorization=A.startsWith("Basic")||A.startsWith("Bearer")?A:`token ${A}`),k["User-Agent"]==null&&(k["User-Agent"]="electron-builder"),(v==null||v==="GET"||k["Cache-Control"]==null)&&(k["Cache-Control"]="no-cache"),S.protocol==null&&process.versions.electron!=null&&(S.protocol="https:"),S}function O(S,A){return JSON.stringify(S,(v,k)=>v.endsWith("Authorization")||v.endsWith("authorization")||v.endsWith("Password")||v.endsWith("PASSWORD")||v.endsWith("Token")||v.includes("password")||v.includes("token")||A!=null&&A.has(v)?"<stripped sensitive data>":k,2)}return Me}var Xt={},Ro;function Gc(){if(Ro)return Xt;Ro=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.MemoLazy=void 0;let t=class{constructor(f,u){this.selector=f,this.creator=u,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const f=this.selector();if(this._value!==void 0&&d(this.selected,f))return this._value;this.selected=f;const u=this.creator(f);return this.value=u,u}set value(f){this._value=f}};Xt.MemoLazy=t;function d(p,f){if(typeof p=="object"&&p!==null&&(typeof f=="object"&&f!==null)){const n=Object.keys(p),c=Object.keys(f);return n.length===c.length&&n.every(o=>d(p[o],f[o]))}return p===f}return Xt}var Ut={},Ao;function Wc(){if(Ao)return Ut;Ao=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.githubUrl=t,Ut.githubTagPrefix=d,Ut.getS3LikeProviderBaseUrl=p;function t(n,c="github.com"){return`${n.protocol||"https"}://${n.host||c}`}function d(n){var c;return n.tagNamePrefix?n.tagNamePrefix:!((c=n.vPrefixedTagName)!==null&&c!==void 0)||c?"v":""}function p(n){const c=n.provider;if(c==="s3")return f(n);if(c==="spaces")return l(n);throw new Error(`Not supported provider: ${c}`)}function f(n){let c;if(n.accelerate==!0)c=`https://${n.bucket}.s3-accelerate.amazonaws.com`;else if(n.endpoint!=null)c=`${n.endpoint}/${n.bucket}`;else if(n.bucket.includes(".")){if(n.region==null)throw new Error(`Bucket name "${n.bucket}" includes a dot, but S3 region is missing`);n.region==="us-east-1"?c=`https://s3.amazonaws.com/${n.bucket}`:c=`https://s3-${n.region}.amazonaws.com/${n.bucket}`}else n.region==="cn-north-1"?c=`https://${n.bucket}.s3.${n.region}.amazonaws.com.cn`:c=`https://${n.bucket}.s3.amazonaws.com`;return u(c,n.path)}function u(n,c){return c!=null&&c.length>0&&(c.startsWith("/")||(n+="/"),n+=c),n}function l(n){if(n.name==null)throw new Error("name is missing");if(n.region==null)throw new Error("region is missing");return u(`https://${n.name}.${n.region}.digitaloceanspaces.com`,n.path)}return Ut}var Ur={},Co;function Vc(){if(Co)return Ur;Co=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.retry=d;const t=oa();async function d(p,f){var u;const{retries:l,interval:n,backoff:c=0,attempt:o=0,shouldRetry:s,cancellationToken:a=new t.CancellationToken}=f;try{return await p()}catch(r){if(await Promise.resolve((u=s?.(r))!==null&&u!==void 0?u:!0)&&l>0&&!a.cancelled)return await new Promise(i=>setTimeout(i,n+c*o)),await d(p,{...f,retries:l-1,attempt:o+1});throw r}}return Ur}var kr={},So;function Yc(){if(So)return kr;So=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.parseDn=t;function t(d){let p=!1,f=null,u="",l=0;d=d.trim();const n=new Map;for(let c=0;c<=d.length;c++){if(c===d.length){f!==null&&n.set(f,u);break}const o=d[c];if(p){if(o==='"'){p=!1;continue}}else{if(o==='"'){p=!0;continue}if(o==="\\"){c++;const s=parseInt(d.slice(c,c+2),16);Number.isNaN(s)?u+=d[c]:(c++,u+=String.fromCharCode(s));continue}if(f===null&&o==="="){f=u,u="";continue}if(o===","||o===";"||o==="+"){f!==null&&n.set(f,u),f=null,u="";continue}}if(o===" "&&!p){if(u.length===0)continue;if(c>l){let s=c;for(;d[s]===" ";)s++;l=s}if(l>=d.length||d[l]===","||d[l]===";"||f===null&&d[l]==="="||f!==null&&d[l]==="+"){c=l-1;continue}}u+=o}return n}return kr}var Ot={},To;function zc(){if(To)return Ot;To=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.nil=Ot.UUID=void 0;const t=yr,d=Vr(),p="options.name must be either a string or a Buffer",f=(0,t.randomBytes)(16);f[0]=f[0]|1;const u={},l=[];for(let r=0;r<256;r++){const i=(r+256).toString(16).substr(1);u[i]=r,l[r]=i}class n{constructor(i){this.ascii=null,this.binary=null;const h=n.check(i);if(!h)throw new Error("not a UUID");this.version=h.version,h.format==="ascii"?this.ascii=i:this.binary=i}static v5(i,h){return s(i,"sha1",80,h)}toString(){return this.ascii==null&&(this.ascii=a(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(i,h=0){if(typeof i=="string")return i=i.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(i)?i==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(u[i[14]+i[15]]&240)>>4,variant:c((u[i[19]+i[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(i)){if(i.length<h+16)return!1;let g=0;for(;g<16&&i[h+g]===0;g++);return g===16?{version:void 0,variant:"nil",format:"binary"}:{version:(i[h+6]&240)>>4,variant:c((i[h+8]&224)>>5),format:"binary"}}throw(0,d.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(i){const h=Buffer.allocUnsafe(16);let g=0;for(let y=0;y<16;y++)h[y]=u[i[g++]+i[g++]],(y===3||y===5||y===7||y===9)&&(g+=1);return h}}Ot.UUID=n,n.OID=n.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function c(r){switch(r){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var o;(function(r){r[r.ASCII=0]="ASCII",r[r.BINARY=1]="BINARY",r[r.OBJECT=2]="OBJECT"})(o||(o={}));function s(r,i,h,g,y=o.ASCII){const m=(0,t.createHash)(i);if(typeof r!="string"&&!Buffer.isBuffer(r))throw(0,d.newError)(p,"ERR_INVALID_UUID_NAME");m.update(g),m.update(r);const C=m.digest();let P;switch(y){case o.BINARY:C[6]=C[6]&15|h,C[8]=C[8]&63|128,P=C;break;case o.OBJECT:C[6]=C[6]&15|h,C[8]=C[8]&63|128,P=new n(C);break;default:P=l[C[0]]+l[C[1]]+l[C[2]]+l[C[3]]+"-"+l[C[4]]+l[C[5]]+"-"+l[C[6]&15|h]+l[C[7]]+"-"+l[C[8]&63|128]+l[C[9]]+"-"+l[C[10]]+l[C[11]]+l[C[12]]+l[C[13]]+l[C[14]]+l[C[15]];break}return P}function a(r){return l[r[0]]+l[r[1]]+l[r[2]]+l[r[3]]+"-"+l[r[4]]+l[r[5]]+"-"+l[r[6]]+l[r[7]]+"-"+l[r[8]]+l[r[9]]+"-"+l[r[10]]+l[r[11]]+l[r[12]]+l[r[13]]+l[r[14]]+l[r[15]]}return Ot.nil=new n("00000000-0000-0000-0000-000000000000"),Ot}var kt={},$n={},bo;function Xc(){return bo||(bo=1,(function(t){(function(d){d.parser=function(_,E){return new f(_,E)},d.SAXParser=f,d.SAXStream=a,d.createStream=s,d.MAX_BUFFER_LENGTH=64*1024;var p=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];d.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function f(_,E){if(!(this instanceof f))return new f(_,E);var H=this;l(H),H.q=H.c="",H.bufferCheckPosition=d.MAX_BUFFER_LENGTH,H.opt=E||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!_,H.noscript=!!(_||H.opt.noscript),H.state=v.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(d.XML_ENTITIES):Object.create(d.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(y)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!_),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),q(H,"onready")}Object.create||(Object.create=function(_){function E(){}E.prototype=_;var H=new E;return H}),Object.keys||(Object.keys=function(_){var E=[];for(var H in _)_.hasOwnProperty(H)&&E.push(H);return E});function u(_){for(var E=Math.max(d.MAX_BUFFER_LENGTH,10),H=0,F=0,ce=p.length;F<ce;F++){var he=_[p[F]].length;if(he>E)switch(p[F]){case"textNode":$(_);break;case"cdata":x(_,"oncdata",_.cdata),_.cdata="";break;case"script":x(_,"onscript",_.script),_.script="";break;default:N(_,"Max buffer length exceeded: "+p[F])}H=Math.max(H,he)}var pe=d.MAX_BUFFER_LENGTH-H;_.bufferCheckPosition=pe+_.position}function l(_){for(var E=0,H=p.length;E<H;E++)_[p[E]]=""}function n(_){$(_),_.cdata!==""&&(x(_,"oncdata",_.cdata),_.cdata=""),_.script!==""&&(x(_,"onscript",_.script),_.script="")}f.prototype={end:function(){j(this)},write:ge,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){n(this)}};var c;try{c=require("stream").Stream}catch{c=function(){}}c||(c=function(){});var o=d.EVENTS.filter(function(_){return _!=="error"&&_!=="end"});function s(_,E){return new a(_,E)}function a(_,E){if(!(this instanceof a))return new a(_,E);c.apply(this),this._parser=new f(_,E),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(F){H.emit("error",F),H._parser.error=null},this._decoder=null,o.forEach(function(F){Object.defineProperty(H,"on"+F,{get:function(){return H._parser["on"+F]},set:function(ce){if(!ce)return H.removeAllListeners(F),H._parser["on"+F]=ce,ce;H.on(F,ce)},enumerable:!0,configurable:!1})})}a.prototype=Object.create(c.prototype,{constructor:{value:a}}),a.prototype.write=function(_){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(_)){if(!this._decoder){var E=dc.StringDecoder;this._decoder=new E("utf8")}_=this._decoder.write(_)}return this._parser.write(_.toString()),this.emit("data",_),!0},a.prototype.end=function(_){return _&&_.length&&this.write(_),this._parser.end(),!0},a.prototype.on=function(_,E){var H=this;return!H._parser["on"+_]&&o.indexOf(_)!==-1&&(H._parser["on"+_]=function(){var F=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);F.splice(0,0,_),H.emit.apply(H,F)}),c.prototype.on.call(H,_,E)};var r="[CDATA[",i="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",y={xml:h,xmlns:g},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(_){return _===" "||_===`
`||_==="\r"||_==="	"}function b(_){return _==='"'||_==="'"}function O(_){return _===">"||I(_)}function S(_,E){return _.test(E)}function A(_,E){return!S(_,E)}var v=0;d.STATE={BEGIN:v++,BEGIN_WHITESPACE:v++,TEXT:v++,TEXT_ENTITY:v++,OPEN_WAKA:v++,SGML_DECL:v++,SGML_DECL_QUOTED:v++,DOCTYPE:v++,DOCTYPE_QUOTED:v++,DOCTYPE_DTD:v++,DOCTYPE_DTD_QUOTED:v++,COMMENT_STARTING:v++,COMMENT:v++,COMMENT_ENDING:v++,COMMENT_ENDED:v++,CDATA:v++,CDATA_ENDING:v++,CDATA_ENDING_2:v++,PROC_INST:v++,PROC_INST_BODY:v++,PROC_INST_ENDING:v++,OPEN_TAG:v++,OPEN_TAG_SLASH:v++,ATTRIB:v++,ATTRIB_NAME:v++,ATTRIB_NAME_SAW_WHITE:v++,ATTRIB_VALUE:v++,ATTRIB_VALUE_QUOTED:v++,ATTRIB_VALUE_CLOSED:v++,ATTRIB_VALUE_UNQUOTED:v++,ATTRIB_VALUE_ENTITY_Q:v++,ATTRIB_VALUE_ENTITY_U:v++,CLOSE_TAG:v++,CLOSE_TAG_SAW_WHITE:v++,SCRIPT:v++,SCRIPT_ENDING:v++},d.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},d.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(d.ENTITIES).forEach(function(_){var E=d.ENTITIES[_],H=typeof E=="number"?String.fromCharCode(E):E;d.ENTITIES[_]=H});for(var k in d.STATE)d.STATE[d.STATE[k]]=k;v=d.STATE;function q(_,E,H){_[E]&&_[E](H)}function x(_,E,H){_.textNode&&$(_),q(_,E,H)}function $(_){_.textNode=L(_.opt,_.textNode),_.textNode&&q(_,"ontext",_.textNode),_.textNode=""}function L(_,E){return _.trim&&(E=E.trim()),_.normalize&&(E=E.replace(/\s+/g," ")),E}function N(_,E){return $(_),_.trackPosition&&(E+=`
Line: `+_.line+`
Column: `+_.column+`
Char: `+_.c),E=new Error(E),_.error=E,q(_,"onerror",E),_}function j(_){return _.sawRoot&&!_.closedRoot&&D(_,"Unclosed root tag"),_.state!==v.BEGIN&&_.state!==v.BEGIN_WHITESPACE&&_.state!==v.TEXT&&N(_,"Unexpected end"),$(_),_.c="",_.closed=!0,q(_,"onend"),f.call(_,_.strict,_.opt),_}function D(_,E){if(typeof _!="object"||!(_ instanceof f))throw new Error("bad call to strictFail");_.strict&&N(_,E)}function G(_){_.strict||(_.tagName=_.tagName[_.looseCase]());var E=_.tags[_.tags.length-1]||_,H=_.tag={name:_.tagName,attributes:{}};_.opt.xmlns&&(H.ns=E.ns),_.attribList.length=0,x(_,"onopentagstart",H)}function V(_,E){var H=_.indexOf(":"),F=H<0?["",_]:_.split(":"),ce=F[0],he=F[1];return E&&_==="xmlns"&&(ce="xmlns",he=""),{prefix:ce,local:he}}function te(_){if(_.strict||(_.attribName=_.attribName[_.looseCase]()),_.attribList.indexOf(_.attribName)!==-1||_.tag.attributes.hasOwnProperty(_.attribName)){_.attribName=_.attribValue="";return}if(_.opt.xmlns){var E=V(_.attribName,!0),H=E.prefix,F=E.local;if(H==="xmlns")if(F==="xml"&&_.attribValue!==h)D(_,"xml: prefix must be bound to "+h+`
Actual: `+_.attribValue);else if(F==="xmlns"&&_.attribValue!==g)D(_,"xmlns: prefix must be bound to "+g+`
Actual: `+_.attribValue);else{var ce=_.tag,he=_.tags[_.tags.length-1]||_;ce.ns===he.ns&&(ce.ns=Object.create(he.ns)),ce.ns[F]=_.attribValue}_.attribList.push([_.attribName,_.attribValue])}else _.tag.attributes[_.attribName]=_.attribValue,x(_,"onattribute",{name:_.attribName,value:_.attribValue});_.attribName=_.attribValue=""}function de(_,E){if(_.opt.xmlns){var H=_.tag,F=V(_.tagName);H.prefix=F.prefix,H.local=F.local,H.uri=H.ns[F.prefix]||"",H.prefix&&!H.uri&&(D(_,"Unbound namespace prefix: "+JSON.stringify(_.tagName)),H.uri=F.prefix);var ce=_.tags[_.tags.length-1]||_;H.ns&&ce.ns!==H.ns&&Object.keys(H.ns).forEach(function(e){x(_,"onopennamespace",{prefix:e,uri:H.ns[e]})});for(var he=0,pe=_.attribList.length;he<pe;he++){var _e=_.attribList[he],Ee=_e[0],Ve=_e[1],Ce=V(Ee,!0),je=Ce.prefix,ht=Ce.local,lt=je===""?"":H.ns[je]||"",ot={name:Ee,value:Ve,prefix:je,local:ht,uri:lt};je&&je!=="xmlns"&&!lt&&(D(_,"Unbound namespace prefix: "+JSON.stringify(je)),ot.uri=je),_.tag.attributes[Ee]=ot,x(_,"onattribute",ot)}_.attribList.length=0}_.tag.isSelfClosing=!!E,_.sawRoot=!0,_.tags.push(_.tag),x(_,"onopentag",_.tag),E||(!_.noscript&&_.tagName.toLowerCase()==="script"?_.state=v.SCRIPT:_.state=v.TEXT,_.tag=null,_.tagName=""),_.attribName=_.attribValue="",_.attribList.length=0}function ie(_){if(!_.tagName){D(_,"Weird empty close tag."),_.textNode+="</>",_.state=v.TEXT;return}if(_.script){if(_.tagName!=="script"){_.script+="</"+_.tagName+">",_.tagName="",_.state=v.SCRIPT;return}x(_,"onscript",_.script),_.script=""}var E=_.tags.length,H=_.tagName;_.strict||(H=H[_.looseCase]());for(var F=H;E--;){var ce=_.tags[E];if(ce.name!==F)D(_,"Unexpected close tag");else break}if(E<0){D(_,"Unmatched closing tag: "+_.tagName),_.textNode+="</"+_.tagName+">",_.state=v.TEXT;return}_.tagName=H;for(var he=_.tags.length;he-- >E;){var pe=_.tag=_.tags.pop();_.tagName=_.tag.name,x(_,"onclosetag",_.tagName);var _e={};for(var Ee in pe.ns)_e[Ee]=pe.ns[Ee];var Ve=_.tags[_.tags.length-1]||_;_.opt.xmlns&&pe.ns!==Ve.ns&&Object.keys(pe.ns).forEach(function(Ce){var je=pe.ns[Ce];x(_,"onclosenamespace",{prefix:Ce,uri:je})})}E===0&&(_.closedRoot=!0),_.tagName=_.attribValue=_.attribName="",_.attribList.length=0,_.state=v.TEXT}function we(_){var E=_.entity,H=E.toLowerCase(),F,ce="";return _.ENTITIES[E]?_.ENTITIES[E]:_.ENTITIES[H]?_.ENTITIES[H]:(E=H,E.charAt(0)==="#"&&(E.charAt(1)==="x"?(E=E.slice(2),F=parseInt(E,16),ce=F.toString(16)):(E=E.slice(1),F=parseInt(E,10),ce=F.toString(10))),E=E.replace(/^0+/,""),isNaN(F)||ce.toLowerCase()!==E||F<0||F>1114111?(D(_,"Invalid character entity"),"&"+_.entity+";"):String.fromCodePoint(F))}function ve(_,E){E==="<"?(_.state=v.OPEN_WAKA,_.startTagPosition=_.position):I(E)||(D(_,"Non-whitespace before first tag."),_.textNode=E,_.state=v.TEXT)}function Q(_,E){var H="";return E<_.length&&(H=_.charAt(E)),H}function ge(_){var E=this;if(this.error)throw this.error;if(E.closed)return N(E,"Cannot write after close. Assign an onready handler.");if(_===null)return j(E);typeof _=="object"&&(_=_.toString());for(var H=0,F="";F=Q(_,H++),E.c=F,!!F;)switch(E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++),E.state){case v.BEGIN:if(E.state=v.BEGIN_WHITESPACE,F==="\uFEFF")continue;ve(E,F);continue;case v.BEGIN_WHITESPACE:ve(E,F);continue;case v.TEXT:if(E.sawRoot&&!E.closedRoot){for(var he=H-1;F&&F!=="<"&&F!=="&";)F=Q(_,H++),F&&E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++);E.textNode+=_.substring(he,H-1)}F==="<"&&!(E.sawRoot&&E.closedRoot&&!E.strict)?(E.state=v.OPEN_WAKA,E.startTagPosition=E.position):(!I(F)&&(!E.sawRoot||E.closedRoot)&&D(E,"Text data outside of root node."),F==="&"?E.state=v.TEXT_ENTITY:E.textNode+=F);continue;case v.SCRIPT:F==="<"?E.state=v.SCRIPT_ENDING:E.script+=F;continue;case v.SCRIPT_ENDING:F==="/"?E.state=v.CLOSE_TAG:(E.script+="<"+F,E.state=v.SCRIPT);continue;case v.OPEN_WAKA:if(F==="!")E.state=v.SGML_DECL,E.sgmlDecl="";else if(!I(F))if(S(m,F))E.state=v.OPEN_TAG,E.tagName=F;else if(F==="/")E.state=v.CLOSE_TAG,E.tagName="";else if(F==="?")E.state=v.PROC_INST,E.procInstName=E.procInstBody="";else{if(D(E,"Unencoded <"),E.startTagPosition+1<E.position){var ce=E.position-E.startTagPosition;F=new Array(ce).join(" ")+F}E.textNode+="<"+F,E.state=v.TEXT}continue;case v.SGML_DECL:if(E.sgmlDecl+F==="--"){E.state=v.COMMENT,E.comment="",E.sgmlDecl="";continue}E.doctype&&E.doctype!==!0&&E.sgmlDecl?(E.state=v.DOCTYPE_DTD,E.doctype+="<!"+E.sgmlDecl+F,E.sgmlDecl=""):(E.sgmlDecl+F).toUpperCase()===r?(x(E,"onopencdata"),E.state=v.CDATA,E.sgmlDecl="",E.cdata=""):(E.sgmlDecl+F).toUpperCase()===i?(E.state=v.DOCTYPE,(E.doctype||E.sawRoot)&&D(E,"Inappropriately located doctype declaration"),E.doctype="",E.sgmlDecl=""):F===">"?(x(E,"onsgmldeclaration",E.sgmlDecl),E.sgmlDecl="",E.state=v.TEXT):(b(F)&&(E.state=v.SGML_DECL_QUOTED),E.sgmlDecl+=F);continue;case v.SGML_DECL_QUOTED:F===E.q&&(E.state=v.SGML_DECL,E.q=""),E.sgmlDecl+=F;continue;case v.DOCTYPE:F===">"?(E.state=v.TEXT,x(E,"ondoctype",E.doctype),E.doctype=!0):(E.doctype+=F,F==="["?E.state=v.DOCTYPE_DTD:b(F)&&(E.state=v.DOCTYPE_QUOTED,E.q=F));continue;case v.DOCTYPE_QUOTED:E.doctype+=F,F===E.q&&(E.q="",E.state=v.DOCTYPE);continue;case v.DOCTYPE_DTD:F==="]"?(E.doctype+=F,E.state=v.DOCTYPE):F==="<"?(E.state=v.OPEN_WAKA,E.startTagPosition=E.position):b(F)?(E.doctype+=F,E.state=v.DOCTYPE_DTD_QUOTED,E.q=F):E.doctype+=F;continue;case v.DOCTYPE_DTD_QUOTED:E.doctype+=F,F===E.q&&(E.state=v.DOCTYPE_DTD,E.q="");continue;case v.COMMENT:F==="-"?E.state=v.COMMENT_ENDING:E.comment+=F;continue;case v.COMMENT_ENDING:F==="-"?(E.state=v.COMMENT_ENDED,E.comment=L(E.opt,E.comment),E.comment&&x(E,"oncomment",E.comment),E.comment=""):(E.comment+="-"+F,E.state=v.COMMENT);continue;case v.COMMENT_ENDED:F!==">"?(D(E,"Malformed comment"),E.comment+="--"+F,E.state=v.COMMENT):E.doctype&&E.doctype!==!0?E.state=v.DOCTYPE_DTD:E.state=v.TEXT;continue;case v.CDATA:for(var he=H-1;F&&F!=="]";)F=Q(_,H++),F&&E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++);E.cdata+=_.substring(he,H-1),F==="]"&&(E.state=v.CDATA_ENDING);continue;case v.CDATA_ENDING:F==="]"?E.state=v.CDATA_ENDING_2:(E.cdata+="]"+F,E.state=v.CDATA);continue;case v.CDATA_ENDING_2:F===">"?(E.cdata&&x(E,"oncdata",E.cdata),x(E,"onclosecdata"),E.cdata="",E.state=v.TEXT):F==="]"?E.cdata+="]":(E.cdata+="]]"+F,E.state=v.CDATA);continue;case v.PROC_INST:F==="?"?E.state=v.PROC_INST_ENDING:I(F)?E.state=v.PROC_INST_BODY:E.procInstName+=F;continue;case v.PROC_INST_BODY:if(!E.procInstBody&&I(F))continue;F==="?"?E.state=v.PROC_INST_ENDING:E.procInstBody+=F;continue;case v.PROC_INST_ENDING:F===">"?(x(E,"onprocessinginstruction",{name:E.procInstName,body:E.procInstBody}),E.procInstName=E.procInstBody="",E.state=v.TEXT):(E.procInstBody+="?"+F,E.state=v.PROC_INST_BODY);continue;case v.OPEN_TAG:S(w,F)?E.tagName+=F:(G(E),F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:(I(F)||D(E,"Invalid character in tag name"),E.state=v.ATTRIB));continue;case v.OPEN_TAG_SLASH:F===">"?(de(E,!0),ie(E)):(D(E,"Forward-slash in opening tag not followed by >"),E.state=v.ATTRIB);continue;case v.ATTRIB:if(I(F))continue;F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:S(m,F)?(E.attribName=F,E.attribValue="",E.state=v.ATTRIB_NAME):D(E,"Invalid attribute name");continue;case v.ATTRIB_NAME:F==="="?E.state=v.ATTRIB_VALUE:F===">"?(D(E,"Attribute without value"),E.attribValue=E.attribName,te(E),de(E)):I(F)?E.state=v.ATTRIB_NAME_SAW_WHITE:S(w,F)?E.attribName+=F:D(E,"Invalid attribute name");continue;case v.ATTRIB_NAME_SAW_WHITE:if(F==="=")E.state=v.ATTRIB_VALUE;else{if(I(F))continue;D(E,"Attribute without value"),E.tag.attributes[E.attribName]="",E.attribValue="",x(E,"onattribute",{name:E.attribName,value:""}),E.attribName="",F===">"?de(E):S(m,F)?(E.attribName=F,E.state=v.ATTRIB_NAME):(D(E,"Invalid attribute name"),E.state=v.ATTRIB)}continue;case v.ATTRIB_VALUE:if(I(F))continue;b(F)?(E.q=F,E.state=v.ATTRIB_VALUE_QUOTED):(E.opt.unquotedAttributeValues||N(E,"Unquoted attribute value"),E.state=v.ATTRIB_VALUE_UNQUOTED,E.attribValue=F);continue;case v.ATTRIB_VALUE_QUOTED:if(F!==E.q){F==="&"?E.state=v.ATTRIB_VALUE_ENTITY_Q:E.attribValue+=F;continue}te(E),E.q="",E.state=v.ATTRIB_VALUE_CLOSED;continue;case v.ATTRIB_VALUE_CLOSED:I(F)?E.state=v.ATTRIB:F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:S(m,F)?(D(E,"No whitespace between attributes"),E.attribName=F,E.attribValue="",E.state=v.ATTRIB_NAME):D(E,"Invalid attribute name");continue;case v.ATTRIB_VALUE_UNQUOTED:if(!O(F)){F==="&"?E.state=v.ATTRIB_VALUE_ENTITY_U:E.attribValue+=F;continue}te(E),F===">"?de(E):E.state=v.ATTRIB;continue;case v.CLOSE_TAG:if(E.tagName)F===">"?ie(E):S(w,F)?E.tagName+=F:E.script?(E.script+="</"+E.tagName,E.tagName="",E.state=v.SCRIPT):(I(F)||D(E,"Invalid tagname in closing tag"),E.state=v.CLOSE_TAG_SAW_WHITE);else{if(I(F))continue;A(m,F)?E.script?(E.script+="</"+F,E.state=v.SCRIPT):D(E,"Invalid tagname in closing tag."):E.tagName=F}continue;case v.CLOSE_TAG_SAW_WHITE:if(I(F))continue;F===">"?ie(E):D(E,"Invalid characters in closing tag");continue;case v.TEXT_ENTITY:case v.ATTRIB_VALUE_ENTITY_Q:case v.ATTRIB_VALUE_ENTITY_U:var pe,_e;switch(E.state){case v.TEXT_ENTITY:pe=v.TEXT,_e="textNode";break;case v.ATTRIB_VALUE_ENTITY_Q:pe=v.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case v.ATTRIB_VALUE_ENTITY_U:pe=v.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(F===";"){var Ee=we(E);E.opt.unparsedEntities&&!Object.values(d.XML_ENTITIES).includes(Ee)?(E.entity="",E.state=pe,E.write(Ee)):(E[_e]+=Ee,E.entity="",E.state=pe)}else S(E.entity.length?P:C,F)?E.entity+=F:(D(E,"Invalid character in entity name"),E[_e]+="&"+E.entity+F,E.entity="",E.state=pe);continue;default:throw new Error(E,"Unknown state: "+E.state)}return E.position>=E.bufferCheckPosition&&u(E),E}String.fromCodePoint||(function(){var _=String.fromCharCode,E=Math.floor,H=function(){var F=16384,ce=[],he,pe,_e=-1,Ee=arguments.length;if(!Ee)return"";for(var Ve="";++_e<Ee;){var Ce=Number(arguments[_e]);if(!isFinite(Ce)||Ce<0||Ce>1114111||E(Ce)!==Ce)throw RangeError("Invalid code point: "+Ce);Ce<=65535?ce.push(Ce):(Ce-=65536,he=(Ce>>10)+55296,pe=Ce%1024+56320,ce.push(he,pe)),(_e+1===Ee||ce.length>F)&&(Ve+=_.apply(null,ce),ce.length=0)}return Ve};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H})()})(t)})($n)),$n}var Po;function Kc(){if(Po)return kt;Po=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.XElement=void 0,kt.parseXml=n;const t=Xc(),d=Vr();class p{constructor(o){if(this.name=o,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!o)throw(0,d.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!u(o))throw(0,d.newError)(`Invalid element name: ${o}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(o){const s=this.attributes===null?null:this.attributes[o];if(s==null)throw(0,d.newError)(`No attribute "${o}"`,"ERR_XML_MISSED_ATTRIBUTE");return s}removeAttribute(o){this.attributes!==null&&delete this.attributes[o]}element(o,s=!1,a=null){const r=this.elementOrNull(o,s);if(r===null)throw(0,d.newError)(a||`No element "${o}"`,"ERR_XML_MISSED_ELEMENT");return r}elementOrNull(o,s=!1){if(this.elements===null)return null;for(const a of this.elements)if(l(a,o,s))return a;return null}getElements(o,s=!1){return this.elements===null?[]:this.elements.filter(a=>l(a,o,s))}elementValueOrEmpty(o,s=!1){const a=this.elementOrNull(o,s);return a===null?"":a.value}}kt.XElement=p;const f=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function u(c){return f.test(c)}function l(c,o,s){const a=c.name;return a===o||s===!0&&a.length===o.length&&a.toLowerCase()===o.toLowerCase()}function n(c){let o=null;const s=t.parser(!0,{}),a=[];return s.onopentag=r=>{const i=new p(r.name);if(i.attributes=r.attributes,o===null)o=i;else{const h=a[a.length-1];h.elements==null&&(h.elements=[]),h.elements.push(i)}a.push(i)},s.onclosetag=()=>{a.pop()},s.ontext=r=>{a.length>0&&(a[a.length-1].value=r)},s.oncdata=r=>{const i=a[a.length-1];i.value=r,i.isCData=!0},s.onerror=r=>{throw r},s.write(c),o}return kt}var Oo;function ke(){return Oo||(Oo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_APP_PACKAGE_FILE_NAME=t.CURRENT_APP_INSTALLER_FILE_NAME=t.XElement=t.parseXml=t.UUID=t.parseDn=t.retry=t.githubTagPrefix=t.githubUrl=t.getS3LikeProviderBaseUrl=t.ProgressCallbackTransform=t.MemoLazy=t.safeStringifyJson=t.safeGetHeader=t.parseJson=t.HttpExecutor=t.HttpError=t.DigestTransform=t.createHttpError=t.configureRequestUrl=t.configureRequestOptionsFromUrl=t.configureRequestOptions=t.newError=t.CancellationToken=t.CancellationError=void 0,t.asArray=r;var d=oa();Object.defineProperty(t,"CancellationError",{enumerable:!0,get:function(){return d.CancellationError}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}});var p=Vr();Object.defineProperty(t,"newError",{enumerable:!0,get:function(){return p.newError}});var f=jc();Object.defineProperty(t,"configureRequestOptions",{enumerable:!0,get:function(){return f.configureRequestOptions}}),Object.defineProperty(t,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return f.configureRequestOptionsFromUrl}}),Object.defineProperty(t,"configureRequestUrl",{enumerable:!0,get:function(){return f.configureRequestUrl}}),Object.defineProperty(t,"createHttpError",{enumerable:!0,get:function(){return f.createHttpError}}),Object.defineProperty(t,"DigestTransform",{enumerable:!0,get:function(){return f.DigestTransform}}),Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return f.HttpError}}),Object.defineProperty(t,"HttpExecutor",{enumerable:!0,get:function(){return f.HttpExecutor}}),Object.defineProperty(t,"parseJson",{enumerable:!0,get:function(){return f.parseJson}}),Object.defineProperty(t,"safeGetHeader",{enumerable:!0,get:function(){return f.safeGetHeader}}),Object.defineProperty(t,"safeStringifyJson",{enumerable:!0,get:function(){return f.safeStringifyJson}});var u=Gc();Object.defineProperty(t,"MemoLazy",{enumerable:!0,get:function(){return u.MemoLazy}});var l=$l();Object.defineProperty(t,"ProgressCallbackTransform",{enumerable:!0,get:function(){return l.ProgressCallbackTransform}});var n=Wc();Object.defineProperty(t,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return n.getS3LikeProviderBaseUrl}}),Object.defineProperty(t,"githubUrl",{enumerable:!0,get:function(){return n.githubUrl}}),Object.defineProperty(t,"githubTagPrefix",{enumerable:!0,get:function(){return n.githubTagPrefix}});var c=Vc();Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return c.retry}});var o=Yc();Object.defineProperty(t,"parseDn",{enumerable:!0,get:function(){return o.parseDn}});var s=zc();Object.defineProperty(t,"UUID",{enumerable:!0,get:function(){return s.UUID}});var a=Kc();Object.defineProperty(t,"parseXml",{enumerable:!0,get:function(){return a.parseXml}}),Object.defineProperty(t,"XElement",{enumerable:!0,get:function(){return a.XElement}}),t.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",t.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function r(i){return i==null?[]:Array.isArray(i)?i:[i]}})(Ln)),Ln}var Be={},qr={},vt={},Io;function wr(){if(Io)return vt;Io=1;function t(n){return typeof n>"u"||n===null}function d(n){return typeof n=="object"&&n!==null}function p(n){return Array.isArray(n)?n:t(n)?[]:[n]}function f(n,c){var o,s,a,r;if(c)for(r=Object.keys(c),o=0,s=r.length;o<s;o+=1)a=r[o],n[a]=c[a];return n}function u(n,c){var o="",s;for(s=0;s<c;s+=1)o+=n;return o}function l(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}return vt.isNothing=t,vt.isObject=d,vt.toArray=p,vt.repeat=u,vt.isNegativeZero=l,vt.extend=f,vt}var Mn,Do;function _r(){if(Do)return Mn;Do=1;function t(p,f){var u="",l=p.reason||"(unknown reason)";return p.mark?(p.mark.name&&(u+='in "'+p.mark.name+'" '),u+="("+(p.mark.line+1)+":"+(p.mark.column+1)+")",!f&&p.mark.snippet&&(u+=`

`+p.mark.snippet),l+" "+u):l}function d(p,f){Error.call(this),this.name="YAMLException",this.reason=p,this.mark=f,this.message=t(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.toString=function(f){return this.name+": "+t(this,f)},Mn=d,Mn}var Bn,No;function Jc(){if(No)return Bn;No=1;var t=wr();function d(u,l,n,c,o){var s="",a="",r=Math.floor(o/2)-1;return c-l>r&&(s=" ... ",l=c-r+s.length),n-c>r&&(a=" ...",n=c+r-a.length),{str:s+u.slice(l,n).replace(/\t/g,"")+a,pos:c-l+s.length}}function p(u,l){return t.repeat(" ",l-u.length)+u}function f(u,l){if(l=Object.create(l||null),!u.buffer)return null;l.maxLength||(l.maxLength=79),typeof l.indent!="number"&&(l.indent=1),typeof l.linesBefore!="number"&&(l.linesBefore=3),typeof l.linesAfter!="number"&&(l.linesAfter=2);for(var n=/\r?\n|\r|\0/g,c=[0],o=[],s,a=-1;s=n.exec(u.buffer);)o.push(s.index),c.push(s.index+s[0].length),u.position<=s.index&&a<0&&(a=c.length-2);a<0&&(a=c.length-1);var r="",i,h,g=Math.min(u.line+l.linesAfter,o.length).toString().length,y=l.maxLength-(l.indent+g+3);for(i=1;i<=l.linesBefore&&!(a-i<0);i++)h=d(u.buffer,c[a-i],o[a-i],u.position-(c[a]-c[a-i]),y),r=t.repeat(" ",l.indent)+p((u.line-i+1).toString(),g)+" | "+h.str+`
`+r;for(h=d(u.buffer,c[a],o[a],u.position,y),r+=t.repeat(" ",l.indent)+p((u.line+1).toString(),g)+" | "+h.str+`
`,r+=t.repeat("-",l.indent+g+3+h.pos)+`^
`,i=1;i<=l.linesAfter&&!(a+i>=o.length);i++)h=d(u.buffer,c[a+i],o[a+i],u.position-(c[a]-c[a+i]),y),r+=t.repeat(" ",l.indent)+p((u.line+i+1).toString(),g)+" | "+h.str+`
`;return r.replace(/\n$/,"")}return Bn=f,Bn}var Hn,Fo;function Ge(){if(Fo)return Hn;Fo=1;var t=_r(),d=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],p=["scalar","sequence","mapping"];function f(l){var n={};return l!==null&&Object.keys(l).forEach(function(c){l[c].forEach(function(o){n[String(o)]=c})}),n}function u(l,n){if(n=n||{},Object.keys(n).forEach(function(c){if(d.indexOf(c)===-1)throw new t('Unknown option "'+c+'" is met in definition of "'+l+'" YAML type.')}),this.options=n,this.tag=l,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(c){return c},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=f(n.styleAliases||null),p.indexOf(this.kind)===-1)throw new t('Unknown kind "'+this.kind+'" is specified for "'+l+'" YAML type.')}return Hn=u,Hn}var jn,Lo;function Ml(){if(Lo)return jn;Lo=1;var t=_r(),d=Ge();function p(l,n){var c=[];return l[n].forEach(function(o){var s=c.length;c.forEach(function(a,r){a.tag===o.tag&&a.kind===o.kind&&a.multi===o.multi&&(s=r)}),c[s]=o}),c}function f(){var l={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,c;function o(s){s.multi?(l.multi[s.kind].push(s),l.multi.fallback.push(s)):l[s.kind][s.tag]=l.fallback[s.tag]=s}for(n=0,c=arguments.length;n<c;n+=1)arguments[n].forEach(o);return l}function u(l){return this.extend(l)}return u.prototype.extend=function(n){var c=[],o=[];if(n instanceof d)o.push(n);else if(Array.isArray(n))o=o.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(c=c.concat(n.implicit)),n.explicit&&(o=o.concat(n.explicit));else throw new t("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");c.forEach(function(a){if(!(a instanceof d))throw new t("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new t("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new t("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),o.forEach(function(a){if(!(a instanceof d))throw new t("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(u.prototype);return s.implicit=(this.implicit||[]).concat(c),s.explicit=(this.explicit||[]).concat(o),s.compiledImplicit=p(s,"implicit"),s.compiledExplicit=p(s,"explicit"),s.compiledTypeMap=f(s.compiledImplicit,s.compiledExplicit),s},jn=u,jn}var Gn,xo;function Bl(){if(xo)return Gn;xo=1;var t=Ge();return Gn=new t("tag:yaml.org,2002:str",{kind:"scalar",construct:function(d){return d!==null?d:""}}),Gn}var Wn,Uo;function Hl(){if(Uo)return Wn;Uo=1;var t=Ge();return Wn=new t("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(d){return d!==null?d:[]}}),Wn}var Vn,ko;function jl(){if(ko)return Vn;ko=1;var t=Ge();return Vn=new t("tag:yaml.org,2002:map",{kind:"mapping",construct:function(d){return d!==null?d:{}}}),Vn}var Yn,qo;function Gl(){if(qo)return Yn;qo=1;var t=Ml();return Yn=new t({explicit:[Bl(),Hl(),jl()]}),Yn}var zn,$o;function Wl(){if($o)return zn;$o=1;var t=Ge();function d(u){if(u===null)return!0;var l=u.length;return l===1&&u==="~"||l===4&&(u==="null"||u==="Null"||u==="NULL")}function p(){return null}function f(u){return u===null}return zn=new t("tag:yaml.org,2002:null",{kind:"scalar",resolve:d,construct:p,predicate:f,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),zn}var Xn,Mo;function Vl(){if(Mo)return Xn;Mo=1;var t=Ge();function d(u){if(u===null)return!1;var l=u.length;return l===4&&(u==="true"||u==="True"||u==="TRUE")||l===5&&(u==="false"||u==="False"||u==="FALSE")}function p(u){return u==="true"||u==="True"||u==="TRUE"}function f(u){return Object.prototype.toString.call(u)==="[object Boolean]"}return Xn=new t("tag:yaml.org,2002:bool",{kind:"scalar",resolve:d,construct:p,predicate:f,represent:{lowercase:function(u){return u?"true":"false"},uppercase:function(u){return u?"TRUE":"FALSE"},camelcase:function(u){return u?"True":"False"}},defaultStyle:"lowercase"}),Xn}var Kn,Bo;function Yl(){if(Bo)return Kn;Bo=1;var t=wr(),d=Ge();function p(o){return 48<=o&&o<=57||65<=o&&o<=70||97<=o&&o<=102}function f(o){return 48<=o&&o<=55}function u(o){return 48<=o&&o<=57}function l(o){if(o===null)return!1;var s=o.length,a=0,r=!1,i;if(!s)return!1;if(i=o[a],(i==="-"||i==="+")&&(i=o[++a]),i==="0"){if(a+1===s)return!0;if(i=o[++a],i==="b"){for(a++;a<s;a++)if(i=o[a],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(a++;a<s;a++)if(i=o[a],i!=="_"){if(!p(o.charCodeAt(a)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(a++;a<s;a++)if(i=o[a],i!=="_"){if(!f(o.charCodeAt(a)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;a<s;a++)if(i=o[a],i!=="_"){if(!u(o.charCodeAt(a)))return!1;r=!0}return!(!r||i==="_")}function n(o){var s=o,a=1,r;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),r=s[0],(r==="-"||r==="+")&&(r==="-"&&(a=-1),s=s.slice(1),r=s[0]),s==="0")return 0;if(r==="0"){if(s[1]==="b")return a*parseInt(s.slice(2),2);if(s[1]==="x")return a*parseInt(s.slice(2),16);if(s[1]==="o")return a*parseInt(s.slice(2),8)}return a*parseInt(s,10)}function c(o){return Object.prototype.toString.call(o)==="[object Number]"&&o%1===0&&!t.isNegativeZero(o)}return Kn=new d("tag:yaml.org,2002:int",{kind:"scalar",resolve:l,construct:n,predicate:c,represent:{binary:function(o){return o>=0?"0b"+o.toString(2):"-0b"+o.toString(2).slice(1)},octal:function(o){return o>=0?"0o"+o.toString(8):"-0o"+o.toString(8).slice(1)},decimal:function(o){return o.toString(10)},hexadecimal:function(o){return o>=0?"0x"+o.toString(16).toUpperCase():"-0x"+o.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Kn}var Jn,Ho;function zl(){if(Ho)return Jn;Ho=1;var t=wr(),d=Ge(),p=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function f(o){return!(o===null||!p.test(o)||o[o.length-1]==="_")}function u(o){var s,a;return s=o.replace(/_/g,"").toLowerCase(),a=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?a===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:a*parseFloat(s,10)}var l=/^[-+]?[0-9]+e/;function n(o,s){var a;if(isNaN(o))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===o)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===o)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(t.isNegativeZero(o))return"-0.0";return a=o.toString(10),l.test(a)?a.replace("e",".e"):a}function c(o){return Object.prototype.toString.call(o)==="[object Number]"&&(o%1!==0||t.isNegativeZero(o))}return Jn=new d("tag:yaml.org,2002:float",{kind:"scalar",resolve:f,construct:u,predicate:c,represent:n,defaultStyle:"lowercase"}),Jn}var Qn,jo;function Xl(){return jo||(jo=1,Qn=Gl().extend({implicit:[Wl(),Vl(),Yl(),zl()]})),Qn}var Zn,Go;function Kl(){return Go||(Go=1,Zn=Xl()),Zn}var ei,Wo;function Jl(){if(Wo)return ei;Wo=1;var t=Ge(),d=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),p=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function f(n){return n===null?!1:d.exec(n)!==null||p.exec(n)!==null}function u(n){var c,o,s,a,r,i,h,g=0,y=null,m,w,C;if(c=d.exec(n),c===null&&(c=p.exec(n)),c===null)throw new Error("Date resolve error");if(o=+c[1],s=+c[2]-1,a=+c[3],!c[4])return new Date(Date.UTC(o,s,a));if(r=+c[4],i=+c[5],h=+c[6],c[7]){for(g=c[7].slice(0,3);g.length<3;)g+="0";g=+g}return c[9]&&(m=+c[10],w=+(c[11]||0),y=(m*60+w)*6e4,c[9]==="-"&&(y=-y)),C=new Date(Date.UTC(o,s,a,r,i,h,g)),y&&C.setTime(C.getTime()-y),C}function l(n){return n.toISOString()}return ei=new t("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:f,construct:u,instanceOf:Date,represent:l}),ei}var ti,Vo;function Ql(){if(Vo)return ti;Vo=1;var t=Ge();function d(p){return p==="<<"||p===null}return ti=new t("tag:yaml.org,2002:merge",{kind:"scalar",resolve:d}),ti}var ri,Yo;function Zl(){if(Yo)return ri;Yo=1;var t=Ge(),d=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function p(n){if(n===null)return!1;var c,o,s=0,a=n.length,r=d;for(o=0;o<a;o++)if(c=r.indexOf(n.charAt(o)),!(c>64)){if(c<0)return!1;s+=6}return s%8===0}function f(n){var c,o,s=n.replace(/[\r\n=]/g,""),a=s.length,r=d,i=0,h=[];for(c=0;c<a;c++)c%4===0&&c&&(h.push(i>>16&255),h.push(i>>8&255),h.push(i&255)),i=i<<6|r.indexOf(s.charAt(c));return o=a%4*6,o===0?(h.push(i>>16&255),h.push(i>>8&255),h.push(i&255)):o===18?(h.push(i>>10&255),h.push(i>>2&255)):o===12&&h.push(i>>4&255),new Uint8Array(h)}function u(n){var c="",o=0,s,a,r=n.length,i=d;for(s=0;s<r;s++)s%3===0&&s&&(c+=i[o>>18&63],c+=i[o>>12&63],c+=i[o>>6&63],c+=i[o&63]),o=(o<<8)+n[s];return a=r%3,a===0?(c+=i[o>>18&63],c+=i[o>>12&63],c+=i[o>>6&63],c+=i[o&63]):a===2?(c+=i[o>>10&63],c+=i[o>>4&63],c+=i[o<<2&63],c+=i[64]):a===1&&(c+=i[o>>2&63],c+=i[o<<4&63],c+=i[64],c+=i[64]),c}function l(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}return ri=new t("tag:yaml.org,2002:binary",{kind:"scalar",resolve:p,construct:f,predicate:l,represent:u}),ri}var ni,zo;function eu(){if(zo)return ni;zo=1;var t=Ge(),d=Object.prototype.hasOwnProperty,p=Object.prototype.toString;function f(l){if(l===null)return!0;var n=[],c,o,s,a,r,i=l;for(c=0,o=i.length;c<o;c+=1){if(s=i[c],r=!1,p.call(s)!=="[object Object]")return!1;for(a in s)if(d.call(s,a))if(!r)r=!0;else return!1;if(!r)return!1;if(n.indexOf(a)===-1)n.push(a);else return!1}return!0}function u(l){return l!==null?l:[]}return ni=new t("tag:yaml.org,2002:omap",{kind:"sequence",resolve:f,construct:u}),ni}var ii,Xo;function tu(){if(Xo)return ii;Xo=1;var t=Ge(),d=Object.prototype.toString;function p(u){if(u===null)return!0;var l,n,c,o,s,a=u;for(s=new Array(a.length),l=0,n=a.length;l<n;l+=1){if(c=a[l],d.call(c)!=="[object Object]"||(o=Object.keys(c),o.length!==1))return!1;s[l]=[o[0],c[o[0]]]}return!0}function f(u){if(u===null)return[];var l,n,c,o,s,a=u;for(s=new Array(a.length),l=0,n=a.length;l<n;l+=1)c=a[l],o=Object.keys(c),s[l]=[o[0],c[o[0]]];return s}return ii=new t("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:p,construct:f}),ii}var ai,Ko;function ru(){if(Ko)return ai;Ko=1;var t=Ge(),d=Object.prototype.hasOwnProperty;function p(u){if(u===null)return!0;var l,n=u;for(l in n)if(d.call(n,l)&&n[l]!==null)return!1;return!0}function f(u){return u!==null?u:{}}return ai=new t("tag:yaml.org,2002:set",{kind:"mapping",resolve:p,construct:f}),ai}var oi,Jo;function sa(){return Jo||(Jo=1,oi=Kl().extend({implicit:[Jl(),Ql()],explicit:[Zl(),eu(),tu(),ru()]})),oi}var Qo;function Qc(){if(Qo)return qr;Qo=1;var t=wr(),d=_r(),p=Jc(),f=sa(),u=Object.prototype.hasOwnProperty,l=1,n=2,c=3,o=4,s=1,a=2,r=3,i=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,h=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,y=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function w(e){return Object.prototype.toString.call(e)}function C(e){return e===10||e===13}function P(e){return e===9||e===32}function I(e){return e===9||e===32||e===10||e===13}function b(e){return e===44||e===91||e===93||e===123||e===125}function O(e){var B;return 48<=e&&e<=57?e-48:(B=e|32,97<=B&&B<=102?B-97+10:-1)}function S(e){return e===120?2:e===117?4:e===85?8:0}function A(e){return 48<=e&&e<=57?e-48:-1}function v(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function k(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function q(e,B,W){B==="__proto__"?Object.defineProperty(e,B,{configurable:!0,enumerable:!0,writable:!0,value:W}):e[B]=W}for(var x=new Array(256),$=new Array(256),L=0;L<256;L++)x[L]=v(L)?1:0,$[L]=v(L);function N(e,B){this.input=e,this.filename=B.filename||null,this.schema=B.schema||f,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function j(e,B){var W={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return W.snippet=p(W),new d(B,W)}function D(e,B){throw j(e,B)}function G(e,B){e.onWarning&&e.onWarning.call(null,j(e,B))}var V={YAML:function(B,W,ne){var Y,re,Z;B.version!==null&&D(B,"duplication of %YAML directive"),ne.length!==1&&D(B,"YAML directive accepts exactly one argument"),Y=/^([0-9]+)\.([0-9]+)$/.exec(ne[0]),Y===null&&D(B,"ill-formed argument of the YAML directive"),re=parseInt(Y[1],10),Z=parseInt(Y[2],10),re!==1&&D(B,"unacceptable YAML version of the document"),B.version=ne[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&G(B,"unsupported YAML version of the document")},TAG:function(B,W,ne){var Y,re;ne.length!==2&&D(B,"TAG directive accepts exactly two arguments"),Y=ne[0],re=ne[1],y.test(Y)||D(B,"ill-formed tag handle (first argument) of the TAG directive"),u.call(B.tagMap,Y)&&D(B,'there is a previously declared suffix for "'+Y+'" tag handle'),m.test(re)||D(B,"ill-formed tag prefix (second argument) of the TAG directive");try{re=decodeURIComponent(re)}catch{D(B,"tag prefix is malformed: "+re)}B.tagMap[Y]=re}};function te(e,B,W,ne){var Y,re,Z,oe;if(B<W){if(oe=e.input.slice(B,W),ne)for(Y=0,re=oe.length;Y<re;Y+=1)Z=oe.charCodeAt(Y),Z===9||32<=Z&&Z<=1114111||D(e,"expected valid JSON character");else i.test(oe)&&D(e,"the stream contains non-printable characters");e.result+=oe}}function de(e,B,W,ne){var Y,re,Z,oe;for(t.isObject(W)||D(e,"cannot merge mappings; the provided source object is unacceptable"),Y=Object.keys(W),Z=0,oe=Y.length;Z<oe;Z+=1)re=Y[Z],u.call(B,re)||(q(B,re,W[re]),ne[re]=!0)}function ie(e,B,W,ne,Y,re,Z,oe,ue){var Se,Te;if(Array.isArray(Y))for(Y=Array.prototype.slice.call(Y),Se=0,Te=Y.length;Se<Te;Se+=1)Array.isArray(Y[Se])&&D(e,"nested arrays are not supported inside keys"),typeof Y=="object"&&w(Y[Se])==="[object Object]"&&(Y[Se]="[object Object]");if(typeof Y=="object"&&w(Y)==="[object Object]"&&(Y="[object Object]"),Y=String(Y),B===null&&(B={}),ne==="tag:yaml.org,2002:merge")if(Array.isArray(re))for(Se=0,Te=re.length;Se<Te;Se+=1)de(e,B,re[Se],W);else de(e,B,re,W);else!e.json&&!u.call(W,Y)&&u.call(B,Y)&&(e.line=Z||e.line,e.lineStart=oe||e.lineStart,e.position=ue||e.position,D(e,"duplicated mapping key")),q(B,Y,re),delete W[Y];return B}function we(e){var B;B=e.input.charCodeAt(e.position),B===10?e.position++:B===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):D(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ve(e,B,W){for(var ne=0,Y=e.input.charCodeAt(e.position);Y!==0;){for(;P(Y);)Y===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),Y=e.input.charCodeAt(++e.position);if(B&&Y===35)do Y=e.input.charCodeAt(++e.position);while(Y!==10&&Y!==13&&Y!==0);if(C(Y))for(we(e),Y=e.input.charCodeAt(e.position),ne++,e.lineIndent=0;Y===32;)e.lineIndent++,Y=e.input.charCodeAt(++e.position);else break}return W!==-1&&ne!==0&&e.lineIndent<W&&G(e,"deficient indentation"),ne}function Q(e){var B=e.position,W;return W=e.input.charCodeAt(B),!!((W===45||W===46)&&W===e.input.charCodeAt(B+1)&&W===e.input.charCodeAt(B+2)&&(B+=3,W=e.input.charCodeAt(B),W===0||I(W)))}function ge(e,B){B===1?e.result+=" ":B>1&&(e.result+=t.repeat(`
`,B-1))}function _(e,B,W){var ne,Y,re,Z,oe,ue,Se,Te,me=e.kind,R=e.result,M;if(M=e.input.charCodeAt(e.position),I(M)||b(M)||M===35||M===38||M===42||M===33||M===124||M===62||M===39||M===34||M===37||M===64||M===96||(M===63||M===45)&&(Y=e.input.charCodeAt(e.position+1),I(Y)||W&&b(Y)))return!1;for(e.kind="scalar",e.result="",re=Z=e.position,oe=!1;M!==0;){if(M===58){if(Y=e.input.charCodeAt(e.position+1),I(Y)||W&&b(Y))break}else if(M===35){if(ne=e.input.charCodeAt(e.position-1),I(ne))break}else{if(e.position===e.lineStart&&Q(e)||W&&b(M))break;if(C(M))if(ue=e.line,Se=e.lineStart,Te=e.lineIndent,ve(e,!1,-1),e.lineIndent>=B){oe=!0,M=e.input.charCodeAt(e.position);continue}else{e.position=Z,e.line=ue,e.lineStart=Se,e.lineIndent=Te;break}}oe&&(te(e,re,Z,!1),ge(e,e.line-ue),re=Z=e.position,oe=!1),P(M)||(Z=e.position+1),M=e.input.charCodeAt(++e.position)}return te(e,re,Z,!1),e.result?!0:(e.kind=me,e.result=R,!1)}function E(e,B){var W,ne,Y;if(W=e.input.charCodeAt(e.position),W!==39)return!1;for(e.kind="scalar",e.result="",e.position++,ne=Y=e.position;(W=e.input.charCodeAt(e.position))!==0;)if(W===39)if(te(e,ne,e.position,!0),W=e.input.charCodeAt(++e.position),W===39)ne=e.position,e.position++,Y=e.position;else return!0;else C(W)?(te(e,ne,Y,!0),ge(e,ve(e,!1,B)),ne=Y=e.position):e.position===e.lineStart&&Q(e)?D(e,"unexpected end of the document within a single quoted scalar"):(e.position++,Y=e.position);D(e,"unexpected end of the stream within a single quoted scalar")}function H(e,B){var W,ne,Y,re,Z,oe;if(oe=e.input.charCodeAt(e.position),oe!==34)return!1;for(e.kind="scalar",e.result="",e.position++,W=ne=e.position;(oe=e.input.charCodeAt(e.position))!==0;){if(oe===34)return te(e,W,e.position,!0),e.position++,!0;if(oe===92){if(te(e,W,e.position,!0),oe=e.input.charCodeAt(++e.position),C(oe))ve(e,!1,B);else if(oe<256&&x[oe])e.result+=$[oe],e.position++;else if((Z=S(oe))>0){for(Y=Z,re=0;Y>0;Y--)oe=e.input.charCodeAt(++e.position),(Z=O(oe))>=0?re=(re<<4)+Z:D(e,"expected hexadecimal character");e.result+=k(re),e.position++}else D(e,"unknown escape sequence");W=ne=e.position}else C(oe)?(te(e,W,ne,!0),ge(e,ve(e,!1,B)),W=ne=e.position):e.position===e.lineStart&&Q(e)?D(e,"unexpected end of the document within a double quoted scalar"):(e.position++,ne=e.position)}D(e,"unexpected end of the stream within a double quoted scalar")}function F(e,B){var W=!0,ne,Y,re,Z=e.tag,oe,ue=e.anchor,Se,Te,me,R,M,z=Object.create(null),X,K,ae,ee;if(ee=e.input.charCodeAt(e.position),ee===91)Te=93,M=!1,oe=[];else if(ee===123)Te=125,M=!0,oe={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=oe),ee=e.input.charCodeAt(++e.position);ee!==0;){if(ve(e,!0,B),ee=e.input.charCodeAt(e.position),ee===Te)return e.position++,e.tag=Z,e.anchor=ue,e.kind=M?"mapping":"sequence",e.result=oe,!0;W?ee===44&&D(e,"expected the node content, but found ','"):D(e,"missed comma between flow collection entries"),K=X=ae=null,me=R=!1,ee===63&&(Se=e.input.charCodeAt(e.position+1),I(Se)&&(me=R=!0,e.position++,ve(e,!0,B))),ne=e.line,Y=e.lineStart,re=e.position,Ce(e,B,l,!1,!0),K=e.tag,X=e.result,ve(e,!0,B),ee=e.input.charCodeAt(e.position),(R||e.line===ne)&&ee===58&&(me=!0,ee=e.input.charCodeAt(++e.position),ve(e,!0,B),Ce(e,B,l,!1,!0),ae=e.result),M?ie(e,oe,z,K,X,ae,ne,Y,re):me?oe.push(ie(e,null,z,K,X,ae,ne,Y,re)):oe.push(X),ve(e,!0,B),ee=e.input.charCodeAt(e.position),ee===44?(W=!0,ee=e.input.charCodeAt(++e.position)):W=!1}D(e,"unexpected end of the stream within a flow collection")}function ce(e,B){var W,ne,Y=s,re=!1,Z=!1,oe=B,ue=0,Se=!1,Te,me;if(me=e.input.charCodeAt(e.position),me===124)ne=!1;else if(me===62)ne=!0;else return!1;for(e.kind="scalar",e.result="";me!==0;)if(me=e.input.charCodeAt(++e.position),me===43||me===45)s===Y?Y=me===43?r:a:D(e,"repeat of a chomping mode identifier");else if((Te=A(me))>=0)Te===0?D(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?D(e,"repeat of an indentation width identifier"):(oe=B+Te-1,Z=!0);else break;if(P(me)){do me=e.input.charCodeAt(++e.position);while(P(me));if(me===35)do me=e.input.charCodeAt(++e.position);while(!C(me)&&me!==0)}for(;me!==0;){for(we(e),e.lineIndent=0,me=e.input.charCodeAt(e.position);(!Z||e.lineIndent<oe)&&me===32;)e.lineIndent++,me=e.input.charCodeAt(++e.position);if(!Z&&e.lineIndent>oe&&(oe=e.lineIndent),C(me)){ue++;continue}if(e.lineIndent<oe){Y===r?e.result+=t.repeat(`
`,re?1+ue:ue):Y===s&&re&&(e.result+=`
`);break}for(ne?P(me)?(Se=!0,e.result+=t.repeat(`
`,re?1+ue:ue)):Se?(Se=!1,e.result+=t.repeat(`
`,ue+1)):ue===0?re&&(e.result+=" "):e.result+=t.repeat(`
`,ue):e.result+=t.repeat(`
`,re?1+ue:ue),re=!0,Z=!0,ue=0,W=e.position;!C(me)&&me!==0;)me=e.input.charCodeAt(++e.position);te(e,W,e.position,!1)}return!0}function he(e,B){var W,ne=e.tag,Y=e.anchor,re=[],Z,oe=!1,ue;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=re),ue=e.input.charCodeAt(e.position);ue!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,D(e,"tab characters must not be used in indentation")),!(ue!==45||(Z=e.input.charCodeAt(e.position+1),!I(Z))));){if(oe=!0,e.position++,ve(e,!0,-1)&&e.lineIndent<=B){re.push(null),ue=e.input.charCodeAt(e.position);continue}if(W=e.line,Ce(e,B,c,!1,!0),re.push(e.result),ve(e,!0,-1),ue=e.input.charCodeAt(e.position),(e.line===W||e.lineIndent>B)&&ue!==0)D(e,"bad indentation of a sequence entry");else if(e.lineIndent<B)break}return oe?(e.tag=ne,e.anchor=Y,e.kind="sequence",e.result=re,!0):!1}function pe(e,B,W){var ne,Y,re,Z,oe,ue,Se=e.tag,Te=e.anchor,me={},R=Object.create(null),M=null,z=null,X=null,K=!1,ae=!1,ee;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=me),ee=e.input.charCodeAt(e.position);ee!==0;){if(!K&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,D(e,"tab characters must not be used in indentation")),ne=e.input.charCodeAt(e.position+1),re=e.line,(ee===63||ee===58)&&I(ne))ee===63?(K&&(ie(e,me,R,M,z,null,Z,oe,ue),M=z=X=null),ae=!0,K=!0,Y=!0):K?(K=!1,Y=!0):D(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,ee=ne;else{if(Z=e.line,oe=e.lineStart,ue=e.position,!Ce(e,W,n,!1,!0))break;if(e.line===re){for(ee=e.input.charCodeAt(e.position);P(ee);)ee=e.input.charCodeAt(++e.position);if(ee===58)ee=e.input.charCodeAt(++e.position),I(ee)||D(e,"a whitespace character is expected after the key-value separator within a block mapping"),K&&(ie(e,me,R,M,z,null,Z,oe,ue),M=z=X=null),ae=!0,K=!1,Y=!1,M=e.tag,z=e.result;else if(ae)D(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=Se,e.anchor=Te,!0}else if(ae)D(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=Se,e.anchor=Te,!0}if((e.line===re||e.lineIndent>B)&&(K&&(Z=e.line,oe=e.lineStart,ue=e.position),Ce(e,B,o,!0,Y)&&(K?z=e.result:X=e.result),K||(ie(e,me,R,M,z,X,Z,oe,ue),M=z=X=null),ve(e,!0,-1),ee=e.input.charCodeAt(e.position)),(e.line===re||e.lineIndent>B)&&ee!==0)D(e,"bad indentation of a mapping entry");else if(e.lineIndent<B)break}return K&&ie(e,me,R,M,z,null,Z,oe,ue),ae&&(e.tag=Se,e.anchor=Te,e.kind="mapping",e.result=me),ae}function _e(e){var B,W=!1,ne=!1,Y,re,Z;if(Z=e.input.charCodeAt(e.position),Z!==33)return!1;if(e.tag!==null&&D(e,"duplication of a tag property"),Z=e.input.charCodeAt(++e.position),Z===60?(W=!0,Z=e.input.charCodeAt(++e.position)):Z===33?(ne=!0,Y="!!",Z=e.input.charCodeAt(++e.position)):Y="!",B=e.position,W){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&Z!==62);e.position<e.length?(re=e.input.slice(B,e.position),Z=e.input.charCodeAt(++e.position)):D(e,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!I(Z);)Z===33&&(ne?D(e,"tag suffix cannot contain exclamation marks"):(Y=e.input.slice(B-1,e.position+1),y.test(Y)||D(e,"named tag handle cannot contain such characters"),ne=!0,B=e.position+1)),Z=e.input.charCodeAt(++e.position);re=e.input.slice(B,e.position),g.test(re)&&D(e,"tag suffix cannot contain flow indicator characters")}re&&!m.test(re)&&D(e,"tag name cannot contain such characters: "+re);try{re=decodeURIComponent(re)}catch{D(e,"tag name is malformed: "+re)}return W?e.tag=re:u.call(e.tagMap,Y)?e.tag=e.tagMap[Y]+re:Y==="!"?e.tag="!"+re:Y==="!!"?e.tag="tag:yaml.org,2002:"+re:D(e,'undeclared tag handle "'+Y+'"'),!0}function Ee(e){var B,W;if(W=e.input.charCodeAt(e.position),W!==38)return!1;for(e.anchor!==null&&D(e,"duplication of an anchor property"),W=e.input.charCodeAt(++e.position),B=e.position;W!==0&&!I(W)&&!b(W);)W=e.input.charCodeAt(++e.position);return e.position===B&&D(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(B,e.position),!0}function Ve(e){var B,W,ne;if(ne=e.input.charCodeAt(e.position),ne!==42)return!1;for(ne=e.input.charCodeAt(++e.position),B=e.position;ne!==0&&!I(ne)&&!b(ne);)ne=e.input.charCodeAt(++e.position);return e.position===B&&D(e,"name of an alias node must contain at least one character"),W=e.input.slice(B,e.position),u.call(e.anchorMap,W)||D(e,'unidentified alias "'+W+'"'),e.result=e.anchorMap[W],ve(e,!0,-1),!0}function Ce(e,B,W,ne,Y){var re,Z,oe,ue=1,Se=!1,Te=!1,me,R,M,z,X,K;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,re=Z=oe=o===W||c===W,ne&&ve(e,!0,-1)&&(Se=!0,e.lineIndent>B?ue=1:e.lineIndent===B?ue=0:e.lineIndent<B&&(ue=-1)),ue===1)for(;_e(e)||Ee(e);)ve(e,!0,-1)?(Se=!0,oe=re,e.lineIndent>B?ue=1:e.lineIndent===B?ue=0:e.lineIndent<B&&(ue=-1)):oe=!1;if(oe&&(oe=Se||Y),(ue===1||o===W)&&(l===W||n===W?X=B:X=B+1,K=e.position-e.lineStart,ue===1?oe&&(he(e,K)||pe(e,K,X))||F(e,X)?Te=!0:(Z&&ce(e,X)||E(e,X)||H(e,X)?Te=!0:Ve(e)?(Te=!0,(e.tag!==null||e.anchor!==null)&&D(e,"alias node should not have any properties")):_(e,X,l===W)&&(Te=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ue===0&&(Te=oe&&he(e,K))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&D(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),me=0,R=e.implicitTypes.length;me<R;me+=1)if(z=e.implicitTypes[me],z.resolve(e.result)){e.result=z.construct(e.result),e.tag=z.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(u.call(e.typeMap[e.kind||"fallback"],e.tag))z=e.typeMap[e.kind||"fallback"][e.tag];else for(z=null,M=e.typeMap.multi[e.kind||"fallback"],me=0,R=M.length;me<R;me+=1)if(e.tag.slice(0,M[me].tag.length)===M[me].tag){z=M[me];break}z||D(e,"unknown tag !<"+e.tag+">"),e.result!==null&&z.kind!==e.kind&&D(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+z.kind+'", not "'+e.kind+'"'),z.resolve(e.result,e.tag)?(e.result=z.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):D(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||Te}function je(e){var B=e.position,W,ne,Y,re=!1,Z;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(Z=e.input.charCodeAt(e.position))!==0&&(ve(e,!0,-1),Z=e.input.charCodeAt(e.position),!(e.lineIndent>0||Z!==37));){for(re=!0,Z=e.input.charCodeAt(++e.position),W=e.position;Z!==0&&!I(Z);)Z=e.input.charCodeAt(++e.position);for(ne=e.input.slice(W,e.position),Y=[],ne.length<1&&D(e,"directive name must not be less than one character in length");Z!==0;){for(;P(Z);)Z=e.input.charCodeAt(++e.position);if(Z===35){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&!C(Z));break}if(C(Z))break;for(W=e.position;Z!==0&&!I(Z);)Z=e.input.charCodeAt(++e.position);Y.push(e.input.slice(W,e.position))}Z!==0&&we(e),u.call(V,ne)?V[ne](e,ne,Y):G(e,'unknown document directive "'+ne+'"')}if(ve(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ve(e,!0,-1)):re&&D(e,"directives end mark is expected"),Ce(e,e.lineIndent-1,o,!1,!0),ve(e,!0,-1),e.checkLineBreaks&&h.test(e.input.slice(B,e.position))&&G(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Q(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ve(e,!0,-1));return}if(e.position<e.length-1)D(e,"end of the stream or a document separator is expected");else return}function ht(e,B){e=String(e),B=B||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var W=new N(e,B),ne=e.indexOf("\0");for(ne!==-1&&(W.position=ne,D(W,"null byte is not allowed in input")),W.input+="\0";W.input.charCodeAt(W.position)===32;)W.lineIndent+=1,W.position+=1;for(;W.position<W.length-1;)je(W);return W.documents}function lt(e,B,W){B!==null&&typeof B=="object"&&typeof W>"u"&&(W=B,B=null);var ne=ht(e,W);if(typeof B!="function")return ne;for(var Y=0,re=ne.length;Y<re;Y+=1)B(ne[Y])}function ot(e,B){var W=ht(e,B);if(W.length!==0){if(W.length===1)return W[0];throw new d("expected a single document in the stream, but found more")}}return qr.loadAll=lt,qr.load=ot,qr}var si={},Zo;function Zc(){if(Zo)return si;Zo=1;var t=wr(),d=_r(),p=sa(),f=Object.prototype.toString,u=Object.prototype.hasOwnProperty,l=65279,n=9,c=10,o=13,s=32,a=33,r=34,i=35,h=37,g=38,y=39,m=42,w=44,C=45,P=58,I=61,b=62,O=63,S=64,A=91,v=93,k=96,q=123,x=124,$=125,L={};L[0]="\\0",L[7]="\\a",L[8]="\\b",L[9]="\\t",L[10]="\\n",L[11]="\\v",L[12]="\\f",L[13]="\\r",L[27]="\\e",L[34]='\\"',L[92]="\\\\",L[133]="\\N",L[160]="\\_",L[8232]="\\L",L[8233]="\\P";var N=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],j=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function D(R,M){var z,X,K,ae,ee,se,fe;if(M===null)return{};for(z={},X=Object.keys(M),K=0,ae=X.length;K<ae;K+=1)ee=X[K],se=String(M[ee]),ee.slice(0,2)==="!!"&&(ee="tag:yaml.org,2002:"+ee.slice(2)),fe=R.compiledTypeMap.fallback[ee],fe&&u.call(fe.styleAliases,se)&&(se=fe.styleAliases[se]),z[ee]=se;return z}function G(R){var M,z,X;if(M=R.toString(16).toUpperCase(),R<=255)z="x",X=2;else if(R<=65535)z="u",X=4;else if(R<=4294967295)z="U",X=8;else throw new d("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+z+t.repeat("0",X-M.length)+M}var V=1,te=2;function de(R){this.schema=R.schema||p,this.indent=Math.max(1,R.indent||2),this.noArrayIndent=R.noArrayIndent||!1,this.skipInvalid=R.skipInvalid||!1,this.flowLevel=t.isNothing(R.flowLevel)?-1:R.flowLevel,this.styleMap=D(this.schema,R.styles||null),this.sortKeys=R.sortKeys||!1,this.lineWidth=R.lineWidth||80,this.noRefs=R.noRefs||!1,this.noCompatMode=R.noCompatMode||!1,this.condenseFlow=R.condenseFlow||!1,this.quotingType=R.quotingType==='"'?te:V,this.forceQuotes=R.forceQuotes||!1,this.replacer=typeof R.replacer=="function"?R.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ie(R,M){for(var z=t.repeat(" ",M),X=0,K=-1,ae="",ee,se=R.length;X<se;)K=R.indexOf(`
`,X),K===-1?(ee=R.slice(X),X=se):(ee=R.slice(X,K+1),X=K+1),ee.length&&ee!==`
`&&(ae+=z),ae+=ee;return ae}function we(R,M){return`
`+t.repeat(" ",R.indent*M)}function ve(R,M){var z,X,K;for(z=0,X=R.implicitTypes.length;z<X;z+=1)if(K=R.implicitTypes[z],K.resolve(M))return!0;return!1}function Q(R){return R===s||R===n}function ge(R){return 32<=R&&R<=126||161<=R&&R<=55295&&R!==8232&&R!==8233||57344<=R&&R<=65533&&R!==l||65536<=R&&R<=1114111}function _(R){return ge(R)&&R!==l&&R!==o&&R!==c}function E(R,M,z){var X=_(R),K=X&&!Q(R);return(z?X:X&&R!==w&&R!==A&&R!==v&&R!==q&&R!==$)&&R!==i&&!(M===P&&!K)||_(M)&&!Q(M)&&R===i||M===P&&K}function H(R){return ge(R)&&R!==l&&!Q(R)&&R!==C&&R!==O&&R!==P&&R!==w&&R!==A&&R!==v&&R!==q&&R!==$&&R!==i&&R!==g&&R!==m&&R!==a&&R!==x&&R!==I&&R!==b&&R!==y&&R!==r&&R!==h&&R!==S&&R!==k}function F(R){return!Q(R)&&R!==P}function ce(R,M){var z=R.charCodeAt(M),X;return z>=55296&&z<=56319&&M+1<R.length&&(X=R.charCodeAt(M+1),X>=56320&&X<=57343)?(z-55296)*1024+X-56320+65536:z}function he(R){var M=/^\n* /;return M.test(R)}var pe=1,_e=2,Ee=3,Ve=4,Ce=5;function je(R,M,z,X,K,ae,ee,se){var fe,ye=0,Oe=null,Le=!1,be=!1,Lt=X!==-1,et=-1,_t=H(ce(R,0))&&F(ce(R,R.length-1));if(M||ee)for(fe=0;fe<R.length;ye>=65536?fe+=2:fe++){if(ye=ce(R,fe),!ge(ye))return Ce;_t=_t&&E(ye,Oe,se),Oe=ye}else{for(fe=0;fe<R.length;ye>=65536?fe+=2:fe++){if(ye=ce(R,fe),ye===c)Le=!0,Lt&&(be=be||fe-et-1>X&&R[et+1]!==" ",et=fe);else if(!ge(ye))return Ce;_t=_t&&E(ye,Oe,se),Oe=ye}be=be||Lt&&fe-et-1>X&&R[et+1]!==" "}return!Le&&!be?_t&&!ee&&!K(R)?pe:ae===te?Ce:_e:z>9&&he(R)?Ce:ee?ae===te?Ce:_e:be?Ve:Ee}function ht(R,M,z,X,K){R.dump=(function(){if(M.length===0)return R.quotingType===te?'""':"''";if(!R.noCompatMode&&(N.indexOf(M)!==-1||j.test(M)))return R.quotingType===te?'"'+M+'"':"'"+M+"'";var ae=R.indent*Math.max(1,z),ee=R.lineWidth===-1?-1:Math.max(Math.min(R.lineWidth,40),R.lineWidth-ae),se=X||R.flowLevel>-1&&z>=R.flowLevel;function fe(ye){return ve(R,ye)}switch(je(M,se,R.indent,ee,fe,R.quotingType,R.forceQuotes&&!X,K)){case pe:return M;case _e:return"'"+M.replace(/'/g,"''")+"'";case Ee:return"|"+lt(M,R.indent)+ot(ie(M,ae));case Ve:return">"+lt(M,R.indent)+ot(ie(e(M,ee),ae));case Ce:return'"'+W(M)+'"';default:throw new d("impossible error: invalid scalar style")}})()}function lt(R,M){var z=he(R)?String(M):"",X=R[R.length-1]===`
`,K=X&&(R[R.length-2]===`
`||R===`
`),ae=K?"+":X?"":"-";return z+ae+`
`}function ot(R){return R[R.length-1]===`
`?R.slice(0,-1):R}function e(R,M){for(var z=/(\n+)([^\n]*)/g,X=(function(){var ye=R.indexOf(`
`);return ye=ye!==-1?ye:R.length,z.lastIndex=ye,B(R.slice(0,ye),M)})(),K=R[0]===`
`||R[0]===" ",ae,ee;ee=z.exec(R);){var se=ee[1],fe=ee[2];ae=fe[0]===" ",X+=se+(!K&&!ae&&fe!==""?`
`:"")+B(fe,M),K=ae}return X}function B(R,M){if(R===""||R[0]===" ")return R;for(var z=/ [^ ]/g,X,K=0,ae,ee=0,se=0,fe="";X=z.exec(R);)se=X.index,se-K>M&&(ae=ee>K?ee:se,fe+=`
`+R.slice(K,ae),K=ae+1),ee=se;return fe+=`
`,R.length-K>M&&ee>K?fe+=R.slice(K,ee)+`
`+R.slice(ee+1):fe+=R.slice(K),fe.slice(1)}function W(R){for(var M="",z=0,X,K=0;K<R.length;z>=65536?K+=2:K++)z=ce(R,K),X=L[z],!X&&ge(z)?(M+=R[K],z>=65536&&(M+=R[K+1])):M+=X||G(z);return M}function ne(R,M,z){var X="",K=R.tag,ae,ee,se;for(ae=0,ee=z.length;ae<ee;ae+=1)se=z[ae],R.replacer&&(se=R.replacer.call(z,String(ae),se)),(ue(R,M,se,!1,!1)||typeof se>"u"&&ue(R,M,null,!1,!1))&&(X!==""&&(X+=","+(R.condenseFlow?"":" ")),X+=R.dump);R.tag=K,R.dump="["+X+"]"}function Y(R,M,z,X){var K="",ae=R.tag,ee,se,fe;for(ee=0,se=z.length;ee<se;ee+=1)fe=z[ee],R.replacer&&(fe=R.replacer.call(z,String(ee),fe)),(ue(R,M+1,fe,!0,!0,!1,!0)||typeof fe>"u"&&ue(R,M+1,null,!0,!0,!1,!0))&&((!X||K!=="")&&(K+=we(R,M)),R.dump&&c===R.dump.charCodeAt(0)?K+="-":K+="- ",K+=R.dump);R.tag=ae,R.dump=K||"[]"}function re(R,M,z){var X="",K=R.tag,ae=Object.keys(z),ee,se,fe,ye,Oe;for(ee=0,se=ae.length;ee<se;ee+=1)Oe="",X!==""&&(Oe+=", "),R.condenseFlow&&(Oe+='"'),fe=ae[ee],ye=z[fe],R.replacer&&(ye=R.replacer.call(z,fe,ye)),ue(R,M,fe,!1,!1)&&(R.dump.length>1024&&(Oe+="? "),Oe+=R.dump+(R.condenseFlow?'"':"")+":"+(R.condenseFlow?"":" "),ue(R,M,ye,!1,!1)&&(Oe+=R.dump,X+=Oe));R.tag=K,R.dump="{"+X+"}"}function Z(R,M,z,X){var K="",ae=R.tag,ee=Object.keys(z),se,fe,ye,Oe,Le,be;if(R.sortKeys===!0)ee.sort();else if(typeof R.sortKeys=="function")ee.sort(R.sortKeys);else if(R.sortKeys)throw new d("sortKeys must be a boolean or a function");for(se=0,fe=ee.length;se<fe;se+=1)be="",(!X||K!=="")&&(be+=we(R,M)),ye=ee[se],Oe=z[ye],R.replacer&&(Oe=R.replacer.call(z,ye,Oe)),ue(R,M+1,ye,!0,!0,!0)&&(Le=R.tag!==null&&R.tag!=="?"||R.dump&&R.dump.length>1024,Le&&(R.dump&&c===R.dump.charCodeAt(0)?be+="?":be+="? "),be+=R.dump,Le&&(be+=we(R,M)),ue(R,M+1,Oe,!0,Le)&&(R.dump&&c===R.dump.charCodeAt(0)?be+=":":be+=": ",be+=R.dump,K+=be));R.tag=ae,R.dump=K||"{}"}function oe(R,M,z){var X,K,ae,ee,se,fe;for(K=z?R.explicitTypes:R.implicitTypes,ae=0,ee=K.length;ae<ee;ae+=1)if(se=K[ae],(se.instanceOf||se.predicate)&&(!se.instanceOf||typeof M=="object"&&M instanceof se.instanceOf)&&(!se.predicate||se.predicate(M))){if(z?se.multi&&se.representName?R.tag=se.representName(M):R.tag=se.tag:R.tag="?",se.represent){if(fe=R.styleMap[se.tag]||se.defaultStyle,f.call(se.represent)==="[object Function]")X=se.represent(M,fe);else if(u.call(se.represent,fe))X=se.represent[fe](M,fe);else throw new d("!<"+se.tag+'> tag resolver accepts not "'+fe+'" style');R.dump=X}return!0}return!1}function ue(R,M,z,X,K,ae,ee){R.tag=null,R.dump=z,oe(R,z,!1)||oe(R,z,!0);var se=f.call(R.dump),fe=X,ye;X&&(X=R.flowLevel<0||R.flowLevel>M);var Oe=se==="[object Object]"||se==="[object Array]",Le,be;if(Oe&&(Le=R.duplicates.indexOf(z),be=Le!==-1),(R.tag!==null&&R.tag!=="?"||be||R.indent!==2&&M>0)&&(K=!1),be&&R.usedDuplicates[Le])R.dump="*ref_"+Le;else{if(Oe&&be&&!R.usedDuplicates[Le]&&(R.usedDuplicates[Le]=!0),se==="[object Object]")X&&Object.keys(R.dump).length!==0?(Z(R,M,R.dump,K),be&&(R.dump="&ref_"+Le+R.dump)):(re(R,M,R.dump),be&&(R.dump="&ref_"+Le+" "+R.dump));else if(se==="[object Array]")X&&R.dump.length!==0?(R.noArrayIndent&&!ee&&M>0?Y(R,M-1,R.dump,K):Y(R,M,R.dump,K),be&&(R.dump="&ref_"+Le+R.dump)):(ne(R,M,R.dump),be&&(R.dump="&ref_"+Le+" "+R.dump));else if(se==="[object String]")R.tag!=="?"&&ht(R,R.dump,M,ae,fe);else{if(se==="[object Undefined]")return!1;if(R.skipInvalid)return!1;throw new d("unacceptable kind of an object to dump "+se)}R.tag!==null&&R.tag!=="?"&&(ye=encodeURI(R.tag[0]==="!"?R.tag.slice(1):R.tag).replace(/!/g,"%21"),R.tag[0]==="!"?ye="!"+ye:ye.slice(0,18)==="tag:yaml.org,2002:"?ye="!!"+ye.slice(18):ye="!<"+ye+">",R.dump=ye+" "+R.dump)}return!0}function Se(R,M){var z=[],X=[],K,ae;for(Te(R,z,X),K=0,ae=X.length;K<ae;K+=1)M.duplicates.push(z[X[K]]);M.usedDuplicates=new Array(ae)}function Te(R,M,z){var X,K,ae;if(R!==null&&typeof R=="object")if(K=M.indexOf(R),K!==-1)z.indexOf(K)===-1&&z.push(K);else if(M.push(R),Array.isArray(R))for(K=0,ae=R.length;K<ae;K+=1)Te(R[K],M,z);else for(X=Object.keys(R),K=0,ae=X.length;K<ae;K+=1)Te(R[X[K]],M,z)}function me(R,M){M=M||{};var z=new de(M);z.noRefs||Se(R,z);var X=R;return z.replacer&&(X=z.replacer.call({"":X},"",X)),ue(z,0,X,!0,!0)?z.dump+`
`:""}return si.dump=me,si}var es;function la(){if(es)return Be;es=1;var t=Qc(),d=Zc();function p(f,u){return function(){throw new Error("Function yaml."+f+" is removed in js-yaml 4. Use yaml."+u+" instead, which is now safe by default.")}}return Be.Type=Ge(),Be.Schema=Ml(),Be.FAILSAFE_SCHEMA=Gl(),Be.JSON_SCHEMA=Xl(),Be.CORE_SCHEMA=Kl(),Be.DEFAULT_SCHEMA=sa(),Be.load=t.load,Be.loadAll=t.loadAll,Be.dump=d.dump,Be.YAMLException=_r(),Be.types={binary:Zl(),float:zl(),map:jl(),null:Wl(),pairs:tu(),set:ru(),timestamp:Jl(),bool:Vl(),int:Yl(),merge:Ql(),omap:eu(),seq:Hl(),str:Bl()},Be.safeLoad=p("safeLoad","load"),Be.safeLoadAll=p("safeLoadAll","loadAll"),Be.safeDump=p("safeDump","dump"),Be}var Kt={},ts;function ef(){if(ts)return Kt;ts=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.Lazy=void 0;class t{constructor(p){this._value=null,this.creator=p}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const p=this.creator();return this.value=p,p}set value(p){this._value=p,this.creator=null}}return Kt.Lazy=t,Kt}var $r={exports:{}},li,rs;function Yr(){if(rs)return li;rs=1;const t="2.0.0",d=256,p=Number.MAX_SAFE_INTEGER||9007199254740991,f=16,u=d-6;return li={MAX_LENGTH:d,MAX_SAFE_COMPONENT_LENGTH:f,MAX_SAFE_BUILD_LENGTH:u,MAX_SAFE_INTEGER:p,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},li}var ui,ns;function zr(){return ns||(ns=1,ui=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...d)=>console.error("SEMVER",...d):()=>{}),ui}var is;function Rr(){return is||(is=1,(function(t,d){const{MAX_SAFE_COMPONENT_LENGTH:p,MAX_SAFE_BUILD_LENGTH:f,MAX_LENGTH:u}=Yr(),l=zr();d=t.exports={};const n=d.re=[],c=d.safeRe=[],o=d.src=[],s=d.safeSrc=[],a=d.t={};let r=0;const i="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",u],[i,f]],g=m=>{for(const[w,C]of h)m=m.split(`${w}*`).join(`${w}{0,${C}}`).split(`${w}+`).join(`${w}{1,${C}}`);return m},y=(m,w,C)=>{const P=g(w),I=r++;l(m,I,w),a[m]=I,o[I]=w,s[I]=P,n[I]=new RegExp(w,C?"g":void 0),c[I]=new RegExp(P,C?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${i}*`),y("MAINVERSION",`(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${o[a.NONNUMERICIDENTIFIER]}|${o[a.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${o[a.NONNUMERICIDENTIFIER]}|${o[a.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${o[a.PRERELEASEIDENTIFIER]}(?:\\.${o[a.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${o[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[a.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${i}+`),y("BUILD",`(?:\\+(${o[a.BUILDIDENTIFIER]}(?:\\.${o[a.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${o[a.MAINVERSION]}${o[a.PRERELEASE]}?${o[a.BUILD]}?`),y("FULL",`^${o[a.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${o[a.MAINVERSIONLOOSE]}${o[a.PRERELEASELOOSE]}?${o[a.BUILD]}?`),y("LOOSE",`^${o[a.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${o[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${o[a.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:${o[a.PRERELEASE]})?${o[a.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:${o[a.PRERELEASELOOSE]})?${o[a.BUILD]}?)?)?`),y("XRANGE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${p}})(?:\\.(\\d{1,${p}}))?(?:\\.(\\d{1,${p}}))?`),y("COERCE",`${o[a.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",o[a.COERCEPLAIN]+`(?:${o[a.PRERELEASE]})?(?:${o[a.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",o[a.COERCE],!0),y("COERCERTLFULL",o[a.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${o[a.LONETILDE]}\\s+`,!0),d.tildeTrimReplace="$1~",y("TILDE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${o[a.LONECARET]}\\s+`,!0),d.caretTrimReplace="$1^",y("CARET",`^${o[a.LONECARET]}${o[a.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${o[a.LONECARET]}${o[a.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${o[a.GTLT]}\\s*(${o[a.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]}|${o[a.XRANGEPLAIN]})`,!0),d.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${o[a.XRANGEPLAIN]})\\s+-\\s+(${o[a.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${o[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[a.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})($r,$r.exports)),$r.exports}var ci,as;function ua(){if(as)return ci;as=1;const t=Object.freeze({loose:!0}),d=Object.freeze({});return ci=f=>f?typeof f!="object"?t:f:d,ci}var fi,os;function nu(){if(os)return fi;os=1;const t=/^[0-9]+$/,d=(f,u)=>{if(typeof f=="number"&&typeof u=="number")return f===u?0:f<u?-1:1;const l=t.test(f),n=t.test(u);return l&&n&&(f=+f,u=+u),f===u?0:l&&!n?-1:n&&!l?1:f<u?-1:1};return fi={compareIdentifiers:d,rcompareIdentifiers:(f,u)=>d(u,f)},fi}var di,ss;function We(){if(ss)return di;ss=1;const t=zr(),{MAX_LENGTH:d,MAX_SAFE_INTEGER:p}=Yr(),{safeRe:f,t:u}=Rr(),l=ua(),{compareIdentifiers:n}=nu();class c{constructor(s,a){if(a=l(a),s instanceof c){if(s.loose===!!a.loose&&s.includePrerelease===!!a.includePrerelease)return s;s=s.version}else if(typeof s!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>d)throw new TypeError(`version is longer than ${d} characters`);t("SemVer",s,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;const r=s.trim().match(a.loose?f[u.LOOSE]:f[u.FULL]);if(!r)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>p||this.major<0)throw new TypeError("Invalid major version");if(this.minor>p||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>p||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const h=+i;if(h>=0&&h<p)return h}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(s){if(t("SemVer.compare",this.version,this.options,s),!(s instanceof c)){if(typeof s=="string"&&s===this.version)return 0;s=new c(s,this.options)}return s.version===this.version?0:this.compareMain(s)||this.comparePre(s)}compareMain(s){return s instanceof c||(s=new c(s,this.options)),this.major<s.major?-1:this.major>s.major?1:this.minor<s.minor?-1:this.minor>s.minor?1:this.patch<s.patch?-1:this.patch>s.patch?1:0}comparePre(s){if(s instanceof c||(s=new c(s,this.options)),this.prerelease.length&&!s.prerelease.length)return-1;if(!this.prerelease.length&&s.prerelease.length)return 1;if(!this.prerelease.length&&!s.prerelease.length)return 0;let a=0;do{const r=this.prerelease[a],i=s.prerelease[a];if(t("prerelease compare",a,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return n(r,i)}while(++a)}compareBuild(s){s instanceof c||(s=new c(s,this.options));let a=0;do{const r=this.build[a],i=s.build[a];if(t("build compare",a,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return n(r,i)}while(++a)}inc(s,a,r){if(s.startsWith("pre")){if(!a&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(a){const i=`-${a}`.match(this.options.loose?f[u.PRERELEASELOOSE]:f[u.PRERELEASE]);if(!i||i[1]!==a)throw new Error(`invalid identifier: ${a}`)}}switch(s){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",a,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",a,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",a,r),this.inc("pre",a,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",a,r),this.inc("pre",a,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(a===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(a){let h=[a,i];r===!1&&(h=[a]),n(this.prerelease[0],a)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${s}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return di=c,di}var hi,ls;function Gt(){if(ls)return hi;ls=1;const t=We();return hi=(p,f,u=!1)=>{if(p instanceof t)return p;try{return new t(p,f)}catch(l){if(!u)return null;throw l}},hi}var pi,us;function tf(){if(us)return pi;us=1;const t=Gt();return pi=(p,f)=>{const u=t(p,f);return u?u.version:null},pi}var mi,cs;function rf(){if(cs)return mi;cs=1;const t=Gt();return mi=(p,f)=>{const u=t(p.trim().replace(/^[=v]+/,""),f);return u?u.version:null},mi}var gi,fs;function nf(){if(fs)return gi;fs=1;const t=We();return gi=(p,f,u,l,n)=>{typeof u=="string"&&(n=l,l=u,u=void 0);try{return new t(p instanceof t?p.version:p,u).inc(f,l,n).version}catch{return null}},gi}var vi,ds;function af(){if(ds)return vi;ds=1;const t=Gt();return vi=(p,f)=>{const u=t(p,null,!0),l=t(f,null,!0),n=u.compare(l);if(n===0)return null;const c=n>0,o=c?u:l,s=c?l:u,a=!!o.prerelease.length;if(!!s.prerelease.length&&!a){if(!s.patch&&!s.minor)return"major";if(s.compareMain(o)===0)return s.minor&&!s.patch?"minor":"patch"}const i=a?"pre":"";return u.major!==l.major?i+"major":u.minor!==l.minor?i+"minor":u.patch!==l.patch?i+"patch":"prerelease"},vi}var Ei,hs;function of(){if(hs)return Ei;hs=1;const t=We();return Ei=(p,f)=>new t(p,f).major,Ei}var yi,ps;function sf(){if(ps)return yi;ps=1;const t=We();return yi=(p,f)=>new t(p,f).minor,yi}var wi,ms;function lf(){if(ms)return wi;ms=1;const t=We();return wi=(p,f)=>new t(p,f).patch,wi}var _i,gs;function uf(){if(gs)return _i;gs=1;const t=Gt();return _i=(p,f)=>{const u=t(p,f);return u&&u.prerelease.length?u.prerelease:null},_i}var Ri,vs;function it(){if(vs)return Ri;vs=1;const t=We();return Ri=(p,f,u)=>new t(p,u).compare(new t(f,u)),Ri}var Ai,Es;function cf(){if(Es)return Ai;Es=1;const t=it();return Ai=(p,f,u)=>t(f,p,u),Ai}var Ci,ys;function ff(){if(ys)return Ci;ys=1;const t=it();return Ci=(p,f)=>t(p,f,!0),Ci}var Si,ws;function ca(){if(ws)return Si;ws=1;const t=We();return Si=(p,f,u)=>{const l=new t(p,u),n=new t(f,u);return l.compare(n)||l.compareBuild(n)},Si}var Ti,_s;function df(){if(_s)return Ti;_s=1;const t=ca();return Ti=(p,f)=>p.sort((u,l)=>t(u,l,f)),Ti}var bi,Rs;function hf(){if(Rs)return bi;Rs=1;const t=ca();return bi=(p,f)=>p.sort((u,l)=>t(l,u,f)),bi}var Pi,As;function Xr(){if(As)return Pi;As=1;const t=it();return Pi=(p,f,u)=>t(p,f,u)>0,Pi}var Oi,Cs;function fa(){if(Cs)return Oi;Cs=1;const t=it();return Oi=(p,f,u)=>t(p,f,u)<0,Oi}var Ii,Ss;function iu(){if(Ss)return Ii;Ss=1;const t=it();return Ii=(p,f,u)=>t(p,f,u)===0,Ii}var Di,Ts;function au(){if(Ts)return Di;Ts=1;const t=it();return Di=(p,f,u)=>t(p,f,u)!==0,Di}var Ni,bs;function da(){if(bs)return Ni;bs=1;const t=it();return Ni=(p,f,u)=>t(p,f,u)>=0,Ni}var Fi,Ps;function ha(){if(Ps)return Fi;Ps=1;const t=it();return Fi=(p,f,u)=>t(p,f,u)<=0,Fi}var Li,Os;function ou(){if(Os)return Li;Os=1;const t=iu(),d=au(),p=Xr(),f=da(),u=fa(),l=ha();return Li=(c,o,s,a)=>{switch(o){case"===":return typeof c=="object"&&(c=c.version),typeof s=="object"&&(s=s.version),c===s;case"!==":return typeof c=="object"&&(c=c.version),typeof s=="object"&&(s=s.version),c!==s;case"":case"=":case"==":return t(c,s,a);case"!=":return d(c,s,a);case">":return p(c,s,a);case">=":return f(c,s,a);case"<":return u(c,s,a);case"<=":return l(c,s,a);default:throw new TypeError(`Invalid operator: ${o}`)}},Li}var xi,Is;function pf(){if(Is)return xi;Is=1;const t=We(),d=Gt(),{safeRe:p,t:f}=Rr();return xi=(l,n)=>{if(l instanceof t)return l;if(typeof l=="number"&&(l=String(l)),typeof l!="string")return null;n=n||{};let c=null;if(!n.rtl)c=l.match(n.includePrerelease?p[f.COERCEFULL]:p[f.COERCE]);else{const h=n.includePrerelease?p[f.COERCERTLFULL]:p[f.COERCERTL];let g;for(;(g=h.exec(l))&&(!c||c.index+c[0].length!==l.length);)(!c||g.index+g[0].length!==c.index+c[0].length)&&(c=g),h.lastIndex=g.index+g[1].length+g[2].length;h.lastIndex=-1}if(c===null)return null;const o=c[2],s=c[3]||"0",a=c[4]||"0",r=n.includePrerelease&&c[5]?`-${c[5]}`:"",i=n.includePrerelease&&c[6]?`+${c[6]}`:"";return d(`${o}.${s}.${a}${r}${i}`,n)},xi}var Ui,Ds;function mf(){if(Ds)return Ui;Ds=1;class t{constructor(){this.max=1e3,this.map=new Map}get(p){const f=this.map.get(p);if(f!==void 0)return this.map.delete(p),this.map.set(p,f),f}delete(p){return this.map.delete(p)}set(p,f){if(!this.delete(p)&&f!==void 0){if(this.map.size>=this.max){const l=this.map.keys().next().value;this.delete(l)}this.map.set(p,f)}return this}}return Ui=t,Ui}var ki,Ns;function at(){if(Ns)return ki;Ns=1;const t=/\s+/g;class d{constructor(N,j){if(j=u(j),N instanceof d)return N.loose===!!j.loose&&N.includePrerelease===!!j.includePrerelease?N:new d(N.raw,j);if(N instanceof l)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=N.trim().replace(t," "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(G=>!y(G[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const j=this.set[N];for(let D=0;D<j.length;D++)D>0&&(this.formatted+=" "),this.formatted+=j[D].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const D=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+N,G=f.get(D);if(G)return G;const V=this.options.loose,te=V?o[s.HYPHENRANGELOOSE]:o[s.HYPHENRANGE];N=N.replace(te,x(this.options.includePrerelease)),n("hyphen replace",N),N=N.replace(o[s.COMPARATORTRIM],a),n("comparator trim",N),N=N.replace(o[s.TILDETRIM],r),n("tilde trim",N),N=N.replace(o[s.CARETTRIM],i),n("caret trim",N);let de=N.split(" ").map(Q=>C(Q,this.options)).join(" ").split(/\s+/).map(Q=>q(Q,this.options));V&&(de=de.filter(Q=>(n("loose invalid filter",Q,this.options),!!Q.match(o[s.COMPARATORLOOSE])))),n("range list",de);const ie=new Map,we=de.map(Q=>new l(Q,this.options));for(const Q of we){if(y(Q))return[Q];ie.set(Q.value,Q)}ie.size>1&&ie.has("")&&ie.delete("");const ve=[...ie.values()];return f.set(D,ve),ve}intersects(N,j){if(!(N instanceof d))throw new TypeError("a Range is required");return this.set.some(D=>w(D,j)&&N.set.some(G=>w(G,j)&&D.every(V=>G.every(te=>V.intersects(te,j)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new c(N,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if($(this.set[j],N,this.options))return!0;return!1}}ki=d;const p=mf(),f=new p,u=ua(),l=Kr(),n=zr(),c=We(),{safeRe:o,t:s,comparatorTrimReplace:a,tildeTrimReplace:r,caretTrimReplace:i}=Rr(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=Yr(),y=L=>L.value==="<0.0.0-0",m=L=>L.value==="",w=(L,N)=>{let j=!0;const D=L.slice();let G=D.pop();for(;j&&D.length;)j=D.every(V=>G.intersects(V,N)),G=D.pop();return j},C=(L,N)=>(L=L.replace(o[s.BUILD],""),n("comp",L,N),L=O(L,N),n("caret",L),L=I(L,N),n("tildes",L),L=A(L,N),n("xrange",L),L=k(L,N),n("stars",L),L),P=L=>!L||L.toLowerCase()==="x"||L==="*",I=(L,N)=>L.trim().split(/\s+/).map(j=>b(j,N)).join(" "),b=(L,N)=>{const j=N.loose?o[s.TILDELOOSE]:o[s.TILDE];return L.replace(j,(D,G,V,te,de)=>{n("tilde",L,D,G,V,te,de);let ie;return P(G)?ie="":P(V)?ie=`>=${G}.0.0 <${+G+1}.0.0-0`:P(te)?ie=`>=${G}.${V}.0 <${G}.${+V+1}.0-0`:de?(n("replaceTilde pr",de),ie=`>=${G}.${V}.${te}-${de} <${G}.${+V+1}.0-0`):ie=`>=${G}.${V}.${te} <${G}.${+V+1}.0-0`,n("tilde return",ie),ie})},O=(L,N)=>L.trim().split(/\s+/).map(j=>S(j,N)).join(" "),S=(L,N)=>{n("caret",L,N);const j=N.loose?o[s.CARETLOOSE]:o[s.CARET],D=N.includePrerelease?"-0":"";return L.replace(j,(G,V,te,de,ie)=>{n("caret",L,G,V,te,de,ie);let we;return P(V)?we="":P(te)?we=`>=${V}.0.0${D} <${+V+1}.0.0-0`:P(de)?V==="0"?we=`>=${V}.${te}.0${D} <${V}.${+te+1}.0-0`:we=`>=${V}.${te}.0${D} <${+V+1}.0.0-0`:ie?(n("replaceCaret pr",ie),V==="0"?te==="0"?we=`>=${V}.${te}.${de}-${ie} <${V}.${te}.${+de+1}-0`:we=`>=${V}.${te}.${de}-${ie} <${V}.${+te+1}.0-0`:we=`>=${V}.${te}.${de}-${ie} <${+V+1}.0.0-0`):(n("no pr"),V==="0"?te==="0"?we=`>=${V}.${te}.${de}${D} <${V}.${te}.${+de+1}-0`:we=`>=${V}.${te}.${de}${D} <${V}.${+te+1}.0-0`:we=`>=${V}.${te}.${de} <${+V+1}.0.0-0`),n("caret return",we),we})},A=(L,N)=>(n("replaceXRanges",L,N),L.split(/\s+/).map(j=>v(j,N)).join(" ")),v=(L,N)=>{L=L.trim();const j=N.loose?o[s.XRANGELOOSE]:o[s.XRANGE];return L.replace(j,(D,G,V,te,de,ie)=>{n("xRange",L,D,G,V,te,de,ie);const we=P(V),ve=we||P(te),Q=ve||P(de),ge=Q;return G==="="&&ge&&(G=""),ie=N.includePrerelease?"-0":"",we?G===">"||G==="<"?D="<0.0.0-0":D="*":G&&ge?(ve&&(te=0),de=0,G===">"?(G=">=",ve?(V=+V+1,te=0,de=0):(te=+te+1,de=0)):G==="<="&&(G="<",ve?V=+V+1:te=+te+1),G==="<"&&(ie="-0"),D=`${G+V}.${te}.${de}${ie}`):ve?D=`>=${V}.0.0${ie} <${+V+1}.0.0-0`:Q&&(D=`>=${V}.${te}.0${ie} <${V}.${+te+1}.0-0`),n("xRange return",D),D})},k=(L,N)=>(n("replaceStars",L,N),L.trim().replace(o[s.STAR],"")),q=(L,N)=>(n("replaceGTE0",L,N),L.trim().replace(o[N.includePrerelease?s.GTE0PRE:s.GTE0],"")),x=L=>(N,j,D,G,V,te,de,ie,we,ve,Q,ge)=>(P(D)?j="":P(G)?j=`>=${D}.0.0${L?"-0":""}`:P(V)?j=`>=${D}.${G}.0${L?"-0":""}`:te?j=`>=${j}`:j=`>=${j}${L?"-0":""}`,P(we)?ie="":P(ve)?ie=`<${+we+1}.0.0-0`:P(Q)?ie=`<${we}.${+ve+1}.0-0`:ge?ie=`<=${we}.${ve}.${Q}-${ge}`:L?ie=`<${we}.${ve}.${+Q+1}-0`:ie=`<=${ie}`,`${j} ${ie}`.trim()),$=(L,N,j)=>{for(let D=0;D<L.length;D++)if(!L[D].test(N))return!1;if(N.prerelease.length&&!j.includePrerelease){for(let D=0;D<L.length;D++)if(n(L[D].semver),L[D].semver!==l.ANY&&L[D].semver.prerelease.length>0){const G=L[D].semver;if(G.major===N.major&&G.minor===N.minor&&G.patch===N.patch)return!0}return!1}return!0};return ki}var qi,Fs;function Kr(){if(Fs)return qi;Fs=1;const t=Symbol("SemVer ANY");class d{static get ANY(){return t}constructor(a,r){if(r=p(r),a instanceof d){if(a.loose===!!r.loose)return a;a=a.value}a=a.trim().split(/\s+/).join(" "),n("comparator",a,r),this.options=r,this.loose=!!r.loose,this.parse(a),this.semver===t?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}parse(a){const r=this.options.loose?f[u.COMPARATORLOOSE]:f[u.COMPARATOR],i=a.match(r);if(!i)throw new TypeError(`Invalid comparator: ${a}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new c(i[2],this.options.loose):this.semver=t}toString(){return this.value}test(a){if(n("Comparator.test",a,this.options.loose),this.semver===t||a===t)return!0;if(typeof a=="string")try{a=new c(a,this.options)}catch{return!1}return l(a,this.operator,this.semver,this.options)}intersects(a,r){if(!(a instanceof d))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(a.value,r).test(this.value):a.operator===""?a.value===""?!0:new o(this.value,r).test(a.semver):(r=p(r),r.includePrerelease&&(this.value==="<0.0.0-0"||a.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||a.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&a.operator.startsWith(">")||this.operator.startsWith("<")&&a.operator.startsWith("<")||this.semver.version===a.semver.version&&this.operator.includes("=")&&a.operator.includes("=")||l(this.semver,"<",a.semver,r)&&this.operator.startsWith(">")&&a.operator.startsWith("<")||l(this.semver,">",a.semver,r)&&this.operator.startsWith("<")&&a.operator.startsWith(">")))}}qi=d;const p=ua(),{safeRe:f,t:u}=Rr(),l=ou(),n=zr(),c=We(),o=at();return qi}var $i,Ls;function Jr(){if(Ls)return $i;Ls=1;const t=at();return $i=(p,f,u)=>{try{f=new t(f,u)}catch{return!1}return f.test(p)},$i}var Mi,xs;function gf(){if(xs)return Mi;xs=1;const t=at();return Mi=(p,f)=>new t(p,f).set.map(u=>u.map(l=>l.value).join(" ").trim().split(" ")),Mi}var Bi,Us;function vf(){if(Us)return Bi;Us=1;const t=We(),d=at();return Bi=(f,u,l)=>{let n=null,c=null,o=null;try{o=new d(u,l)}catch{return null}return f.forEach(s=>{o.test(s)&&(!n||c.compare(s)===-1)&&(n=s,c=new t(n,l))}),n},Bi}var Hi,ks;function Ef(){if(ks)return Hi;ks=1;const t=We(),d=at();return Hi=(f,u,l)=>{let n=null,c=null,o=null;try{o=new d(u,l)}catch{return null}return f.forEach(s=>{o.test(s)&&(!n||c.compare(s)===1)&&(n=s,c=new t(n,l))}),n},Hi}var ji,qs;function yf(){if(qs)return ji;qs=1;const t=We(),d=at(),p=Xr();return ji=(u,l)=>{u=new d(u,l);let n=new t("0.0.0");if(u.test(n)||(n=new t("0.0.0-0"),u.test(n)))return n;n=null;for(let c=0;c<u.set.length;++c){const o=u.set[c];let s=null;o.forEach(a=>{const r=new t(a.semver.version);switch(a.operator){case">":r.prerelease.length===0?r.patch++:r.prerelease.push(0),r.raw=r.format();case"":case">=":(!s||p(r,s))&&(s=r);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!n||p(n,s))&&(n=s)}return n&&u.test(n)?n:null},ji}var Gi,$s;function wf(){if($s)return Gi;$s=1;const t=at();return Gi=(p,f)=>{try{return new t(p,f).range||"*"}catch{return null}},Gi}var Wi,Ms;function pa(){if(Ms)return Wi;Ms=1;const t=We(),d=Kr(),{ANY:p}=d,f=at(),u=Jr(),l=Xr(),n=fa(),c=ha(),o=da();return Wi=(a,r,i,h)=>{a=new t(a,h),r=new f(r,h);let g,y,m,w,C;switch(i){case">":g=l,y=c,m=n,w=">",C=">=";break;case"<":g=n,y=o,m=l,w="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(a,r,h))return!1;for(let P=0;P<r.set.length;++P){const I=r.set[P];let b=null,O=null;if(I.forEach(S=>{S.semver===p&&(S=new d(">=0.0.0")),b=b||S,O=O||S,g(S.semver,b.semver,h)?b=S:m(S.semver,O.semver,h)&&(O=S)}),b.operator===w||b.operator===C||(!O.operator||O.operator===w)&&y(a,O.semver))return!1;if(O.operator===C&&m(a,O.semver))return!1}return!0},Wi}var Vi,Bs;function _f(){if(Bs)return Vi;Bs=1;const t=pa();return Vi=(p,f,u)=>t(p,f,">",u),Vi}var Yi,Hs;function Rf(){if(Hs)return Yi;Hs=1;const t=pa();return Yi=(p,f,u)=>t(p,f,"<",u),Yi}var zi,js;function Af(){if(js)return zi;js=1;const t=at();return zi=(p,f,u)=>(p=new t(p,u),f=new t(f,u),p.intersects(f,u)),zi}var Xi,Gs;function Cf(){if(Gs)return Xi;Gs=1;const t=Jr(),d=it();return Xi=(p,f,u)=>{const l=[];let n=null,c=null;const o=p.sort((i,h)=>d(i,h,u));for(const i of o)t(i,f,u)?(c=i,n||(n=i)):(c&&l.push([n,c]),c=null,n=null);n&&l.push([n,null]);const s=[];for(const[i,h]of l)i===h?s.push(i):!h&&i===o[0]?s.push("*"):h?i===o[0]?s.push(`<=${h}`):s.push(`${i} - ${h}`):s.push(`>=${i}`);const a=s.join(" || "),r=typeof f.raw=="string"?f.raw:String(f);return a.length<r.length?a:f},Xi}var Ki,Ws;function Sf(){if(Ws)return Ki;Ws=1;const t=at(),d=Kr(),{ANY:p}=d,f=Jr(),u=it(),l=(r,i,h={})=>{if(r===i)return!0;r=new t(r,h),i=new t(i,h);let g=!1;e:for(const y of r.set){for(const m of i.set){const w=o(y,m,h);if(g=g||w!==null,w)continue e}if(g)return!1}return!0},n=[new d(">=0.0.0-0")],c=[new d(">=0.0.0")],o=(r,i,h)=>{if(r===i)return!0;if(r.length===1&&r[0].semver===p){if(i.length===1&&i[0].semver===p)return!0;h.includePrerelease?r=n:r=c}if(i.length===1&&i[0].semver===p){if(h.includePrerelease)return!0;i=c}const g=new Set;let y,m;for(const A of r)A.operator===">"||A.operator===">="?y=s(y,A,h):A.operator==="<"||A.operator==="<="?m=a(m,A,h):g.add(A.semver);if(g.size>1)return null;let w;if(y&&m){if(w=u(y.semver,m.semver,h),w>0)return null;if(w===0&&(y.operator!==">="||m.operator!=="<="))return null}for(const A of g){if(y&&!f(A,String(y),h)||m&&!f(A,String(m),h))return null;for(const v of i)if(!f(A,String(v),h))return!1;return!0}let C,P,I,b,O=m&&!h.includePrerelease&&m.semver.prerelease.length?m.semver:!1,S=y&&!h.includePrerelease&&y.semver.prerelease.length?y.semver:!1;O&&O.prerelease.length===1&&m.operator==="<"&&O.prerelease[0]===0&&(O=!1);for(const A of i){if(b=b||A.operator===">"||A.operator===">=",I=I||A.operator==="<"||A.operator==="<=",y){if(S&&A.semver.prerelease&&A.semver.prerelease.length&&A.semver.major===S.major&&A.semver.minor===S.minor&&A.semver.patch===S.patch&&(S=!1),A.operator===">"||A.operator===">="){if(C=s(y,A,h),C===A&&C!==y)return!1}else if(y.operator===">="&&!f(y.semver,String(A),h))return!1}if(m){if(O&&A.semver.prerelease&&A.semver.prerelease.length&&A.semver.major===O.major&&A.semver.minor===O.minor&&A.semver.patch===O.patch&&(O=!1),A.operator==="<"||A.operator==="<="){if(P=a(m,A,h),P===A&&P!==m)return!1}else if(m.operator==="<="&&!f(m.semver,String(A),h))return!1}if(!A.operator&&(m||y)&&w!==0)return!1}return!(y&&I&&!m&&w!==0||m&&b&&!y&&w!==0||S||O)},s=(r,i,h)=>{if(!r)return i;const g=u(r.semver,i.semver,h);return g>0?r:g<0||i.operator===">"&&r.operator===">="?i:r},a=(r,i,h)=>{if(!r)return i;const g=u(r.semver,i.semver,h);return g<0?r:g>0||i.operator==="<"&&r.operator==="<="?i:r};return Ki=l,Ki}var Ji,Vs;function su(){if(Vs)return Ji;Vs=1;const t=Rr(),d=Yr(),p=We(),f=nu(),u=Gt(),l=tf(),n=rf(),c=nf(),o=af(),s=of(),a=sf(),r=lf(),i=uf(),h=it(),g=cf(),y=ff(),m=ca(),w=df(),C=hf(),P=Xr(),I=fa(),b=iu(),O=au(),S=da(),A=ha(),v=ou(),k=pf(),q=Kr(),x=at(),$=Jr(),L=gf(),N=vf(),j=Ef(),D=yf(),G=wf(),V=pa(),te=_f(),de=Rf(),ie=Af(),we=Cf(),ve=Sf();return Ji={parse:u,valid:l,clean:n,inc:c,diff:o,major:s,minor:a,patch:r,prerelease:i,compare:h,rcompare:g,compareLoose:y,compareBuild:m,sort:w,rsort:C,gt:P,lt:I,eq:b,neq:O,gte:S,lte:A,cmp:v,coerce:k,Comparator:q,Range:x,satisfies:$,toComparators:L,maxSatisfying:N,minSatisfying:j,minVersion:D,validRange:G,outside:V,gtr:te,ltr:de,intersects:ie,simplifyRange:we,subset:ve,SemVer:p,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:d.SEMVER_SPEC_VERSION,RELEASE_TYPES:d.RELEASE_TYPES,compareIdentifiers:f.compareIdentifiers,rcompareIdentifiers:f.rcompareIdentifiers},Ji}var qt={},gr={exports:{}};gr.exports;var Ys;function Tf(){return Ys||(Ys=1,(function(t,d){var p=200,f="__lodash_hash_undefined__",u=1,l=2,n=9007199254740991,c="[object Arguments]",o="[object Array]",s="[object AsyncFunction]",a="[object Boolean]",r="[object Date]",i="[object Error]",h="[object Function]",g="[object GeneratorFunction]",y="[object Map]",m="[object Number]",w="[object Null]",C="[object Object]",P="[object Promise]",I="[object Proxy]",b="[object RegExp]",O="[object Set]",S="[object String]",A="[object Symbol]",v="[object Undefined]",k="[object WeakMap]",q="[object ArrayBuffer]",x="[object DataView]",$="[object Float32Array]",L="[object Float64Array]",N="[object Int8Array]",j="[object Int16Array]",D="[object Int32Array]",G="[object Uint8Array]",V="[object Uint8ClampedArray]",te="[object Uint16Array]",de="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,we=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,Q={};Q[$]=Q[L]=Q[N]=Q[j]=Q[D]=Q[G]=Q[V]=Q[te]=Q[de]=!0,Q[c]=Q[o]=Q[q]=Q[a]=Q[x]=Q[r]=Q[i]=Q[h]=Q[y]=Q[m]=Q[C]=Q[b]=Q[O]=Q[S]=Q[k]=!1;var ge=typeof rt=="object"&&rt&&rt.Object===Object&&rt,_=typeof self=="object"&&self&&self.Object===Object&&self,E=ge||_||Function("return this")(),H=d&&!d.nodeType&&d,F=H&&!0&&t&&!t.nodeType&&t,ce=F&&F.exports===H,he=ce&&ge.process,pe=(function(){try{return he&&he.binding&&he.binding("util")}catch{}})(),_e=pe&&pe.isTypedArray;function Ee(T,U){for(var J=-1,le=T==null?0:T.length,Ie=0,Re=[];++J<le;){var xe=T[J];U(xe,J,T)&&(Re[Ie++]=xe)}return Re}function Ve(T,U){for(var J=-1,le=U.length,Ie=T.length;++J<le;)T[Ie+J]=U[J];return T}function Ce(T,U){for(var J=-1,le=T==null?0:T.length;++J<le;)if(U(T[J],J,T))return!0;return!1}function je(T,U){for(var J=-1,le=Array(T);++J<T;)le[J]=U(J);return le}function ht(T){return function(U){return T(U)}}function lt(T,U){return T.has(U)}function ot(T,U){return T?.[U]}function e(T){var U=-1,J=Array(T.size);return T.forEach(function(le,Ie){J[++U]=[Ie,le]}),J}function B(T,U){return function(J){return T(U(J))}}function W(T){var U=-1,J=Array(T.size);return T.forEach(function(le){J[++U]=le}),J}var ne=Array.prototype,Y=Function.prototype,re=Object.prototype,Z=E["__core-js_shared__"],oe=Y.toString,ue=re.hasOwnProperty,Se=(function(){var T=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""})(),Te=re.toString,me=RegExp("^"+oe.call(ue).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=ce?E.Buffer:void 0,M=E.Symbol,z=E.Uint8Array,X=re.propertyIsEnumerable,K=ne.splice,ae=M?M.toStringTag:void 0,ee=Object.getOwnPropertySymbols,se=R?R.isBuffer:void 0,fe=B(Object.keys,Object),ye=xt(E,"DataView"),Oe=xt(E,"Map"),Le=xt(E,"Promise"),be=xt(E,"Set"),Lt=xt(E,"WeakMap"),et=xt(Object,"create"),_t=Ct(ye),Eu=Ct(Oe),yu=Ct(Le),wu=Ct(be),_u=Ct(Lt),Ea=M?M.prototype:void 0,Zr=Ea?Ea.valueOf:void 0;function Rt(T){var U=-1,J=T==null?0:T.length;for(this.clear();++U<J;){var le=T[U];this.set(le[0],le[1])}}function Ru(){this.__data__=et?et(null):{},this.size=0}function Au(T){var U=this.has(T)&&delete this.__data__[T];return this.size-=U?1:0,U}function Cu(T){var U=this.__data__;if(et){var J=U[T];return J===f?void 0:J}return ue.call(U,T)?U[T]:void 0}function Su(T){var U=this.__data__;return et?U[T]!==void 0:ue.call(U,T)}function Tu(T,U){var J=this.__data__;return this.size+=this.has(T)?0:1,J[T]=et&&U===void 0?f:U,this}Rt.prototype.clear=Ru,Rt.prototype.delete=Au,Rt.prototype.get=Cu,Rt.prototype.has=Su,Rt.prototype.set=Tu;function ut(T){var U=-1,J=T==null?0:T.length;for(this.clear();++U<J;){var le=T[U];this.set(le[0],le[1])}}function bu(){this.__data__=[],this.size=0}function Pu(T){var U=this.__data__,J=Cr(U,T);if(J<0)return!1;var le=U.length-1;return J==le?U.pop():K.call(U,J,1),--this.size,!0}function Ou(T){var U=this.__data__,J=Cr(U,T);return J<0?void 0:U[J][1]}function Iu(T){return Cr(this.__data__,T)>-1}function Du(T,U){var J=this.__data__,le=Cr(J,T);return le<0?(++this.size,J.push([T,U])):J[le][1]=U,this}ut.prototype.clear=bu,ut.prototype.delete=Pu,ut.prototype.get=Ou,ut.prototype.has=Iu,ut.prototype.set=Du;function At(T){var U=-1,J=T==null?0:T.length;for(this.clear();++U<J;){var le=T[U];this.set(le[0],le[1])}}function Nu(){this.size=0,this.__data__={hash:new Rt,map:new(Oe||ut),string:new Rt}}function Fu(T){var U=Sr(this,T).delete(T);return this.size-=U?1:0,U}function Lu(T){return Sr(this,T).get(T)}function xu(T){return Sr(this,T).has(T)}function Uu(T,U){var J=Sr(this,T),le=J.size;return J.set(T,U),this.size+=J.size==le?0:1,this}At.prototype.clear=Nu,At.prototype.delete=Fu,At.prototype.get=Lu,At.prototype.has=xu,At.prototype.set=Uu;function Ar(T){var U=-1,J=T==null?0:T.length;for(this.__data__=new At;++U<J;)this.add(T[U])}function ku(T){return this.__data__.set(T,f),this}function qu(T){return this.__data__.has(T)}Ar.prototype.add=Ar.prototype.push=ku,Ar.prototype.has=qu;function pt(T){var U=this.__data__=new ut(T);this.size=U.size}function $u(){this.__data__=new ut,this.size=0}function Mu(T){var U=this.__data__,J=U.delete(T);return this.size=U.size,J}function Bu(T){return this.__data__.get(T)}function Hu(T){return this.__data__.has(T)}function ju(T,U){var J=this.__data__;if(J instanceof ut){var le=J.__data__;if(!Oe||le.length<p-1)return le.push([T,U]),this.size=++J.size,this;J=this.__data__=new At(le)}return J.set(T,U),this.size=J.size,this}pt.prototype.clear=$u,pt.prototype.delete=Mu,pt.prototype.get=Bu,pt.prototype.has=Hu,pt.prototype.set=ju;function Gu(T,U){var J=Tr(T),le=!J&&ac(T),Ie=!J&&!le&&en(T),Re=!J&&!le&&!Ie&&ba(T),xe=J||le||Ie||Re,Ue=xe?je(T.length,String):[],qe=Ue.length;for(var De in T)ue.call(T,De)&&!(xe&&(De=="length"||Ie&&(De=="offset"||De=="parent")||Re&&(De=="buffer"||De=="byteLength"||De=="byteOffset")||ec(De,qe)))&&Ue.push(De);return Ue}function Cr(T,U){for(var J=T.length;J--;)if(Aa(T[J][0],U))return J;return-1}function Wu(T,U,J){var le=U(T);return Tr(T)?le:Ve(le,J(T))}function Wt(T){return T==null?T===void 0?v:w:ae&&ae in Object(T)?Qu(T):ic(T)}function ya(T){return Vt(T)&&Wt(T)==c}function wa(T,U,J,le,Ie){return T===U?!0:T==null||U==null||!Vt(T)&&!Vt(U)?T!==T&&U!==U:Vu(T,U,J,le,wa,Ie)}function Vu(T,U,J,le,Ie,Re){var xe=Tr(T),Ue=Tr(U),qe=xe?o:mt(T),De=Ue?o:mt(U);qe=qe==c?C:qe,De=De==c?C:De;var ze=qe==C,tt=De==C,$e=qe==De;if($e&&en(T)){if(!en(U))return!1;xe=!0,ze=!1}if($e&&!ze)return Re||(Re=new pt),xe||ba(T)?_a(T,U,J,le,Ie,Re):Ku(T,U,qe,J,le,Ie,Re);if(!(J&u)){var Je=ze&&ue.call(T,"__wrapped__"),Qe=tt&&ue.call(U,"__wrapped__");if(Je||Qe){var gt=Je?T.value():T,ct=Qe?U.value():U;return Re||(Re=new pt),Ie(gt,ct,J,le,Re)}}return $e?(Re||(Re=new pt),Ju(T,U,J,le,Ie,Re)):!1}function Yu(T){if(!Ta(T)||rc(T))return!1;var U=Ca(T)?me:we;return U.test(Ct(T))}function zu(T){return Vt(T)&&Sa(T.length)&&!!Q[Wt(T)]}function Xu(T){if(!nc(T))return fe(T);var U=[];for(var J in Object(T))ue.call(T,J)&&J!="constructor"&&U.push(J);return U}function _a(T,U,J,le,Ie,Re){var xe=J&u,Ue=T.length,qe=U.length;if(Ue!=qe&&!(xe&&qe>Ue))return!1;var De=Re.get(T);if(De&&Re.get(U))return De==U;var ze=-1,tt=!0,$e=J&l?new Ar:void 0;for(Re.set(T,U),Re.set(U,T);++ze<Ue;){var Je=T[ze],Qe=U[ze];if(le)var gt=xe?le(Qe,Je,ze,U,T,Re):le(Je,Qe,ze,T,U,Re);if(gt!==void 0){if(gt)continue;tt=!1;break}if($e){if(!Ce(U,function(ct,St){if(!lt($e,St)&&(Je===ct||Ie(Je,ct,J,le,Re)))return $e.push(St)})){tt=!1;break}}else if(!(Je===Qe||Ie(Je,Qe,J,le,Re))){tt=!1;break}}return Re.delete(T),Re.delete(U),tt}function Ku(T,U,J,le,Ie,Re,xe){switch(J){case x:if(T.byteLength!=U.byteLength||T.byteOffset!=U.byteOffset)return!1;T=T.buffer,U=U.buffer;case q:return!(T.byteLength!=U.byteLength||!Re(new z(T),new z(U)));case a:case r:case m:return Aa(+T,+U);case i:return T.name==U.name&&T.message==U.message;case b:case S:return T==U+"";case y:var Ue=e;case O:var qe=le&u;if(Ue||(Ue=W),T.size!=U.size&&!qe)return!1;var De=xe.get(T);if(De)return De==U;le|=l,xe.set(T,U);var ze=_a(Ue(T),Ue(U),le,Ie,Re,xe);return xe.delete(T),ze;case A:if(Zr)return Zr.call(T)==Zr.call(U)}return!1}function Ju(T,U,J,le,Ie,Re){var xe=J&u,Ue=Ra(T),qe=Ue.length,De=Ra(U),ze=De.length;if(qe!=ze&&!xe)return!1;for(var tt=qe;tt--;){var $e=Ue[tt];if(!(xe?$e in U:ue.call(U,$e)))return!1}var Je=Re.get(T);if(Je&&Re.get(U))return Je==U;var Qe=!0;Re.set(T,U),Re.set(U,T);for(var gt=xe;++tt<qe;){$e=Ue[tt];var ct=T[$e],St=U[$e];if(le)var Pa=xe?le(St,ct,$e,U,T,Re):le(ct,St,$e,T,U,Re);if(!(Pa===void 0?ct===St||Ie(ct,St,J,le,Re):Pa)){Qe=!1;break}gt||(gt=$e=="constructor")}if(Qe&&!gt){var br=T.constructor,Pr=U.constructor;br!=Pr&&"constructor"in T&&"constructor"in U&&!(typeof br=="function"&&br instanceof br&&typeof Pr=="function"&&Pr instanceof Pr)&&(Qe=!1)}return Re.delete(T),Re.delete(U),Qe}function Ra(T){return Wu(T,lc,Zu)}function Sr(T,U){var J=T.__data__;return tc(U)?J[typeof U=="string"?"string":"hash"]:J.map}function xt(T,U){var J=ot(T,U);return Yu(J)?J:void 0}function Qu(T){var U=ue.call(T,ae),J=T[ae];try{T[ae]=void 0;var le=!0}catch{}var Ie=Te.call(T);return le&&(U?T[ae]=J:delete T[ae]),Ie}var Zu=ee?function(T){return T==null?[]:(T=Object(T),Ee(ee(T),function(U){return X.call(T,U)}))}:uc,mt=Wt;(ye&&mt(new ye(new ArrayBuffer(1)))!=x||Oe&&mt(new Oe)!=y||Le&&mt(Le.resolve())!=P||be&&mt(new be)!=O||Lt&&mt(new Lt)!=k)&&(mt=function(T){var U=Wt(T),J=U==C?T.constructor:void 0,le=J?Ct(J):"";if(le)switch(le){case _t:return x;case Eu:return y;case yu:return P;case wu:return O;case _u:return k}return U});function ec(T,U){return U=U??n,!!U&&(typeof T=="number"||ve.test(T))&&T>-1&&T%1==0&&T<U}function tc(T){var U=typeof T;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?T!=="__proto__":T===null}function rc(T){return!!Se&&Se in T}function nc(T){var U=T&&T.constructor,J=typeof U=="function"&&U.prototype||re;return T===J}function ic(T){return Te.call(T)}function Ct(T){if(T!=null){try{return oe.call(T)}catch{}try{return T+""}catch{}}return""}function Aa(T,U){return T===U||T!==T&&U!==U}var ac=ya((function(){return arguments})())?ya:function(T){return Vt(T)&&ue.call(T,"callee")&&!X.call(T,"callee")},Tr=Array.isArray;function oc(T){return T!=null&&Sa(T.length)&&!Ca(T)}var en=se||cc;function sc(T,U){return wa(T,U)}function Ca(T){if(!Ta(T))return!1;var U=Wt(T);return U==h||U==g||U==s||U==I}function Sa(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=n}function Ta(T){var U=typeof T;return T!=null&&(U=="object"||U=="function")}function Vt(T){return T!=null&&typeof T=="object"}var ba=_e?ht(_e):zu;function lc(T){return oc(T)?Gu(T):Xu(T)}function uc(){return[]}function cc(){return!1}t.exports=sc})(gr,gr.exports)),gr.exports}var zs;function bf(){if(zs)return qt;zs=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.DownloadedUpdateHelper=void 0,qt.createTempUpdateFile=c;const t=yr,d=nt,p=Tf(),f=wt(),u=Pe;let l=class{constructor(s){this.cacheDir=s,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return u.join(this.cacheDir,"pending")}async validateDownloadedPath(s,a,r,i){if(this.versionInfo!=null&&this.file===s&&this.fileInfo!=null)return p(this.versionInfo,a)&&p(this.fileInfo.info,r.info)&&await(0,f.pathExists)(s)?s:null;const h=await this.getValidCachedUpdateFile(r,i);return h===null?null:(i.info(`Update has already been downloaded to ${s}).`),this._file=h,h)}async setDownloadedFile(s,a,r,i,h,g){this._file=s,this._packageFile=a,this.versionInfo=r,this.fileInfo=i,this._downloadedFileInfo={fileName:h,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},g&&await(0,f.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,f.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(s,a){const r=this.getUpdateInfoFile();if(!await(0,f.pathExists)(r))return null;let h;try{h=await(0,f.readJson)(r)}catch(w){let C="No cached update info available";return w.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),C+=` (error on read: ${w.message})`),a.info(C),null}if(!(h?.fileName!==null))return a.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(s.info.sha512!==h.sha512)return a.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${h.sha512}, expected: ${s.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const y=u.join(this.cacheDirForPendingUpdate,h.fileName);if(!await(0,f.pathExists)(y))return a.info("Cached update file doesn't exist"),null;const m=await n(y);return s.info.sha512!==m?(a.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m}, expected: ${s.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=h,y)}getUpdateInfoFile(){return u.join(this.cacheDirForPendingUpdate,"update-info.json")}};qt.DownloadedUpdateHelper=l;function n(o,s="sha512",a="base64",r){return new Promise((i,h)=>{const g=(0,t.createHash)(s);g.on("error",h).setEncoding(a),(0,d.createReadStream)(o,{...r,highWaterMark:1024*1024}).on("error",h).on("end",()=>{g.end(),i(g.read())}).pipe(g,{end:!1})})}async function c(o,s,a){let r=0,i=u.join(s,o);for(let h=0;h<3;h++)try{return await(0,f.unlink)(i),i}catch(g){if(g.code==="ENOENT")return i;a.warn(`Error on remove temp update file: ${g}`),i=u.join(s,`${r++}-${o}`)}return i}return qt}var Jt={},Mr={},Xs;function Pf(){if(Xs)return Mr;Xs=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.getAppCacheDir=p;const t=Pe,d=Gr;function p(){const f=(0,d.homedir)();let u;return process.platform==="win32"?u=process.env.LOCALAPPDATA||t.join(f,"AppData","Local"):process.platform==="darwin"?u=t.join(f,"Library","Caches"):u=process.env.XDG_CACHE_HOME||t.join(f,".cache"),u}return Mr}var Ks;function Of(){if(Ks)return Jt;Ks=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.ElectronAppAdapter=void 0;const t=Pe,d=Pf();let p=class{constructor(u=Ae.app){this.app=u}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?t.join(process.resourcesPath,"app-update.yml"):t.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,d.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(u){this.app.once("quit",(l,n)=>u(n))}};return Jt.ElectronAppAdapter=p,Jt}var Qi={},Js;function If(){return Js||(Js=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ElectronHttpExecutor=t.NET_SESSION_NAME=void 0,t.getNetSession=p;const d=ke();t.NET_SESSION_NAME="electron-updater";function p(){return Ae.session.fromPartition(t.NET_SESSION_NAME,{cache:!1})}class f extends d.HttpExecutor{constructor(l){super(),this.proxyLoginCallback=l,this.cachedSession=null}async download(l,n,c){return await c.cancellationToken.createPromise((o,s,a)=>{const r={headers:c.headers||void 0,redirect:"manual"};(0,d.configureRequestUrl)(l,r),(0,d.configureRequestOptions)(r),this.doDownload(r,{destination:n,options:c,onCancel:a,callback:i=>{i==null?o(n):s(i)},responseHandler:null},0)})}createRequest(l,n){l.headers&&l.headers.Host&&(l.host=l.headers.Host,delete l.headers.Host),this.cachedSession==null&&(this.cachedSession=p());const c=Ae.net.request({...l,session:this.cachedSession});return c.on("response",n),this.proxyLoginCallback!=null&&c.on("login",this.proxyLoginCallback),c}addRedirectHandlers(l,n,c,o,s){l.on("redirect",(a,r,i)=>{l.abort(),o>this.maxRedirects?c(this.createMaxRedirectError()):s(d.HttpExecutor.prepareRedirectUrlOptions(i,n))})}}t.ElectronHttpExecutor=f})(Qi)),Qi}var Qt={},$t={},Qs;function Nt(){if(Qs)return $t;Qs=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.newBaseUrl=d,$t.newUrlFromBase=p,$t.getChannelFilename=f;const t=yt;function d(u){const l=new t.URL(u);return l.pathname.endsWith("/")||(l.pathname+="/"),l}function p(u,l,n=!1){const c=new t.URL(u,l),o=l.search;return o!=null&&o.length!==0?c.search=o:n&&(c.search=`noCache=${Date.now().toString(32)}`),c}function f(u){return`${u}.yml`}return $t}var ft={},Zi,Zs;function lu(){if(Zs)return Zi;Zs=1;var t="[object Symbol]",d=/[\\^$.*+?()[\]{}|]/g,p=RegExp(d.source),f=typeof rt=="object"&&rt&&rt.Object===Object&&rt,u=typeof self=="object"&&self&&self.Object===Object&&self,l=f||u||Function("return this")(),n=Object.prototype,c=n.toString,o=l.Symbol,s=o?o.prototype:void 0,a=s?s.toString:void 0;function r(m){if(typeof m=="string")return m;if(h(m))return a?a.call(m):"";var w=m+"";return w=="0"&&1/m==-1/0?"-0":w}function i(m){return!!m&&typeof m=="object"}function h(m){return typeof m=="symbol"||i(m)&&c.call(m)==t}function g(m){return m==null?"":r(m)}function y(m){return m=g(m),m&&p.test(m)?m.replace(d,"\\$&"):m}return Zi=y,Zi}var el;function Ke(){if(el)return ft;el=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.Provider=void 0,ft.findFile=n,ft.parseUpdateInfo=c,ft.getFileList=o,ft.resolveFiles=s;const t=ke(),d=la(),p=yt,f=Nt(),u=lu();let l=class{constructor(r){this.runtimeOptions=r,this.requestHeaders=null,this.executor=r.executor}getBlockMapFiles(r,i,h,g=null){const y=(0,f.newUrlFromBase)(`${r.pathname}.blockmap`,r);return[(0,f.newUrlFromBase)(`${r.pathname.replace(new RegExp(u(h),"g"),i)}.blockmap`,g?new p.URL(g):r),y]}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const r=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(r==="x64"?"":`-${r}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(r){return`${r}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(r){this.requestHeaders=r}httpRequest(r,i,h){return this.executor.request(this.createRequestOptions(r,i),h)}createRequestOptions(r,i){const h={};return this.requestHeaders==null?i!=null&&(h.headers=i):h.headers=i==null?this.requestHeaders:{...this.requestHeaders,...i},(0,t.configureRequestUrl)(r,h),h}};ft.Provider=l;function n(a,r,i){var h;if(a.length===0)throw(0,t.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const g=a.filter(m=>m.url.pathname.toLowerCase().endsWith(`.${r.toLowerCase()}`)),y=(h=g.find(m=>[m.url.pathname,m.info.url].some(w=>w.includes(process.arch))))!==null&&h!==void 0?h:g.shift();return y||(i==null?a[0]:a.find(m=>!i.some(w=>m.url.pathname.toLowerCase().endsWith(`.${w.toLowerCase()}`))))}function c(a,r,i){if(a==null)throw(0,t.newError)(`Cannot parse update info from ${r} in the latest release artifacts (${i}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let h;try{h=(0,d.load)(a)}catch(g){throw(0,t.newError)(`Cannot parse update info from ${r} in the latest release artifacts (${i}): ${g.stack||g.message}, rawData: ${a}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return h}function o(a){const r=a.files;if(r!=null&&r.length>0)return r;if(a.path!=null)return[{url:a.path,sha2:a.sha2,sha512:a.sha512}];throw(0,t.newError)(`No files provided: ${(0,t.safeStringifyJson)(a)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function s(a,r,i=h=>h){const g=o(a).map(w=>{if(w.sha2==null&&w.sha512==null)throw(0,t.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,t.safeStringifyJson)(w)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,f.newUrlFromBase)(i(w.url),r),info:w}}),y=a.packages,m=y==null?null:y[process.arch]||y.ia32;return m!=null&&(g[0].packageInfo={...m,path:(0,f.newUrlFromBase)(i(m.path),r).href}),g}return ft}var tl;function uu(){if(tl)return Qt;tl=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.GenericProvider=void 0;const t=ke(),d=Nt(),p=Ke();let f=class extends p.Provider{constructor(l,n,c){super(c),this.configuration=l,this.updater=n,this.baseUrl=(0,d.newBaseUrl)(this.configuration.url)}get channel(){const l=this.updater.channel||this.configuration.channel;return l==null?this.getDefaultChannelName():this.getCustomChannelName(l)}async getLatestVersion(){const l=(0,d.getChannelFilename)(this.channel),n=(0,d.newUrlFromBase)(l,this.baseUrl,this.updater.isAddNoCacheQuery);for(let c=0;;c++)try{return(0,p.parseUpdateInfo)(await this.httpRequest(n),l,n)}catch(o){if(o instanceof t.HttpError&&o.statusCode===404)throw(0,t.newError)(`Cannot find channel "${l}" update info: ${o.stack||o.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(o.code==="ECONNREFUSED"&&c<3){await new Promise((s,a)=>{try{setTimeout(s,1e3*c)}catch(r){a(r)}});continue}throw o}}resolveFiles(l){return(0,p.resolveFiles)(l,this.baseUrl)}};return Qt.GenericProvider=f,Qt}var Zt={},er={},rl;function Df(){if(rl)return er;rl=1,Object.defineProperty(er,"__esModule",{value:!0}),er.BitbucketProvider=void 0;const t=ke(),d=Nt(),p=Ke();let f=class extends p.Provider{constructor(l,n,c){super({...c,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=n;const{owner:o,slug:s}=l;this.baseUrl=(0,d.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${o}/${s}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const l=new t.CancellationToken,n=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),c=(0,d.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const o=await this.httpRequest(c,void 0,l);return(0,p.parseUpdateInfo)(o,n,c)}catch(o){throw(0,t.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,p.resolveFiles)(l,this.baseUrl)}toString(){const{owner:l,slug:n}=this.configuration;return`Bitbucket (owner: ${l}, slug: ${n}, channel: ${this.channel})`}};return er.BitbucketProvider=f,er}var Et={},nl;function cu(){if(nl)return Et;nl=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.GitHubProvider=Et.BaseGitHubProvider=void 0,Et.computeReleaseNotes=s;const t=ke(),d=su(),p=yt,f=Nt(),u=Ke(),l=/\/tag\/([^/]+)$/;class n extends u.Provider{constructor(r,i,h){super({...h,isUseMultipleRangeRequest:!1}),this.options=r,this.baseUrl=(0,f.newBaseUrl)((0,t.githubUrl)(r,i));const g=i==="github.com"?"api.github.com":i;this.baseApiUrl=(0,f.newBaseUrl)((0,t.githubUrl)(r,g))}computeGithubBasePath(r){const i=this.options.host;return i&&!["github.com","api.github.com"].includes(i)?`/api/v3${r}`:r}}Et.BaseGitHubProvider=n;let c=class extends n{constructor(r,i,h){super(r,"github.com",h),this.options=r,this.updater=i}get channel(){const r=this.updater.channel||this.options.channel;return r==null?this.getDefaultChannelName():this.getCustomChannelName(r)}async getLatestVersion(){var r,i,h,g,y;const m=new t.CancellationToken,w=await this.httpRequest((0,f.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},m),C=(0,t.parseXml)(w);let P=C.element("entry",!1,"No published versions on GitHub"),I=null;try{if(this.updater.allowPrerelease){const k=((r=this.updater)===null||r===void 0?void 0:r.channel)||((i=d.prerelease(this.updater.currentVersion))===null||i===void 0?void 0:i[0])||null;if(k===null)I=l.exec(P.element("link").attribute("href"))[1];else for(const q of C.getElements("entry")){const x=l.exec(q.element("link").attribute("href"));if(x===null)continue;const $=x[1],L=((h=d.prerelease($))===null||h===void 0?void 0:h[0])||null,N=!k||["alpha","beta"].includes(k),j=L!==null&&!["alpha","beta"].includes(String(L));if(N&&!j&&!(k==="beta"&&L==="alpha")){I=$;break}if(L&&L===k){I=$;break}}}else{I=await this.getLatestTagName(m);for(const k of C.getElements("entry"))if(l.exec(k.element("link").attribute("href"))[1]===I){P=k;break}}}catch(k){throw(0,t.newError)(`Cannot parse releases feed: ${k.stack||k.message},
XML:
${w}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(I==null)throw(0,t.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let b,O="",S="";const A=async k=>{O=(0,f.getChannelFilename)(k),S=(0,f.newUrlFromBase)(this.getBaseDownloadPath(String(I),O),this.baseUrl);const q=this.createRequestOptions(S);try{return await this.executor.request(q,m)}catch(x){throw x instanceof t.HttpError&&x.statusCode===404?(0,t.newError)(`Cannot find ${O} in the latest release artifacts (${S}): ${x.stack||x.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):x}};try{let k=this.channel;this.updater.allowPrerelease&&(!((g=d.prerelease(I))===null||g===void 0)&&g[0])&&(k=this.getCustomChannelName(String((y=d.prerelease(I))===null||y===void 0?void 0:y[0]))),b=await A(k)}catch(k){if(this.updater.allowPrerelease)b=await A(this.getDefaultChannelName());else throw k}const v=(0,u.parseUpdateInfo)(b,O,S);return v.releaseName==null&&(v.releaseName=P.elementValueOrEmpty("title")),v.releaseNotes==null&&(v.releaseNotes=s(this.updater.currentVersion,this.updater.fullChangelog,C,P)),{tag:I,...v}}async getLatestTagName(r){const i=this.options,h=i.host==null||i.host==="github.com"?(0,f.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new p.URL(`${this.computeGithubBasePath(`/repos/${i.owner}/${i.repo}/releases`)}/latest`,this.baseApiUrl);try{const g=await this.httpRequest(h,{Accept:"application/json"},r);return g==null?null:JSON.parse(g).tag_name}catch(g){throw(0,t.newError)(`Unable to find latest version on GitHub (${h}), please ensure a production release exists: ${g.stack||g.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(r){return(0,u.resolveFiles)(r,this.baseUrl,i=>this.getBaseDownloadPath(r.tag,i.replace(/ /g,"-")))}getBaseDownloadPath(r,i){return`${this.basePath}/download/${r}/${i}`}};Et.GitHubProvider=c;function o(a){const r=a.elementValueOrEmpty("content");return r==="No content."?"":r}function s(a,r,i,h){if(!r)return o(h);const g=[];for(const y of i.getElements("entry")){const m=/\/tag\/v?([^/]+)$/.exec(y.element("link").attribute("href"))[1];d.lt(a,m)&&g.push({version:m,note:o(y)})}return g.sort((y,m)=>d.rcompare(y.version,m.version))}return Et}var tr={},il;function Nf(){if(il)return tr;il=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.GitLabProvider=void 0;const t=ke(),d=yt,p=lu(),f=Nt(),u=Ke();let l=class extends u.Provider{normalizeFilename(c){return c.replace(/ |_/g,"-")}constructor(c,o,s){super({...s,isUseMultipleRangeRequest:!1}),this.options=c,this.updater=o,this.cachedLatestVersion=null;const r=c.host||"gitlab.com";this.baseApiUrl=(0,f.newBaseUrl)(`https://${r}/api/v4`)}get channel(){const c=this.updater.channel||this.options.channel;return c==null?this.getDefaultChannelName():this.getCustomChannelName(c)}async getLatestVersion(){const c=new t.CancellationToken,o=(0,f.newUrlFromBase)(`projects/${this.options.projectId}/releases/permalink/latest`,this.baseApiUrl);let s;try{const C={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},P=await this.httpRequest(o,C,c);if(!P)throw(0,t.newError)("No latest release found","ERR_UPDATER_NO_PUBLISHED_VERSIONS");s=JSON.parse(P)}catch(C){throw(0,t.newError)(`Unable to find latest release on GitLab (${o}): ${C.stack||C.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}const a=s.tag_name;let r=null,i="",h=null;const g=async C=>{i=(0,f.getChannelFilename)(C);const P=s.assets.links.find(b=>b.name===i);if(!P)throw(0,t.newError)(`Cannot find ${i} in the latest release assets`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");h=new d.URL(P.direct_asset_url);const I=this.options.token?{"PRIVATE-TOKEN":this.options.token}:void 0;try{const b=await this.httpRequest(h,I,c);if(!b)throw(0,t.newError)(`Empty response from ${h}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");return b}catch(b){throw b instanceof t.HttpError&&b.statusCode===404?(0,t.newError)(`Cannot find ${i} in the latest release artifacts (${h}): ${b.stack||b.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):b}};try{r=await g(this.channel)}catch(C){if(this.channel!==this.getDefaultChannelName())r=await g(this.getDefaultChannelName());else throw C}if(!r)throw(0,t.newError)(`Unable to parse channel data from ${i}`,"ERR_UPDATER_INVALID_UPDATE_INFO");const y=(0,u.parseUpdateInfo)(r,i,h);y.releaseName==null&&(y.releaseName=s.name),y.releaseNotes==null&&(y.releaseNotes=s.description||null);const m=new Map;for(const C of s.assets.links)m.set(this.normalizeFilename(C.name),C.direct_asset_url);const w={tag:a,assets:m,...y};return this.cachedLatestVersion=w,w}convertAssetsToMap(c){const o=new Map;for(const s of c.links)o.set(this.normalizeFilename(s.name),s.direct_asset_url);return o}findBlockMapInAssets(c,o){const s=[`${o}.blockmap`,`${this.normalizeFilename(o)}.blockmap`];for(const a of s){const r=c.get(a);if(r)return new d.URL(r)}return null}async fetchReleaseInfoByVersion(c){const o=new t.CancellationToken,s=[`v${c}`,c];for(const a of s){const r=(0,f.newUrlFromBase)(`projects/${this.options.projectId}/releases/${encodeURIComponent(a)}`,this.baseApiUrl);try{const i={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},h=await this.httpRequest(r,i,o);if(h)return JSON.parse(h)}catch(i){if(i instanceof t.HttpError&&i.statusCode===404)continue;throw(0,t.newError)(`Unable to find release ${a} on GitLab (${r}): ${i.stack||i.message}`,"ERR_UPDATER_RELEASE_NOT_FOUND")}}throw(0,t.newError)(`Unable to find release with version ${c} (tried: ${s.join(", ")}) on GitLab`,"ERR_UPDATER_RELEASE_NOT_FOUND")}setAuthHeaderForToken(c){const o={};return c!=null&&(c.startsWith("Bearer")?o.authorization=c:o["PRIVATE-TOKEN"]=c),o}async getVersionInfoForBlockMap(c){if(this.cachedLatestVersion&&this.cachedLatestVersion.version===c)return this.cachedLatestVersion.assets;const o=await this.fetchReleaseInfoByVersion(c);return o&&o.assets?this.convertAssetsToMap(o.assets):null}async findBlockMapUrlsFromAssets(c,o,s){let a=null,r=null;const i=await this.getVersionInfoForBlockMap(o);i&&(a=this.findBlockMapInAssets(i,s));const h=await this.getVersionInfoForBlockMap(c);if(h){const g=s.replace(new RegExp(p(o),"g"),c);r=this.findBlockMapInAssets(h,g)}return[r,a]}async getBlockMapFiles(c,o,s,a=null){if(this.options.uploadTarget==="project_upload"){const r=c.pathname.split("/").pop()||"",[i,h]=await this.findBlockMapUrlsFromAssets(o,s,r);if(!h)throw(0,t.newError)(`Cannot find blockmap file for ${s} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");if(!i)throw(0,t.newError)(`Cannot find blockmap file for ${o} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");return[i,h]}else return super.getBlockMapFiles(c,o,s,a)}resolveFiles(c){return(0,u.getFileList)(c).map(o=>{const a=[o.url,this.normalizeFilename(o.url)].find(i=>c.assets.has(i)),r=a?c.assets.get(a):void 0;if(!r)throw(0,t.newError)(`Cannot find asset "${o.url}" in GitLab release assets. Available assets: ${Array.from(c.assets.keys()).join(", ")}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new d.URL(r),info:o}})}toString(){return`GitLab (projectId: ${this.options.projectId}, channel: ${this.channel})`}};return tr.GitLabProvider=l,tr}var rr={},al;function Ff(){if(al)return rr;al=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.KeygenProvider=void 0;const t=ke(),d=Nt(),p=Ke();let f=class extends p.Provider{constructor(l,n,c){super({...c,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=n,this.defaultHostname="api.keygen.sh";const o=this.configuration.host||this.defaultHostname;this.baseUrl=(0,d.newBaseUrl)(`https://${o}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const l=new t.CancellationToken,n=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),c=(0,d.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const o=await this.httpRequest(c,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},l);return(0,p.parseUpdateInfo)(o,n,c)}catch(o){throw(0,t.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,p.resolveFiles)(l,this.baseUrl)}toString(){const{account:l,product:n,platform:c}=this.configuration;return`Keygen (account: ${l}, product: ${n}, platform: ${c}, channel: ${this.channel})`}};return rr.KeygenProvider=f,rr}var nr={},ol;function Lf(){if(ol)return nr;ol=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.PrivateGitHubProvider=void 0;const t=ke(),d=la(),p=Pe,f=yt,u=Nt(),l=cu(),n=Ke();let c=class extends l.BaseGitHubProvider{constructor(s,a,r,i){super(s,"api.github.com",i),this.updater=a,this.token=r}createRequestOptions(s,a){const r=super.createRequestOptions(s,a);return r.redirect="manual",r}async getLatestVersion(){const s=new t.CancellationToken,a=(0,u.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(s),i=r.assets.find(y=>y.name===a);if(i==null)throw(0,t.newError)(`Cannot find ${a} in the release ${r.html_url||r.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const h=new f.URL(i.url);let g;try{g=(0,d.load)(await this.httpRequest(h,this.configureHeaders("application/octet-stream"),s))}catch(y){throw y instanceof t.HttpError&&y.statusCode===404?(0,t.newError)(`Cannot find ${a} in the latest release artifacts (${h}): ${y.stack||y.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):y}return g.assets=r.assets,g}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(s){return{accept:s,authorization:`token ${this.token}`}}async getLatestVersionInfo(s){const a=this.updater.allowPrerelease;let r=this.basePath;a||(r=`${r}/latest`);const i=(0,u.newUrlFromBase)(r,this.baseUrl);try{const h=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),s));return a?h.find(g=>g.prerelease)||h[0]:h}catch(h){throw(0,t.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${h.stack||h.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(s){return(0,n.getFileList)(s).map(a=>{const r=p.posix.basename(a.url).replace(/ /g,"-"),i=s.assets.find(h=>h!=null&&h.name===r);if(i==null)throw(0,t.newError)(`Cannot find asset "${r}" in: ${JSON.stringify(s.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new f.URL(i.url),info:a}})}};return nr.PrivateGitHubProvider=c,nr}var sl;function xf(){if(sl)return Zt;sl=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.isUrlProbablySupportMultiRangeRequests=c,Zt.createClient=o;const t=ke(),d=Df(),p=uu(),f=cu(),u=Nf(),l=Ff(),n=Lf();function c(s){return!s.includes("s3.amazonaws.com")}function o(s,a,r){if(typeof s=="string")throw(0,t.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const i=s.provider;switch(i){case"github":{const h=s,g=(h.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||h.token;return g==null?new f.GitHubProvider(h,a,r):new n.PrivateGitHubProvider(h,a,g,r)}case"bitbucket":return new d.BitbucketProvider(s,a,r);case"gitlab":return new u.GitLabProvider(s,a,r);case"keygen":return new l.KeygenProvider(s,a,r);case"s3":case"spaces":return new p.GenericProvider({provider:"generic",url:(0,t.getS3LikeProviderBaseUrl)(s),channel:s.channel||null},a,{...r,isUseMultipleRangeRequest:!1});case"generic":{const h=s;return new p.GenericProvider(h,a,{...r,isUseMultipleRangeRequest:h.useMultipleRangeRequest!==!1&&c(h.url)})}case"custom":{const h=s,g=h.updateProvider;if(!g)throw(0,t.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new g(h,a,r)}default:throw(0,t.newError)(`Unsupported provider: ${i}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return Zt}var ir={},ar={},Mt={},Bt={},ll;function ma(){if(ll)return Bt;ll=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.OperationKind=void 0,Bt.computeOperations=d;var t;(function(n){n[n.COPY=0]="COPY",n[n.DOWNLOAD=1]="DOWNLOAD"})(t||(Bt.OperationKind=t={}));function d(n,c,o){const s=l(n.files),a=l(c.files);let r=null;const i=c.files[0],h=[],g=i.name,y=s.get(g);if(y==null)throw new Error(`no file ${g} in old blockmap`);const m=a.get(g);let w=0;const{checksumToOffset:C,checksumToOldSize:P}=u(s.get(g),y.offset,o);let I=i.offset;for(let b=0;b<m.checksums.length;I+=m.sizes[b],b++){const O=m.sizes[b],S=m.checksums[b];let A=C.get(S);A!=null&&P.get(S)!==O&&(o.warn(`Checksum ("${S}") matches, but size differs (old: ${P.get(S)}, new: ${O})`),A=void 0),A===void 0?(w++,r!=null&&r.kind===t.DOWNLOAD&&r.end===I?r.end+=O:(r={kind:t.DOWNLOAD,start:I,end:I+O},f(r,h,S,b))):r!=null&&r.kind===t.COPY&&r.end===A?r.end+=O:(r={kind:t.COPY,start:A,end:A+O},f(r,h,S,b))}return w>0&&o.info(`File${i.name==="file"?"":" "+i.name} has ${w} changed blocks`),h}const p=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function f(n,c,o,s){if(p&&c.length!==0){const a=c[c.length-1];if(a.kind===n.kind&&n.start<a.end&&n.start>a.start){const r=[a.start,a.end,n.start,n.end].reduce((i,h)=>i<h?i:h);throw new Error(`operation (block index: ${s}, checksum: ${o}, kind: ${t[n.kind]}) overlaps previous operation (checksum: ${o}):
abs: ${a.start} until ${a.end} and ${n.start} until ${n.end}
rel: ${a.start-r} until ${a.end-r} and ${n.start-r} until ${n.end-r}`)}}c.push(n)}function u(n,c,o){const s=new Map,a=new Map;let r=c;for(let i=0;i<n.checksums.length;i++){const h=n.checksums[i],g=n.sizes[i],y=a.get(h);if(y===void 0)s.set(h,r),a.set(h,g);else if(o.debug!=null){const m=y===g?"(same size)":`(size: ${y}, this size: ${g})`;o.debug(`${h} duplicated in blockmap ${m}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}r+=g}return{checksumToOffset:s,checksumToOldSize:a}}function l(n){const c=new Map;for(const o of n)c.set(o.name,o);return c}return Bt}var ul;function fu(){if(ul)return Mt;ul=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.DataSplitter=void 0,Mt.copyData=n;const t=ke(),d=nt,p=Er,f=ma(),u=Buffer.from(`\r
\r
`);var l;(function(o){o[o.INIT=0]="INIT",o[o.HEADER=1]="HEADER",o[o.BODY=2]="BODY"})(l||(l={}));function n(o,s,a,r,i){const h=(0,d.createReadStream)("",{fd:a,autoClose:!1,start:o.start,end:o.end-1});h.on("error",r),h.once("end",i),h.pipe(s,{end:!1})}let c=class extends p.Writable{constructor(s,a,r,i,h,g){super(),this.out=s,this.options=a,this.partIndexToTaskIndex=r,this.partIndexToLength=h,this.finishHandler=g,this.partIndex=-1,this.headerListBuffer=null,this.readState=l.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(s,a,r){if(this.isFinished){console.error(`Trailing ignored data: ${s.length} bytes`);return}this.handleData(s).then(r).catch(r)}async handleData(s){let a=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,t.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const r=Math.min(this.ignoreByteCount,s.length);this.ignoreByteCount-=r,a=r}else if(this.remainingPartDataCount>0){const r=Math.min(this.remainingPartDataCount,s.length);this.remainingPartDataCount-=r,await this.processPartData(s,0,r),a=r}if(a!==s.length){if(this.readState===l.HEADER){const r=this.searchHeaderListEnd(s,a);if(r===-1)return;a=r,this.readState=l.BODY,this.headerListBuffer=null}for(;;){if(this.readState===l.BODY)this.readState=l.INIT;else{this.partIndex++;let g=this.partIndexToTaskIndex.get(this.partIndex);if(g==null)if(this.isFinished)g=this.options.end;else throw(0,t.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const y=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(y<g)await this.copyExistingData(y,g);else if(y>g)throw(0,t.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(a=this.searchHeaderListEnd(s,a),a===-1){this.readState=l.HEADER;return}}const r=this.partIndexToLength[this.partIndex],i=a+r,h=Math.min(i,s.length);if(await this.processPartStarted(s,a,h),this.remainingPartDataCount=r-(h-a),this.remainingPartDataCount>0)return;if(a=i+this.boundaryLength,a>=s.length){this.ignoreByteCount=this.boundaryLength-(s.length-i);return}}}}copyExistingData(s,a){return new Promise((r,i)=>{const h=()=>{if(s===a){r();return}const g=this.options.tasks[s];if(g.kind!==f.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}n(g,this.out,this.options.oldFileFd,i,()=>{s++,h()})};h()})}searchHeaderListEnd(s,a){const r=s.indexOf(u,a);if(r!==-1)return r+u.length;const i=a===0?s:s.slice(a);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const s=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==s)throw(0,t.newError)(`Expected length: ${s} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(s,a,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(s,a,r)}processPartData(s,a,r){this.actualPartLength+=r-a;const i=this.out;return i.write(a===0&&s.length===r?s:s.slice(a,r))?Promise.resolve():new Promise((h,g)=>{i.on("error",g),i.once("drain",()=>{i.removeListener("error",g),h()})})}};return Mt.DataSplitter=c,Mt}var or={},cl;function Uf(){if(cl)return or;cl=1,Object.defineProperty(or,"__esModule",{value:!0}),or.executeTasksUsingMultipleRangeRequests=f,or.checkIsRangesSupported=l;const t=ke(),d=fu(),p=ma();function f(n,c,o,s,a){const r=i=>{if(i>=c.length){n.fileMetadataBuffer!=null&&o.write(n.fileMetadataBuffer),o.end();return}const h=i+1e3;u(n,{tasks:c,start:i,end:Math.min(c.length,h),oldFileFd:s},o,()=>r(h),a)};return r}function u(n,c,o,s,a){let r="bytes=",i=0;const h=new Map,g=[];for(let w=c.start;w<c.end;w++){const C=c.tasks[w];C.kind===p.OperationKind.DOWNLOAD&&(r+=`${C.start}-${C.end-1}, `,h.set(i,w),i++,g.push(C.end-C.start))}if(i<=1){const w=C=>{if(C>=c.end){s();return}const P=c.tasks[C++];if(P.kind===p.OperationKind.COPY)(0,d.copyData)(P,o,c.oldFileFd,a,()=>w(C));else{const I=n.createRequestOptions();I.headers.Range=`bytes=${P.start}-${P.end-1}`;const b=n.httpExecutor.createRequest(I,O=>{O.on("error",a),l(O,a)&&(O.pipe(o,{end:!1}),O.once("end",()=>w(C)))});n.httpExecutor.addErrorAndTimeoutHandlers(b,a),b.end()}};w(c.start);return}const y=n.createRequestOptions();y.headers.Range=r.substring(0,r.length-2);const m=n.httpExecutor.createRequest(y,w=>{if(!l(w,a))return;const C=(0,t.safeGetHeader)(w,"content-type"),P=/^multipart\/.+?\s*;\s*boundary=(?:"([^"]+)"|([^\s";]+))\s*$/i.exec(C);if(P==null){a(new Error(`Content-Type "multipart/byteranges" is expected, but got "${C}"`));return}const I=new d.DataSplitter(o,c,h,P[1]||P[2],g,s);I.on("error",a),w.pipe(I),w.on("end",()=>{setTimeout(()=>{m.abort(),a(new Error("Response ends without calling any handlers"))},1e4)})});n.httpExecutor.addErrorAndTimeoutHandlers(m,a),m.end()}function l(n,c){if(n.statusCode>=400)return c((0,t.createHttpError)(n)),!1;if(n.statusCode!==206){const o=(0,t.safeGetHeader)(n,"accept-ranges");if(o==null||o==="none")return c(new Error(`Server doesn't support Accept-Ranges (response code ${n.statusCode})`)),!1}return!0}return or}var sr={},fl;function kf(){if(fl)return sr;fl=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.ProgressDifferentialDownloadCallbackTransform=void 0;const t=Er;var d;(function(f){f[f.COPY=0]="COPY",f[f.DOWNLOAD=1]="DOWNLOAD"})(d||(d={}));let p=class extends t.Transform{constructor(u,l,n){super(),this.progressDifferentialDownloadInfo=u,this.cancellationToken=l,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=d.COPY,this.nextUpdate=this.start+1e3}_transform(u,l,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}if(this.operationType==d.COPY){n(null,u);return}this.transferred+=u.length,this.delta+=u.length;const c=Date.now();c>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=c+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((c-this.start)/1e3))}),this.delta=0),n(null,u)}beginFileCopy(){this.operationType=d.COPY}beginRangeDownload(){this.operationType=d.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(u){if(this.cancellationToken.cancelled){u(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,u(null)}};return sr.ProgressDifferentialDownloadCallbackTransform=p,sr}var dl;function du(){if(dl)return ar;dl=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.DifferentialDownloader=void 0;const t=ke(),d=wt(),p=nt,f=fu(),u=yt,l=ma(),n=Uf(),c=kf();let o=class{constructor(i,h,g){this.blockAwareFileInfo=i,this.httpExecutor=h,this.options=g,this.fileMetadataBuffer=null,this.logger=g.logger}createRequestOptions(){const i={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,t.configureRequestUrl)(this.options.newUrl,i),(0,t.configureRequestOptions)(i),i}doDownload(i,h){if(i.version!==h.version)throw new Error(`version is different (${i.version} - ${h.version}), full download is required`);const g=this.logger,y=(0,l.computeOperations)(i,h,g);g.debug!=null&&g.debug(JSON.stringify(y,null,2));let m=0,w=0;for(const P of y){const I=P.end-P.start;P.kind===l.OperationKind.DOWNLOAD?m+=I:w+=I}const C=this.blockAwareFileInfo.size;if(m+w+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==C)throw new Error(`Internal error, size mismatch: downloadSize: ${m}, copySize: ${w}, newSize: ${C}`);return g.info(`Full: ${s(C)}, To download: ${s(m)} (${Math.round(m/(C/100))}%)`),this.downloadFile(y)}downloadFile(i){const h=[],g=()=>Promise.all(h.map(y=>(0,d.close)(y.descriptor).catch(m=>{this.logger.error(`cannot close file "${y.path}": ${m}`)})));return this.doDownloadFile(i,h).then(g).catch(y=>g().catch(m=>{try{this.logger.error(`cannot close files: ${m}`)}catch(w){try{console.error(w)}catch{}}throw y}).then(()=>{throw y}))}async doDownloadFile(i,h){const g=await(0,d.open)(this.options.oldFile,"r");h.push({descriptor:g,path:this.options.oldFile});const y=await(0,d.open)(this.options.newFile,"w");h.push({descriptor:y,path:this.options.newFile});const m=(0,p.createWriteStream)(this.options.newFile,{fd:y});await new Promise((w,C)=>{const P=[];let I;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const x=[];let $=0;for(const N of i)N.kind===l.OperationKind.DOWNLOAD&&(x.push(N.end-N.start),$+=N.end-N.start);const L={expectedByteCounts:x,grandTotal:$};I=new c.ProgressDifferentialDownloadCallbackTransform(L,this.options.cancellationToken,this.options.onProgress),P.push(I)}const b=new t.DigestTransform(this.blockAwareFileInfo.sha512);b.isValidateOnEnd=!1,P.push(b),m.on("finish",()=>{m.close(()=>{h.splice(1,1);try{b.validate()}catch(x){C(x);return}w(void 0)})}),P.push(m);let O=null;for(const x of P)x.on("error",C),O==null?O=x:O=O.pipe(x);const S=P[0];let A;if(this.options.isUseMultipleRangeRequest){A=(0,n.executeTasksUsingMultipleRangeRequests)(this,i,S,g,C),A(0);return}let v=0,k=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const q=this.createRequestOptions();q.redirect="manual",A=x=>{var $,L;if(x>=i.length){this.fileMetadataBuffer!=null&&S.write(this.fileMetadataBuffer),S.end();return}const N=i[x++];if(N.kind===l.OperationKind.COPY){I&&I.beginFileCopy(),(0,f.copyData)(N,S,g,C,()=>A(x));return}const j=`bytes=${N.start}-${N.end-1}`;q.headers.range=j,(L=($=this.logger)===null||$===void 0?void 0:$.debug)===null||L===void 0||L.call($,`download range: ${j}`),I&&I.beginRangeDownload();const D=this.httpExecutor.createRequest(q,G=>{G.on("error",C),G.on("aborted",()=>{C(new Error("response has been aborted by the server"))}),G.statusCode>=400&&C((0,t.createHttpError)(G)),G.pipe(S,{end:!1}),G.once("end",()=>{I&&I.endRangeDownload(),++v===100?(v=0,setTimeout(()=>A(x),1e3)):A(x)})});D.on("redirect",(G,V,te)=>{this.logger.info(`Redirect to ${a(te)}`),k=te,(0,t.configureRequestUrl)(new u.URL(k),q),D.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(D,C),D.end()},A(0)})}async readRemoteBytes(i,h){const g=Buffer.allocUnsafe(h+1-i),y=this.createRequestOptions();y.headers.range=`bytes=${i}-${h}`;let m=0;if(await this.request(y,w=>{w.copy(g,m),m+=w.length}),m!==g.length)throw new Error(`Received data length ${m} is not equal to expected ${g.length}`);return g}request(i,h){return new Promise((g,y)=>{const m=this.httpExecutor.createRequest(i,w=>{(0,n.checkIsRangesSupported)(w,y)&&(w.on("error",y),w.on("aborted",()=>{y(new Error("response has been aborted by the server"))}),w.on("data",h),w.on("end",()=>g()))});this.httpExecutor.addErrorAndTimeoutHandlers(m,y),m.end()})}};ar.DifferentialDownloader=o;function s(r,i=" KB"){return new Intl.NumberFormat("en").format((r/1024).toFixed(2))+i}function a(r){const i=r.indexOf("?");return i<0?r:r.substring(0,i)}return ar}var hl;function qf(){if(hl)return ir;hl=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.GenericDifferentialDownloader=void 0;const t=du();let d=class extends t.DifferentialDownloader{download(f,u){return this.doDownload(f,u)}};return ir.GenericDifferentialDownloader=d,ir}var ea={},pl;function Ft(){return pl||(pl=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.UpdaterSignal=t.UPDATE_DOWNLOADED=t.DOWNLOAD_PROGRESS=t.CancellationToken=void 0,t.addHandler=f;const d=ke();Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}}),t.DOWNLOAD_PROGRESS="download-progress",t.UPDATE_DOWNLOADED="update-downloaded";class p{constructor(l){this.emitter=l}login(l){f(this.emitter,"login",l)}progress(l){f(this.emitter,t.DOWNLOAD_PROGRESS,l)}updateDownloaded(l){f(this.emitter,t.UPDATE_DOWNLOADED,l)}updateCancelled(l){f(this.emitter,"update-cancelled",l)}}t.UpdaterSignal=p;function f(u,l,n){u.on(l,n)}})(ea)),ea}var ml;function ga(){if(ml)return bt;ml=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.NoOpLogger=bt.AppUpdater=void 0;const t=ke(),d=yr,p=Gr,f=ra,u=wt(),l=la(),n=ef(),c=Pe,o=su(),s=bf(),a=Of(),r=If(),i=uu(),h=xf(),g=Ul,y=qf(),m=Ft();let w=class hu extends f.EventEmitter{get channel(){return this._channel}set channel(b){if(this._channel!=null){if(typeof b!="string")throw(0,t.newError)(`Channel must be a string, but got: ${b}`,"ERR_UPDATER_INVALID_CHANNEL");if(b.length===0)throw(0,t.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=b,this.allowDowngrade=!0}addAuthHeader(b){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:b})}get netSession(){return(0,r.getNetSession)()}get logger(){return this._logger}set logger(b){this._logger=b??new P}set updateConfigPath(b){this.clientPromise=null,this._appUpdateConfigPath=b,this.configOnDisk=new n.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(b){b&&(this._isUpdateSupported=b)}get isUserWithinRollout(){return this._isUserWithinRollout}set isUserWithinRollout(b){b&&(this._isUserWithinRollout=b)}constructor(b,O){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this.previousBlockmapBaseUrlOverride=null,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new m.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=v=>this.checkIfUpdateSupported(v),this._isUserWithinRollout=v=>this.isStagingMatch(v),this.clientPromise=null,this.stagingUserIdPromise=new n.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new n.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",v=>{this._logger.error(`Error: ${v.stack||v.message}`)}),O==null?(this.app=new a.ElectronAppAdapter,this.httpExecutor=new r.ElectronHttpExecutor((v,k)=>this.emit("login",v,k))):(this.app=O,this.httpExecutor=null);const S=this.app.version,A=(0,o.parse)(S);if(A==null)throw(0,t.newError)(`App version is not a valid semver version: "${S}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=A,this.allowPrerelease=C(A),b!=null&&(this.setFeedURL(b),typeof b!="string"&&b.requestHeaders&&(this.requestHeaders=b.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(b){const O=this.createProviderRuntimeOptions();let S;typeof b=="string"?S=new i.GenericProvider({provider:"generic",url:b},this,{...O,isUseMultipleRangeRequest:(0,h.isUrlProbablySupportMultiRangeRequests)(b)}):S=(0,h.createClient)(b,this,O),this.clientPromise=Promise.resolve(S)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let b=this.checkForUpdatesPromise;if(b!=null)return this._logger.info("Checking for update (already in progress)"),b;const O=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),b=this.doCheckForUpdates().then(S=>(O(),S)).catch(S=>{throw O(),this.emit("error",S,`Cannot check for updates: ${(S.stack||S).toString()}`),S}),this.checkForUpdatesPromise=b,b}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(b){return this.checkForUpdates().then(O=>O?.downloadPromise?(O.downloadPromise.then(()=>{const S=hu.formatDownloadNotification(O.updateInfo.version,this.app.name,b);new Ae.Notification(S).show()}),O):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),O))}static formatDownloadNotification(b,O,S){return S==null&&(S={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),S={title:S.title.replace("{appName}",O).replace("{version}",b),body:S.body.replace("{appName}",O).replace("{version}",b)},S}async isStagingMatch(b){const O=b.stagingPercentage;let S=O;if(S==null)return!0;if(S=parseInt(S,10),isNaN(S))return this._logger.warn(`Staging percentage is NaN: ${O}`),!0;S=S/100;const A=await this.stagingUserIdPromise.value,k=t.UUID.parse(A).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${S}, percentage: ${k}, user id: ${A}`),k<S}computeFinalHeaders(b){return this.requestHeaders!=null&&Object.assign(b,this.requestHeaders),b}async isUpdateAvailable(b){const O=(0,o.parse)(b.version);if(O==null)throw(0,t.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${b.version}"`,"ERR_UPDATER_INVALID_VERSION");const S=this.currentVersion;if((0,o.eq)(O,S)||!await Promise.resolve(this.isUpdateSupported(b))||!await Promise.resolve(this.isUserWithinRollout(b)))return!1;const v=(0,o.gt)(O,S),k=(0,o.lt)(O,S);return v?!0:this.allowDowngrade&&k}checkIfUpdateSupported(b){const O=b?.minimumSystemVersion,S=(0,p.release)();if(O)try{if((0,o.lt)(S,O))return this._logger.info(`Current OS version ${S} is less than the minimum OS version required ${O} for version ${S}`),!1}catch(A){this._logger.warn(`Failed to compare current OS version(${S}) with minimum OS version(${O}): ${(A.message||A).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(S=>(0,h.createClient)(S,this,this.createProviderRuntimeOptions())));const b=await this.clientPromise,O=await this.stagingUserIdPromise.value;return b.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":O})),{info:await b.getLatestVersion(),provider:b}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const b=await this.getUpdateInfoAndProvider(),O=b.info;if(!await this.isUpdateAvailable(O))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${O.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",O),{isUpdateAvailable:!1,versionInfo:O,updateInfo:O};this.updateInfoAndProvider=b,this.onUpdateAvailable(O);const S=new t.CancellationToken;return{isUpdateAvailable:!0,versionInfo:O,updateInfo:O,cancellationToken:S,downloadPromise:this.autoDownload?this.downloadUpdate(S):null}}onUpdateAvailable(b){this._logger.info(`Found version ${b.version} (url: ${(0,t.asArray)(b.files).map(O=>O.url).join(", ")})`),this.emit("update-available",b)}downloadUpdate(b=new t.CancellationToken){const O=this.updateInfoAndProvider;if(O==null){const A=new Error("Please check update first");return this.dispatchError(A),Promise.reject(A)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,t.asArray)(O.info.files).map(A=>A.url).join(", ")}`);const S=A=>{if(!(A instanceof t.CancellationError))try{this.dispatchError(A)}catch(v){this._logger.warn(`Cannot dispatch error event: ${v.stack||v}`)}return A};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:O,requestHeaders:this.computeRequestHeaders(O.provider),cancellationToken:b,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(A=>{throw S(A)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(b){this.emit("error",b,(b.stack||b).toString())}dispatchUpdateDownloaded(b){this.emit(m.UPDATE_DOWNLOADED,b)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,l.load)(await(0,u.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(b){const O=b.fileExtraDownloadHeaders;if(O!=null){const S=this.requestHeaders;return S==null?O:{...O,...S}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const b=c.join(this.app.userDataPath,".updaterId");try{const S=await(0,u.readFile)(b,"utf-8");if(t.UUID.check(S))return S;this._logger.warn(`Staging user id file exists, but content was invalid: ${S}`)}catch(S){S.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${S}`)}const O=t.UUID.v5((0,d.randomBytes)(4096),t.UUID.OID);this._logger.info(`Generated new staging user ID: ${O}`);try{await(0,u.outputFile)(b,O)}catch(S){this._logger.warn(`Couldn't write out staging user ID: ${S}`)}return O}get isAddNoCacheQuery(){const b=this.requestHeaders;if(b==null)return!0;for(const O of Object.keys(b)){const S=O.toLowerCase();if(S==="authorization"||S==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let b=this.downloadedUpdateHelper;if(b==null){const O=(await this.configOnDisk.value).updaterCacheDirName,S=this._logger;O==null&&S.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const A=c.join(this.app.baseCachePath,O||this.app.name);S.debug!=null&&S.debug(`updater cache dir: ${A}`),b=new s.DownloadedUpdateHelper(A),this.downloadedUpdateHelper=b}return b}async executeDownload(b){const O=b.fileInfo,S={headers:b.downloadUpdateOptions.requestHeaders,cancellationToken:b.downloadUpdateOptions.cancellationToken,sha2:O.info.sha2,sha512:O.info.sha512};this.listenerCount(m.DOWNLOAD_PROGRESS)>0&&(S.onProgress=ie=>this.emit(m.DOWNLOAD_PROGRESS,ie));const A=b.downloadUpdateOptions.updateInfoAndProvider.info,v=A.version,k=O.packageInfo;function q(){const ie=decodeURIComponent(b.fileInfo.url.pathname);return ie.toLowerCase().endsWith(`.${b.fileExtension.toLowerCase()}`)?c.basename(ie):b.fileInfo.info.url}const x=await this.getOrCreateDownloadHelper(),$=x.cacheDirForPendingUpdate;await(0,u.mkdir)($,{recursive:!0});const L=q();let N=c.join($,L);const j=k==null?null:c.join($,`package-${v}${c.extname(k.path)||".7z"}`),D=async ie=>{await x.setDownloadedFile(N,j,A,O,L,ie),await b.done({...A,downloadedFile:N});const we=c.join($,"current.blockmap");return await(0,u.pathExists)(we)&&await(0,u.copyFile)(we,c.join(x.cacheDir,"current.blockmap")),j==null?[N]:[N,j]},G=this._logger,V=await x.validateDownloadedPath(N,A,O,G);if(V!=null)return N=V,await D(!1);const te=async()=>(await x.clear().catch(()=>{}),await(0,u.unlink)(N).catch(()=>{})),de=await(0,s.createTempUpdateFile)(`temp-${L}`,$,G);try{await b.task(de,S,j,te),await(0,t.retry)(()=>(0,u.rename)(de,N),{retries:60,interval:500,shouldRetry:ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message)?!0:(G.warn(`Cannot rename temp file to final file: ${ie.message||ie.stack}`),!1)})}catch(ie){throw await te(),ie instanceof t.CancellationError&&(G.info("cancelled"),this.emit("update-cancelled",A)),ie}return G.info(`New version ${v} has been downloaded to ${N}`),await D(!0)}async differentialDownloadInstaller(b,O,S,A,v){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const k=O.updateInfoAndProvider.provider,q=await k.getBlockMapFiles(b.url,this.app.version,O.updateInfoAndProvider.info.version,this.previousBlockmapBaseUrlOverride);this._logger.info(`Download block maps (old: "${q[0]}", new: ${q[1]})`);const x=async G=>{const V=await this.httpExecutor.downloadToBuffer(G,{headers:O.requestHeaders,cancellationToken:O.cancellationToken});if(V==null||V.length===0)throw new Error(`Blockmap "${G.href}" is empty`);try{return JSON.parse((0,g.gunzipSync)(V).toString())}catch(te){throw new Error(`Cannot parse blockmap "${G.href}", error: ${te}`)}},$={newUrl:b.url,oldFile:c.join(this.downloadedUpdateHelper.cacheDir,v),logger:this._logger,newFile:S,isUseMultipleRangeRequest:k.isUseMultipleRangeRequest,requestHeaders:O.requestHeaders,cancellationToken:O.cancellationToken};this.listenerCount(m.DOWNLOAD_PROGRESS)>0&&($.onProgress=G=>this.emit(m.DOWNLOAD_PROGRESS,G));const L=async(G,V)=>{const te=c.join(V,"current.blockmap");await(0,u.outputFile)(te,(0,g.gzipSync)(JSON.stringify(G)))},N=async G=>{const V=c.join(G,"current.blockmap");try{if(await(0,u.pathExists)(V))return JSON.parse((0,g.gunzipSync)(await(0,u.readFile)(V)).toString())}catch(te){this._logger.warn(`Cannot parse blockmap "${V}", error: ${te}`)}return null},j=await x(q[1]);await L(j,this.downloadedUpdateHelper.cacheDirForPendingUpdate);let D=await N(this.downloadedUpdateHelper.cacheDir);return D==null&&(D=await x(q[0])),await new y.GenericDifferentialDownloader(b.info,this.httpExecutor,$).download(D,j),!1}catch(k){if(this._logger.error(`Cannot download differentially, fallback to full download: ${k.stack||k}`),this._testOnlyOptions!=null)throw k;return!0}}};bt.AppUpdater=w;function C(I){const b=(0,o.prerelease)(I);return b!=null&&b.length>0}class P{info(b){}warn(b){}error(b){}}return bt.NoOpLogger=P,bt}var gl;function Qr(){if(gl)return Yt;gl=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.BaseUpdater=void 0;const t=vr,d=ga();let p=class extends d.AppUpdater{constructor(u,l){super(u,l),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(u=!1,l=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(u,u?l:this.autoRunAppAfterInstall)?setImmediate(()=>{Ae.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(u){return super.executeDownload({...u,done:l=>(this.dispatchUpdateDownloaded(l),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(u=!1,l=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const n=this.downloadedUpdateHelper,c=this.installerPath,o=n==null?null:n.downloadedFileInfo;if(c==null||o==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${u}, isForceRunAfter: ${l}`),this.doInstall({isSilent:u,isForceRunAfter:l,isAdminRightsRequired:o.isAdminRightsRequired})}catch(s){return this.dispatchError(s),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(u=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(u!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${u}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}spawnSyncLog(u,l=[],n={}){this._logger.info(`Executing: ${u} with args: ${l}`);const c=(0,t.spawnSync)(u,l,{env:{...process.env,...n},encoding:"utf-8",shell:!0}),{error:o,status:s,stdout:a,stderr:r}=c;if(o!=null)throw this._logger.error(r),o;if(s!=null&&s!==0)throw this._logger.error(r),new Error(`Command ${u} exited with code ${s}`);return a.trim()}async spawnLog(u,l=[],n=void 0,c="ignore"){return this._logger.info(`Executing: ${u} with args: ${l}`),new Promise((o,s)=>{try{const a={stdio:c,env:n,detached:!0},r=(0,t.spawn)(u,l,a);r.on("error",i=>{s(i)}),r.unref(),r.pid!==void 0&&o(!0)}catch(a){s(a)}})}};return Yt.BaseUpdater=p,Yt}var lr={},ur={},vl;function pu(){if(vl)return ur;vl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const t=wt(),d=du(),p=Ul;let f=class extends d.DifferentialDownloader{async download(){const c=this.blockAwareFileInfo,o=c.size,s=o-(c.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(s,o-1);const a=u(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await l(this.options.oldFile),a)}};ur.FileWithEmbeddedBlockMapDifferentialDownloader=f;function u(n){return JSON.parse((0,p.inflateRawSync)(n).toString())}async function l(n){const c=await(0,t.open)(n,"r");try{const o=(await(0,t.fstat)(c)).size,s=Buffer.allocUnsafe(4);await(0,t.read)(c,s,0,s.length,o-s.length);const a=Buffer.allocUnsafe(s.readUInt32BE(0));return await(0,t.read)(c,a,0,a.length,o-s.length-a.length),await(0,t.close)(c),u(a)}catch(o){throw await(0,t.close)(c),o}}return ur}var El;function yl(){if(El)return lr;El=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.AppImageUpdater=void 0;const t=ke(),d=vr,p=wt(),f=nt,u=Pe,l=Qr(),n=pu(),c=Ke(),o=Ft();let s=class extends l.BaseUpdater{constructor(r,i){super(r,i)}isUpdaterActive(){return process.env.APPIMAGE==null&&!this.forceDevUpdateConfig?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(r){const i=r.updateInfoAndProvider.provider,h=(0,c.findFile)(i.resolveFiles(r.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:h,downloadUpdateOptions:r,task:async(g,y)=>{const m=process.env.APPIMAGE;if(m==null)throw(0,t.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(r.disableDifferentialDownload||await this.downloadDifferential(h,m,g,i,r))&&await this.httpExecutor.download(h.url,g,y),await(0,p.chmod)(g,493)}})}async downloadDifferential(r,i,h,g,y){try{const m={newUrl:r.url,oldFile:i,logger:this._logger,newFile:h,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,requestHeaders:y.requestHeaders,cancellationToken:y.cancellationToken};return this.listenerCount(o.DOWNLOAD_PROGRESS)>0&&(m.onProgress=w=>this.emit(o.DOWNLOAD_PROGRESS,w)),await new n.FileWithEmbeddedBlockMapDifferentialDownloader(r.info,this.httpExecutor,m).download(),!1}catch(m){return this._logger.error(`Cannot download differentially, fallback to full download: ${m.stack||m}`),process.platform==="linux"}}doInstall(r){const i=process.env.APPIMAGE;if(i==null)throw(0,t.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,f.unlinkSync)(i);let h;const g=u.basename(i),y=this.installerPath;if(y==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;u.basename(y)===g||!/\d+\.\d+\.\d+/.test(g)?h=i:h=u.join(u.dirname(i),u.basename(y)),(0,d.execFileSync)("mv",["-f",y,h]),h!==i&&this.emit("appimage-filename-updated",h);const m={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return r.isForceRunAfter?this.spawnLog(h,[],m):(m.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,d.execFileSync)(h,[],{env:m})),!0}};return lr.AppImageUpdater=s,lr}var cr={},fr={},wl;function va(){if(wl)return fr;wl=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.LinuxUpdater=void 0;const t=Qr();let d=class extends t.BaseUpdater{constructor(f,u){super(f,u)}isRunningAsRoot(){var f;return((f=process.getuid)===null||f===void 0?void 0:f.call(process))===0}get installerPath(){var f,u;return(u=(f=super.installerPath)===null||f===void 0?void 0:f.replace(/\\/g,"\\\\").replace(/ /g,"\\ "))!==null&&u!==void 0?u:null}runCommandWithSudoIfNeeded(f){if(this.isRunningAsRoot())return this._logger.info("Running as root, no need to use sudo"),this.spawnSyncLog(f[0],f.slice(1));const{name:u}=this.app,l=`"${u} would like to update"`,n=this.sudoWithArgs(l);this._logger.info(`Running as non-root user, using sudo to install: ${n}`);let c='"';return(/pkexec/i.test(n[0])||n[0]==="sudo")&&(c=""),this.spawnSyncLog(n[0],[...n.length>1?n.slice(1):[],`${c}/bin/bash`,"-c",`'${f.join(" ")}'${c}`])}sudoWithArgs(f){const u=this.determineSudoCommand(),l=[u];return/kdesudo/i.test(u)?(l.push("--comment",f),l.push("-c")):/gksudo/i.test(u)?l.push("--message",f):/pkexec/i.test(u)&&l.push("--disable-internal-agent"),l}hasCommand(f){try{return this.spawnSyncLog("command",["-v",f]),!0}catch{return!1}}determineSudoCommand(){const f=["gksudo","kdesudo","pkexec","beesu"];for(const u of f)if(this.hasCommand(u))return u;return"sudo"}detectPackageManager(f){var u;const l=(u=process.env.ELECTRON_BUILDER_LINUX_PACKAGE_MANAGER)===null||u===void 0?void 0:u.trim();if(l)return l;for(const n of f)if(this.hasCommand(n))return n;return this._logger.warn(`No package manager found in the list: ${f.join(", ")}. Defaulting to the first one: ${f[0]}`),f[0]}};return fr.LinuxUpdater=d,fr}var _l;function Rl(){if(_l)return cr;_l=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.DebUpdater=void 0;const t=Ke(),d=Ft(),p=va();let f=class mu extends p.LinuxUpdater{constructor(l,n){super(l,n)}doDownloadUpdate(l){const n=l.updateInfoAndProvider.provider,c=(0,t.findFile)(n.resolveFiles(l.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:c,downloadUpdateOptions:l,task:async(o,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=a=>this.emit(d.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(c.url,o,s)}})}doInstall(l){const n=this.installerPath;if(n==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;if(!this.hasCommand("dpkg")&&!this.hasCommand("apt"))return this.dispatchError(new Error("Neither dpkg nor apt command found. Cannot install .deb package.")),!1;const c=["dpkg","apt"],o=this.detectPackageManager(c);try{mu.installWithCommandRunner(o,n,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(s){return this.dispatchError(s),!1}return l.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(l,n,c,o){var s;if(l==="dpkg")try{c(["dpkg","-i",n])}catch(a){o.warn((s=a.message)!==null&&s!==void 0?s:a),o.warn("dpkg installation failed, trying to fix broken dependencies with apt-get"),c(["apt-get","install","-f","-y"])}else if(l==="apt")o.warn("Using apt to install a local .deb. This may fail for unsigned packages unless properly configured."),c(["apt","install","-y","--allow-unauthenticated","--allow-downgrades","--allow-change-held-packages",n]);else throw new Error(`Package manager ${l} not supported`)}};return cr.DebUpdater=f,cr}var dr={},Al;function Cl(){if(Al)return dr;Al=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.PacmanUpdater=void 0;const t=Ft(),d=Ke(),p=va();let f=class gu extends p.LinuxUpdater{constructor(l,n){super(l,n)}doDownloadUpdate(l){const n=l.updateInfoAndProvider.provider,c=(0,d.findFile)(n.resolveFiles(l.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:c,downloadUpdateOptions:l,task:async(o,s)=>{this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(s.onProgress=a=>this.emit(t.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(c.url,o,s)}})}doInstall(l){const n=this.installerPath;if(n==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;try{gu.installWithCommandRunner(n,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(c){return this.dispatchError(c),!1}return l.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(l,n,c){var o;try{n(["pacman","-U","--noconfirm",l])}catch(s){c.warn((o=s.message)!==null&&o!==void 0?o:s),c.warn("pacman installation failed, attempting to update package database and retry");try{n(["pacman","-Sy","--noconfirm"]),n(["pacman","-U","--noconfirm",l])}catch(a){throw c.error("Retry after pacman -Sy failed"),a}}}};return dr.PacmanUpdater=f,dr}var hr={},Sl;function Tl(){if(Sl)return hr;Sl=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.RpmUpdater=void 0;const t=Ft(),d=Ke(),p=va();let f=class vu extends p.LinuxUpdater{constructor(l,n){super(l,n)}doDownloadUpdate(l){const n=l.updateInfoAndProvider.provider,c=(0,d.findFile)(n.resolveFiles(l.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:c,downloadUpdateOptions:l,task:async(o,s)=>{this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(s.onProgress=a=>this.emit(t.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(c.url,o,s)}})}doInstall(l){const n=this.installerPath;if(n==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const c=["zypper","dnf","yum","rpm"],o=this.detectPackageManager(c);try{vu.installWithCommandRunner(o,n,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(s){return this.dispatchError(s),!1}return l.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(l,n,c,o){if(l==="zypper")return c(["zypper","--non-interactive","--no-refresh","install","--allow-unsigned-rpm","-f",n]);if(l==="dnf")return c(["dnf","install","--nogpgcheck","-y",n]);if(l==="yum")return c(["yum","install","--nogpgcheck","-y",n]);if(l==="rpm")return o.warn("Installing with rpm only (no dependency resolution)."),c(["rpm","-Uvh","--replacepkgs","--replacefiles","--nodeps",n]);throw new Error(`Package manager ${l} not supported`)}};return hr.RpmUpdater=f,hr}var pr={},bl;function Pl(){if(bl)return pr;bl=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.MacUpdater=void 0;const t=ke(),d=wt(),p=nt,f=Pe,u=hc,l=ga(),n=Ke(),c=vr,o=yr;let s=class extends l.AppUpdater{constructor(r,i){super(r,i),this.nativeUpdater=Ae.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",h=>{this._logger.warn(h),this.emit("error",h)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(r){this._logger.debug!=null&&this._logger.debug(r)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(r=>{r&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(r){let i=r.updateInfoAndProvider.provider.resolveFiles(r.updateInfoAndProvider.info);const h=this._logger,g="sysctl.proc_translated";let y=!1;try{this.debug("Checking for macOS Rosetta environment"),y=(0,c.execFileSync)("sysctl",[g],{encoding:"utf8"}).includes(`${g}: 1`),h.info(`Checked for macOS Rosetta environment (isRosetta=${y})`)}catch(b){h.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${b}`)}let m=!1;try{this.debug("Checking for arm64 in uname");const O=(0,c.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");h.info(`Checked 'uname -a': arm64=${O}`),m=m||O}catch(b){h.warn(`uname shell command to check for arm64 failed: ${b}`)}m=m||process.arch==="arm64"||y;const w=b=>{var O;return b.url.pathname.includes("arm64")||((O=b.info.url)===null||O===void 0?void 0:O.includes("arm64"))};m&&i.some(w)?i=i.filter(b=>m===w(b)):i=i.filter(b=>!w(b));const C=(0,n.findFile)(i,"zip",["pkg","dmg"]);if(C==null)throw(0,t.newError)(`ZIP file not provided: ${(0,t.safeStringifyJson)(i)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const P=r.updateInfoAndProvider.provider,I="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:C,downloadUpdateOptions:r,task:async(b,O)=>{const S=f.join(this.downloadedUpdateHelper.cacheDir,I),A=()=>(0,d.pathExistsSync)(S)?!r.disableDifferentialDownload:(h.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let v=!0;A()&&(v=await this.differentialDownloadInstaller(C,r,b,P,I)),v&&await this.httpExecutor.download(C.url,b,O)},done:async b=>{if(!r.disableDifferentialDownload)try{const O=f.join(this.downloadedUpdateHelper.cacheDir,I);await(0,d.copyFile)(b.downloadedFile,O)}catch(O){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${O.message}`)}return this.updateDownloaded(C,b)}})}async updateDownloaded(r,i){var h;const g=i.downloadedFile,y=(h=r.info.size)!==null&&h!==void 0?h:(await(0,d.stat)(g)).size,m=this._logger,w=`fileToProxy=${r.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${w})`),this.server=(0,u.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${w})`),this.server.on("close",()=>{m.info(`Proxy server for native Squirrel.Mac is closed (${w})`)});const C=P=>{const I=P.address();return typeof I=="string"?I:`http://127.0.0.1:${I?.port}`};return await new Promise((P,I)=>{const b=(0,o.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),O=Buffer.from(`autoupdater:${b}`,"ascii"),S=`/${(0,o.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(A,v)=>{const k=A.url;if(m.info(`${k} requested`),k==="/"){if(!A.headers.authorization||A.headers.authorization.indexOf("Basic ")===-1){v.statusCode=401,v.statusMessage="Invalid Authentication Credentials",v.end(),m.warn("No authenthication info");return}const $=A.headers.authorization.split(" ")[1],L=Buffer.from($,"base64").toString("ascii"),[N,j]=L.split(":");if(N!=="autoupdater"||j!==b){v.statusCode=401,v.statusMessage="Invalid Authentication Credentials",v.end(),m.warn("Invalid authenthication credentials");return}const D=Buffer.from(`{ "url": "${C(this.server)}${S}" }`);v.writeHead(200,{"Content-Type":"application/json","Content-Length":D.length}),v.end(D);return}if(!k.startsWith(S)){m.warn(`${k} requested, but not supported`),v.writeHead(404),v.end();return}m.info(`${S} requested by Squirrel.Mac, pipe ${g}`);let q=!1;v.on("finish",()=>{q||(this.nativeUpdater.removeListener("error",I),P([]))});const x=(0,p.createReadStream)(g);x.on("error",$=>{try{v.end()}catch(L){m.warn(`cannot end response: ${L}`)}q=!0,this.nativeUpdater.removeListener("error",I),I(new Error(`Cannot pipe "${g}": ${$}`))}),v.writeHead(200,{"Content-Type":"application/zip","Content-Length":y}),x.pipe(v)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${w})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${C(this.server)}, ${w})`),this.nativeUpdater.setFeedURL({url:C(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${O.toString("base64")}`}}),this.dispatchUpdateDownloaded(i),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",I),this.nativeUpdater.checkForUpdates()):P([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return pr.MacUpdater=s,pr}var mr={},Br={},Ol;function $f(){if(Ol)return Br;Ol=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.verifySignature=l;const t=ke(),d=vr,p=Gr,f=Pe;function u(s,a){return['set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",s],{shell:!0,timeout:a}]}function l(s,a,r){return new Promise((i,h)=>{const g=a.replace(/'/g,"''");r.info(`Verifying signature ${g}`),(0,d.execFile)(...u(`"Get-AuthenticodeSignature -LiteralPath '${g}' | ConvertTo-Json -Compress"`,20*1e3),(y,m,w)=>{var C;try{if(y!=null||w){c(r,y,w,h),i(null);return}const P=n(m);if(P.Status===0){try{const S=f.normalize(P.Path),A=f.normalize(a);if(r.info(`LiteralPath: ${S}. Update Path: ${A}`),S!==A){c(r,new Error(`LiteralPath of ${S} is different than ${A}`),w,h),i(null);return}}catch(S){r.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(C=S.message)!==null&&C!==void 0?C:S.stack}`)}const b=(0,t.parseDn)(P.SignerCertificate.Subject);let O=!1;for(const S of s){const A=(0,t.parseDn)(S);if(A.size?O=Array.from(A.keys()).every(k=>A.get(k)===b.get(k)):S===b.get("CN")&&(r.warn(`Signature validated using only CN ${S}. Please add your full Distinguished Name (DN) to publisherNames configuration`),O=!0),O){i(null);return}}}const I=`publisherNames: ${s.join(" | ")}, raw info: `+JSON.stringify(P,(b,O)=>b==="RawData"?void 0:O,2);r.warn(`Sign verification failed, installer signed with incorrect certificate: ${I}`),i(I)}catch(P){c(r,P,null,h),i(null);return}})})}function n(s){const a=JSON.parse(s);delete a.PrivateKey,delete a.IsOSBinary,delete a.SignatureType;const r=a.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),a}function c(s,a,r,i){if(o()){s.warn(`Cannot execute Get-AuthenticodeSignature: ${a||r}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,d.execFileSync)(...u("ConvertTo-Json test",10*1e3))}catch(h){s.warn(`Cannot execute ConvertTo-Json: ${h.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}a!=null&&i(a),r&&i(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${r}. Failing signature validation due to unknown stderr.`))}function o(){const s=p.release();return s.startsWith("6.")&&!s.startsWith("6.3")}return Br}var Il;function Dl(){if(Il)return mr;Il=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.NsisUpdater=void 0;const t=ke(),d=Pe,p=Qr(),f=pu(),u=Ft(),l=Ke(),n=wt(),c=$f(),o=yt;let s=class extends p.BaseUpdater{constructor(r,i){super(r,i),this._verifyUpdateCodeSignature=(h,g)=>(0,c.verifySignature)(h,g,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(r){r&&(this._verifyUpdateCodeSignature=r)}doDownloadUpdate(r){const i=r.updateInfoAndProvider.provider,h=(0,l.findFile)(i.resolveFiles(r.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:r,fileInfo:h,task:async(g,y,m,w)=>{const C=h.packageInfo,P=C!=null&&m!=null;if(P&&r.disableWebInstaller)throw(0,t.newError)(`Unable to download new version ${r.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!P&&!r.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(P||r.disableDifferentialDownload||await this.differentialDownloadInstaller(h,r,g,i,t.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(h.url,g,y);const I=await this.verifySignature(g);if(I!=null)throw await w(),(0,t.newError)(`New version ${r.updateInfoAndProvider.info.version} is not signed by the application owner: ${I}`,"ERR_UPDATER_INVALID_SIGNATURE");if(P&&await this.differentialDownloadWebPackage(r,C,m,i))try{await this.httpExecutor.download(new o.URL(C.path),m,{headers:r.requestHeaders,cancellationToken:r.cancellationToken,sha512:C.sha512})}catch(b){try{await(0,n.unlink)(m)}catch{}throw b}}})}async verifySignature(r){let i;try{if(i=(await this.configOnDisk.value).publisherName,i==null)return null}catch(h){if(h.code==="ENOENT")return null;throw h}return await this._verifyUpdateCodeSignature(Array.isArray(i)?i:[i],r)}doInstall(r){const i=this.installerPath;if(i==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const h=["--updated"];r.isSilent&&h.push("/S"),r.isForceRunAfter&&h.push("--force-run"),this.installDirectory&&h.push(`/D=${this.installDirectory}`);const g=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;g!=null&&h.push(`--package-file=${g}`);const y=()=>{this.spawnLog(d.join(process.resourcesPath,"elevate.exe"),[i].concat(h)).catch(m=>this.dispatchError(m))};return r.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),y(),!0):(this.spawnLog(i,h).catch(m=>{const w=m.code;this._logger.info(`Cannot run installer: error code: ${w}, error message: "${m.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),w==="UNKNOWN"||w==="EACCES"?y():w==="ENOENT"?Ae.shell.openPath(i).catch(C=>this.dispatchError(C)):this.dispatchError(m)}),!0)}async differentialDownloadWebPackage(r,i,h,g){if(i.blockMapSize==null)return!0;try{const y={newUrl:new o.URL(i.path),oldFile:d.join(this.downloadedUpdateHelper.cacheDir,t.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:h,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,cancellationToken:r.cancellationToken};this.listenerCount(u.DOWNLOAD_PROGRESS)>0&&(y.onProgress=m=>this.emit(u.DOWNLOAD_PROGRESS,m)),await new f.FileWithEmbeddedBlockMapDifferentialDownloader(i,this.httpExecutor,y).download()}catch(y){return this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),process.platform==="win32"}return!1}};return mr.NsisUpdater=s,mr}var Nl;function Mf(){return Nl||(Nl=1,(function(t){var d=Tt&&Tt.__createBinding||(Object.create?(function(m,w,C,P){P===void 0&&(P=C);var I=Object.getOwnPropertyDescriptor(w,C);(!I||("get"in I?!w.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return w[C]}}),Object.defineProperty(m,P,I)}):(function(m,w,C,P){P===void 0&&(P=C),m[P]=w[C]})),p=Tt&&Tt.__exportStar||function(m,w){for(var C in m)C!=="default"&&!Object.prototype.hasOwnProperty.call(w,C)&&d(w,m,C)};Object.defineProperty(t,"__esModule",{value:!0}),t.NsisUpdater=t.MacUpdater=t.RpmUpdater=t.PacmanUpdater=t.DebUpdater=t.AppImageUpdater=t.Provider=t.NoOpLogger=t.AppUpdater=t.BaseUpdater=void 0;const f=wt(),u=Pe;var l=Qr();Object.defineProperty(t,"BaseUpdater",{enumerable:!0,get:function(){return l.BaseUpdater}});var n=ga();Object.defineProperty(t,"AppUpdater",{enumerable:!0,get:function(){return n.AppUpdater}}),Object.defineProperty(t,"NoOpLogger",{enumerable:!0,get:function(){return n.NoOpLogger}});var c=Ke();Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return c.Provider}});var o=yl();Object.defineProperty(t,"AppImageUpdater",{enumerable:!0,get:function(){return o.AppImageUpdater}});var s=Rl();Object.defineProperty(t,"DebUpdater",{enumerable:!0,get:function(){return s.DebUpdater}});var a=Cl();Object.defineProperty(t,"PacmanUpdater",{enumerable:!0,get:function(){return a.PacmanUpdater}});var r=Tl();Object.defineProperty(t,"RpmUpdater",{enumerable:!0,get:function(){return r.RpmUpdater}});var i=Pl();Object.defineProperty(t,"MacUpdater",{enumerable:!0,get:function(){return i.MacUpdater}});var h=Dl();Object.defineProperty(t,"NsisUpdater",{enumerable:!0,get:function(){return h.NsisUpdater}}),p(Ft(),t);let g;function y(){if(process.platform==="win32")g=new(Dl()).NsisUpdater;else if(process.platform==="darwin")g=new(Pl()).MacUpdater;else{g=new(yl()).AppImageUpdater;try{const m=u.join(process.resourcesPath,"package-type");if(!(0,f.existsSync)(m))return g;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const w=(0,f.readFileSync)(m).toString().trim();switch(console.info("Found package-type:",w),w){case"deb":g=new(Rl()).DebUpdater;break;case"rpm":g=new(Tl()).RpmUpdater;break;case"pacman":g=new(Cl()).PacmanUpdater;break;default:break}}catch(m){console.warn("Unable to detect 'package-type' for autoUpdater (rpm/deb/pacman support). If you'd like to expand support, please consider contributing to electron-builder",m.message)}}return g}Object.defineProperty(t,"autoUpdater",{enumerable:!0,get:()=>g||y()})})(Tt)),Tt}var dt=Mf();const Ze=new ra.EventEmitter,Bf=300;let Fe=null;const jr={consoleAddress:"",frameRate:30,speed:1,output:!1,startTime:[0,0,0,0]};let It,Ne={...jr};const Hf=()=>{try{if(nt.existsSync(It)){console.log("[Config] Loading config from:",It);const t=nt.readFileSync(It,"utf8"),d={...jr,...JSON.parse(t)};return console.log("[Config] Loaded:",d),d}else console.log("[Config] No config file found, using defaults")}catch(t){console.error("[Config] Failed to load config:",t)}return console.log("[Config] Using default config:",jr),{...jr}},Hr=t=>{try{console.log("[Config] Saving config:",t),nt.writeFileSync(It,JSON.stringify(t,null,2),"utf8"),Ne={...t},console.log("[Config] Config saved successfully to:",It)}catch(d){console.error("[Config] Failed to save config:",d)}},jf=Ae.app.requestSingleInstanceLock();jf?Ae.app.on("second-instance",()=>{Fe&&(Fe.isMinimized()&&Fe.restore(),Fe.focus())}):Ae.app.quit();const Gf=Ae.app.isPackaged?Pe.join(process.resourcesPath,"artNetTc.js"):Pe.join(__dirname,"..","..","src","electron","artNetTc.js"),He=vr.fork(Gf,{stdio:["pipe","pipe","pipe","ipc"]});He.stdout?.pipe(process.stdout);He.stderr?.pipe(process.stdout);const Fl=()=>{Fe=new Ae.BrowserWindow({width:Bf,height:298,autoHideMenuBar:!0,show:!1,title:"ArtTimecode Gen v"+Ae.app.getVersion(),transparent:!0,frame:!1,resizable:!1,hasShadow:!1,icon:Pe.join(__dirname,"icon.ico"),webPreferences:{preload:Pe.join(__dirname,"preload.js"),sandbox:!1}}),console.log("[DEBUG] MAIN_WINDOW_VITE_DEV_SERVER_URL:",void 0),console.log("[DEBUG] MAIN_WINDOW_VITE_NAME:","main_window"),console.log("[DEBUG] __dirname:",__dirname),console.log("[DEBUG] app.isPackaged:",Ae.app.isPackaged);{const t=Pe.join(__dirname,"../dist/index.html");console.log("[DEBUG] Loading from file:",t),Fe.loadFile(t)}Fe.webContents.on("did-fail-load",(t,d,p,f)=>{console.error("[DEBUG] Failed to load page:",d,p,f)}),Fe.on("closed",()=>Ae.app.quit()),Fe.on("ready-to-show",()=>Fe?.show()),Ae.app.isPackaged||Fe.webContents.openDevTools({mode:"detach"})};Ae.app.on("ready",()=>{It=Pe.join(Ae.app.getPath("userData"),"config.json"),console.log("[Config] Config path:",It),Ne=Hf(),console.log("[Config] Initializing artNet with saved config"),He.send({cmd:"rate",rate:Ne.frameRate}),console.log("[Config] Set frameRate:",Ne.frameRate),He.send({cmd:"speed",speed:Ne.speed}),console.log("[Config] Set speed:",Ne.speed),He.send({cmd:"startTime",startTime:Ne.startTime}),console.log("[Config] Set startTime:",Ne.startTime),Ne.output&&Ne.consoleAddress&&(He.send({cmd:"consoleAddress",address:Ne.consoleAddress}),console.log("[Config] Set consoleAddress:",Ne.consoleAddress)),Ae.protocol.registerFileProtocol("atom",(u,l)=>{const n=u.url.substr(6);l({path:Pe.normalize(`${__dirname}/${n}`)})}),He.on("message",u=>{switch(u.cmd){case"time":try{Fe?.webContents.send("time",u.clock)}catch{}break;case"rate":Ze.emit("rate",u.rate);break;case"state":Ze.emit("state",u.state);break;case"speed":Ze.emit("speed",u.speed);break;case"output":Ze.emit("output",u.output);break}}),He.on("error",u=>{console.log(u)}),He.on("close",(u,l)=>{console.log("CLOSED",u,l)}),Ae.ipcMain.on("reactIsReady",()=>{Fe?.webContents.send("message","React Is Ready"),console.log("[Config] Sending config to renderer:",Ne),Fe?.webContents.send("config",Ne),Ae.app.isPackaged&&(Fe?.webContents.send("message","App is packaged"),dt.autoUpdater.on("error",u=>Fe?.webContents.send("updater",u)),dt.autoUpdater.on("checking-for-update",()=>Fe?.webContents.send("updater","checking-for-update")),dt.autoUpdater.on("update-available",u=>Fe?.webContents.send("updater","update-available",u)),dt.autoUpdater.on("update-not-available",u=>Fe?.webContents.send("updater","update-not-available",u)),dt.autoUpdater.on("download-progress",u=>Fe?.webContents.send("updater","download-progress",u)),dt.autoUpdater.on("update-downloaded",u=>Fe?.webContents.send("updater","update-downloaded",u)),Ae.ipcMain.on("installUpdate",()=>dt.autoUpdater.quitAndInstall()),setTimeout(()=>dt.autoUpdater.checkForUpdates(),3e3),setInterval(()=>dt.autoUpdater.checkForUpdates(),1e3*60*60))});const t=async u=>new Promise(l=>{const n=c=>{Ze.removeListener("rate",n),l(c)};Ze.on("rate",n),He.send({cmd:"rate",rate:u})}),d=async u=>new Promise(l=>{const n=c=>{Ze.removeListener("state",n),l(c)};Ze.on("state",n),He.send({cmd:"state",state:u})}),p=async u=>new Promise(l=>{const n=c=>{Ze.removeListener("speed",n),l(c)};Ze.on("speed",n),He.send({cmd:"speed",speed:u})}),f=async u=>new Promise(l=>{const n=c=>{Ze.removeListener("output",n),l(c)};Ze.on("output",n),He.send({cmd:"consoleAddress",address:u})});Ae.ipcMain.handle("consoleAddress",async(u,l)=>{console.log("[Config] consoleAddress changed to:",l);const n=await f(l);return Ne.consoleAddress=l,Ne.output=n,Hr(Ne),n}),Ae.ipcMain.handle("frameRate",async(u,l)=>{console.log("[Config] frameRate changed to:",l);const n=await t(l);return Ne.frameRate=n,Hr(Ne),n}),Ae.ipcMain.handle("state",async(u,l)=>await d(l)),Ae.ipcMain.handle("speed",async(u,l)=>{console.log("[Config] speed changed to:",l);const n=await p(l);return Ne.speed=n,Hr(Ne),n}),Ae.ipcMain.handle("startTime",async(u,l)=>(console.log("[Config] startTime changed to:",l),Ne.startTime=l,Hr(Ne),He.send({cmd:"startTime",startTime:l}),l)),Ae.ipcMain.on("time",(u,l)=>{He.send({cmd:"time",time:l})}),Ae.ipcMain.on("close",()=>Ae.app.quit()),Ae.ipcMain.on("min",()=>Fe?.minimize()),Ae.ipcMain.on("setClickThrough",(u,l)=>{Fe?.setIgnoreMouseEvents(l,{forward:!0})}),Fl(),Ae.app.on("activate",()=>{Ae.BrowserWindow.getAllWindows().length===0&&Fl()})});Ae.app.on("will-quit",()=>He.kill("SIGKILL"));Ae.app.on("window-all-closed",()=>{process.platform!=="darwin"&&Ae.app.quit()});
